/*! For license information please see bundle.f6546f.js.LICENSE.txt */
(()=>{"use strict";var t={d:(n,e)=>{for(var r in e)t.o(e,r)&&!t.o(n,r)&&Object.defineProperty(n,r,{enumerable:!0,get:e[r]})}};t.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"==typeof window)return window}}(),t.o=(t,n)=>Object.prototype.hasOwnProperty.call(t,n),t.r=t=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})};var n={};t.r(n),t.d(n,{color:()=>di,dispatch:()=>xr,drag:()=>ca,geoConicEquidistant:()=>Du,geoEquirectangular:()=>Nu,geoGraticule:()=>Ru,geoMollweide:()=>Ql,geoOrthographic:()=>zu,geoPath:()=>jl,geoPatterson:()=>xc,geoPolyhedralWaterman:()=>Es,geoStereographic:()=>Ol,geoWinkel3:()=>Ls,hsl:()=>Ei,interpolateBasis:()=>Rs,interpolateCubehelixDefault:()=>lf,interpolateHcl:()=>Cs,interpolateHsl:()=>qs,interpolateLab:()=>Us,interpolateRdGy:()=>ff,interpolateRgb:()=>Hs,interpolateYlOrRd:()=>hf,json:()=>Ws,lab:()=>Ii,pointer:()=>Zi,pointers:()=>df,request:()=>Fr,rgb:()=>gi,select:()=>Ct,selectAll:()=>It,selectorAll:()=>T,zoom:()=>qh,zoomIdentity:()=>jh});var e={};t.r(e),t.d(e,{VERSION:()=>Jt,after:()=>Od,all:()=>Wd,allKeys:()=>Ae,any:()=>Vd,assign:()=>Ln,before:()=>$d,bind:()=>kd,bindAll:()=>Dd,chain:()=>Td,chunk:()=>_p,clone:()=>sd,collect:()=>be,compact:()=>sp,compose:()=>Rd,constant:()=>fe,contains:()=>ae,countBy:()=>op,create:()=>cd,debounce:()=>Zt,default:()=>xp,defaults:()=>ud,defer:()=>Pd,delay:()=>Gt,detect:()=>Cd,difference:()=>hp,drop:()=>_e,each:()=>Zn,escape:()=>Sn,every:()=>Wd,extend:()=>ad,extendOwn:()=>Ln,filter:()=>Bd,find:()=>Cd,findIndex:()=>Hn,findKey:()=>Yd,findLastIndex:()=>Bn,findWhere:()=>Fd,first:()=>Wn,flatten:()=>fp,foldl:()=>Ud,foldr:()=>Hd,forEach:()=>Zn,functions:()=>id,groupBy:()=>Jn,has:()=>Qn,head:()=>Wn,identity:()=>kn,include:()=>ae,includes:()=>ae,indexBy:()=>rp,indexOf:()=>ie,initial:()=>Xn,inject:()=>Ud,intersection:()=>ue,invert:()=>od,invoke:()=>Gd,isArguments:()=>Se,isArray:()=>Dn,isArrayBuffer:()=>td,isBoolean:()=>le,isDataView:()=>se,isDate:()=>Xh,isElement:()=>Bh,isEmpty:()=>ed,isEqual:()=>ge,isError:()=>Vh,isFinite:()=>nd,isFunction:()=>xn,isMap:()=>Zh,isMatch:()=>jn,isNaN:()=>re,isNull:()=>Uh,isNumber:()=>ee,isObject:()=>Kt,isRegExp:()=>Wh,isSet:()=>Jh,isString:()=>ye,isSymbol:()=>Gh,isTypedArray:()=>pe,isUndefined:()=>Hh,isWeakMap:()=>Kh,isWeakSet:()=>Qh,iteratee:()=>Cn,keys:()=>An,last:()=>we,lastIndexOf:()=>Id,map:()=>be,mapObject:()=>xe,matcher:()=>Rn,matches:()=>Rn,max:()=>Jd,memoize:()=>Me,methods:()=>id,min:()=>Qd,mixin:()=>bp,negate:()=>jd,noop:()=>hd,now:()=>Le,object:()=>yp,omit:()=>cp,once:()=>zd,pairs:()=>rd,partial:()=>Nd,partition:()=>ip,pick:()=>ke,pluck:()=>Zd,property:()=>zn,propertyOf:()=>dd,random:()=>De,range:()=>Pe,reduce:()=>Ud,reduceRight:()=>Hd,reject:()=>Xd,rest:()=>_e,restArguments:()=>Vt,result:()=>xd,sample:()=>tp,select:()=>Bd,shuffle:()=>np,size:()=>lp,some:()=>Vd,sortBy:()=>ep,sortedIndex:()=>ne,tail:()=>_e,take:()=>Wn,tap:()=>fd,template:()=>bd,templateSettings:()=>md,throttle:()=>je,times:()=>pd,toArray:()=>up,transpose:()=>mp,unescape:()=>vd,union:()=>vp,uniq:()=>pp,unique:()=>pp,uniqueId:()=>Ad,unzip:()=>mp,values:()=>te,where:()=>Kd,without:()=>dp,wrap:()=>Ld,zip:()=>gp});var r={};t.r(r),t.d(r,{atlantis:()=>Bp,conic_equidistant:()=>Xp,equirectangular:()=>Wp,orthographic:()=>Vp,patterson:()=>Gp,stereographic:()=>Zp,waterman:()=>Kp,winkel3:()=>Jp});const o=function(t){var n=this.constructor;return this.then((function(e){return n.resolve(t()).then((function(){return e}))}),(function(e){return n.resolve(t()).then((function(){return n.reject(e)}))}))},i=function(t){return new this((function(n,e){if(!t||void 0===t.length)return e(new TypeError(typeof t+" "+t+" is not iterable(cannot read property Symbol(Symbol.iterator))"));var r=Array.prototype.slice.call(t);if(0===r.length)return n([]);var o=r.length;function i(t,e){if(e&&("object"==typeof e||"function"==typeof e)){var a=e.then;if("function"==typeof a)return void a.call(e,(function(n){i(t,n)}),(function(e){r[t]={status:"rejected",reason:e},0==--o&&n(r)}))}r[t]={status:"fulfilled",value:e},0==--o&&n(r)}for(var a=0;a<r.length;a++)i(a,r[a])}))};function a(t,n){this.name="AggregateError",this.errors=t,this.message=n||""}a.prototype=Error.prototype;const u=function(t){var n=this;return new n((function(e,r){if(!t||void 0===t.length)return r(new TypeError("Promise.any accepts an array"));var o=Array.prototype.slice.call(t);if(0===o.length)return r();for(var i=[],u=0;u<o.length;u++)try{n.resolve(o[u]).then(e).catch((function(t){i.push(t),i.length===o.length&&r(new a(i,"All promises were rejected"))}))}catch(t){r(t)}}))};var l=setTimeout;function c(t){return Boolean(t&&void 0!==t.length)}function s(){}function f(t){if(!(this instanceof f))throw new TypeError("Promises must be constructed via new");if("function"!=typeof t)throw new TypeError("not a function");this._state=0,this._handled=!1,this._value=void 0,this._deferreds=[],g(t,this)}function h(t,n){for(;3===t._state;)t=t._value;0!==t._state?(t._handled=!0,f._immediateFn((function(){var e=1===t._state?n.onFulfilled:n.onRejected;if(null!==e){var r;try{r=e(t._value)}catch(t){return void p(n.promise,t)}d(n.promise,r)}else(1===t._state?d:p)(n.promise,t._value)}))):t._deferreds.push(n)}function d(t,n){try{if(n===t)throw new TypeError("A promise cannot be resolved with itself.");if(n&&("object"==typeof n||"function"==typeof n)){var e=n.then;if(n instanceof f)return t._state=3,t._value=n,void v(t);if("function"==typeof e)return void g((r=e,o=n,function(){r.apply(o,arguments)}),t)}t._state=1,t._value=n,v(t)}catch(n){p(t,n)}var r,o}function p(t,n){t._state=2,t._value=n,v(t)}function v(t){2===t._state&&0===t._deferreds.length&&f._immediateFn((function(){t._handled||f._unhandledRejectionFn(t._value)}));for(var n=0,e=t._deferreds.length;n<e;n++)h(t,t._deferreds[n]);t._deferreds=null}function m(t,n,e){this.onFulfilled="function"==typeof t?t:null,this.onRejected="function"==typeof n?n:null,this.promise=e}function g(t,n){var e=!1;try{t((function(t){e||(e=!0,d(n,t))}),(function(t){e||(e=!0,p(n,t))}))}catch(t){if(e)return;e=!0,p(n,t)}}f.prototype.catch=function(t){return this.then(null,t)},f.prototype.then=function(t,n){var e=new this.constructor(s);return h(this,new m(t,n,e)),e},f.prototype.finally=o,f.all=function(t){return new f((function(n,e){if(!c(t))return e(new TypeError("Promise.all accepts an array"));var r=Array.prototype.slice.call(t);if(0===r.length)return n([]);var o=r.length;function i(t,a){try{if(a&&("object"==typeof a||"function"==typeof a)){var u=a.then;if("function"==typeof u)return void u.call(a,(function(n){i(t,n)}),e)}r[t]=a,0==--o&&n(r)}catch(t){e(t)}}for(var a=0;a<r.length;a++)i(a,r[a])}))},f.any=u,f.allSettled=i,f.resolve=function(t){return t&&"object"==typeof t&&t.constructor===f?t:new f((function(n){n(t)}))},f.reject=function(t){return new f((function(n,e){e(t)}))},f.race=function(t){return new f((function(n,e){if(!c(t))return e(new TypeError("Promise.race accepts an array"));for(var r=0,o=t.length;r<o;r++)f.resolve(t[r]).then(n,e)}))},f._immediateFn="function"==typeof setImmediate&&function(t){setImmediate(t)}||function(t){l(t,0)},f._unhandledRejectionFn=function(t){"undefined"!=typeof console&&console&&console.warn("Possible Unhandled Promise Rejection:",t)};const y=f;var _=function(){if("undefined"!=typeof self)return self;if("undefined"!=typeof window)return window;if(void 0!==t.g)return t.g;throw new Error("unable to locate global object")}();function w(t){return new M(t)}function b(t){return function(){return new x(t.apply(this,arguments))}}function x(t){var n,e;function r(n,e){try{var i=t[n](e),a=i.value,u=a instanceof M;Promise.resolve(u?a.wrapped:a).then((function(t){u?r("return"===n?"return":"next",t):o(i.done?"return":"normal",t)}),(function(t){r("throw",t)}))}catch(t){o("throw",t)}}function o(t,o){switch(t){case"return":n.resolve({value:o,done:!0});break;case"throw":n.reject(o);break;default:n.resolve({value:o,done:!1})}(n=n.next)?r(n.key,n.arg):e=null}this._invoke=function(t,o){return new Promise((function(i,a){var u={key:t,arg:o,resolve:i,reject:a,next:null};e?e=e.next=u:(n=e=u,r(t,o))}))},"function"!=typeof t.return&&(this.return=void 0)}function M(t){this.wrapped=t}function A(){return[]}function T(t){return null==t?A:function(){return this.querySelectorAll(t)}}function E(t){return null==t?[]:Array.isArray(t)?t:Array.from(t)}function S(){}function N(t){return null==t?S:function(){return this.querySelector(t)}}function k(t){return function(){return this.matches(t)}}function D(t){return function(n){return n.matches(t)}}"function"!=typeof _.Promise?_.Promise=y:(_.Promise.prototype.finally||(_.Promise.prototype.finally=o),_.Promise.allSettled||(_.Promise.allSettled=i),_.Promise.any||(_.Promise.any=u)),x.prototype["function"==typeof Symbol&&Symbol.asyncIterator||"@@asyncIterator"]=function(){return this},x.prototype.next=function(t){return this._invoke("next",t)},x.prototype.throw=function(t){return this._invoke("throw",t)},x.prototype.return=function(t){return this._invoke("return",t)},void 0===ReadableStream.prototype[Symbol.asyncIterator]&&(ReadableStream.prototype[Symbol.asyncIterator]=b((function*(){const t=this.getReader();try{for(;;){const{done:n,value:e}=yield w(t.read());if(n)return;yield e}}finally{t.releaseLock()}}))),void 0===window.queueMicrotask&&(window.queueMicrotask=function(t){Promise.resolve().then(t)});var P=Array.prototype.find;function L(){return this.firstElementChild}var j=Array.prototype.filter;function R(){return Array.from(this.children)}function O(t){return new Array(t.length)}function $(t,n){this.ownerDocument=t.ownerDocument,this.namespaceURI=t.namespaceURI,this._next=null,this._parent=t,this.__data__=n}function z(t){return function(){return t}}function Y(t,n,e,r,o,i){for(var a,u=0,l=n.length,c=i.length;u<c;++u)(a=n[u])?(a.__data__=i[u],r[u]=a):e[u]=new $(t,i[u]);for(;u<l;++u)(a=n[u])&&(o[u]=a)}function I(t,n,e,r,o,i,a){var u,l,c,s=new Map,f=n.length,h=i.length,d=new Array(f);for(u=0;u<f;++u)(l=n[u])&&(d[u]=c=a.call(l,l.__data__,u,n)+"",s.has(c)?o[u]=l:s.set(c,l));for(u=0;u<h;++u)c=a.call(t,i[u],u,i)+"",(l=s.get(c))?(r[u]=l,l.__data__=i[u],s.delete(c)):e[u]=new $(t,i[u]);for(u=0;u<f;++u)(l=n[u])&&s.get(d[u])===l&&(o[u]=l)}function C(t){return t.__data__}function F(t){return"object"==typeof t&&"length"in t?t:Array.from(t)}function q(t,n){return t<n?-1:t>n?1:t>=n?0:NaN}$.prototype={constructor:$,appendChild:function(t){return this._parent.insertBefore(t,this._next)},insertBefore:function(t,n){return this._parent.insertBefore(t,n)},querySelector:function(t){return this._parent.querySelector(t)},querySelectorAll:function(t){return this._parent.querySelectorAll(t)}};var U="http://www.w3.org/1999/xhtml";const H={svg:"http://www.w3.org/2000/svg",xhtml:U,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function B(t){var n=t+="",e=n.indexOf(":");return e>=0&&"xmlns"!==(n=t.slice(0,e))&&(t=t.slice(e+1)),H.hasOwnProperty(n)?{space:H[n],local:t}:t}function X(t){return function(){this.removeAttribute(t)}}function W(t){return function(){this.removeAttributeNS(t.space,t.local)}}function V(t,n){return function(){this.setAttribute(t,n)}}function G(t,n){return function(){this.setAttributeNS(t.space,t.local,n)}}function Z(t,n){return function(){var e=n.apply(this,arguments);null==e?this.removeAttribute(t):this.setAttribute(t,e)}}function K(t,n){return function(){var e=n.apply(this,arguments);null==e?this.removeAttributeNS(t.space,t.local):this.setAttributeNS(t.space,t.local,e)}}function J(t){return t.ownerDocument&&t.ownerDocument.defaultView||t.document&&t||t.defaultView}function Q(t){return function(){this.style.removeProperty(t)}}function tt(t,n,e){return function(){this.style.setProperty(t,n,e)}}function nt(t,n,e){return function(){var r=n.apply(this,arguments);null==r?this.style.removeProperty(t):this.style.setProperty(t,r,e)}}function et(t,n){return t.style.getPropertyValue(n)||J(t).getComputedStyle(t,null).getPropertyValue(n)}function rt(t){return function(){delete this[t]}}function ot(t,n){return function(){this[t]=n}}function it(t,n){return function(){var e=n.apply(this,arguments);null==e?delete this[t]:this[t]=e}}function at(t){return t.trim().split(/^|\s+/)}function ut(t){return t.classList||new lt(t)}function lt(t){this._node=t,this._names=at(t.getAttribute("class")||"")}function ct(t,n){for(var e=ut(t),r=-1,o=n.length;++r<o;)e.add(n[r])}function st(t,n){for(var e=ut(t),r=-1,o=n.length;++r<o;)e.remove(n[r])}function ft(t){return function(){ct(this,t)}}function ht(t){return function(){st(this,t)}}function dt(t,n){return function(){(n.apply(this,arguments)?ct:st)(this,t)}}function pt(){this.textContent=""}function vt(t){return function(){this.textContent=t}}function mt(t){return function(){var n=t.apply(this,arguments);this.textContent=null==n?"":n}}function gt(){this.innerHTML=""}function yt(t){return function(){this.innerHTML=t}}function _t(t){return function(){var n=t.apply(this,arguments);this.innerHTML=null==n?"":n}}function wt(){this.nextSibling&&this.parentNode.appendChild(this)}function bt(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function xt(t){return function(){var n=this.ownerDocument,e=this.namespaceURI;return e===U&&n.documentElement.namespaceURI===U?n.createElement(t):n.createElementNS(e,t)}}function Mt(t){return function(){return this.ownerDocument.createElementNS(t.space,t.local)}}function At(t){var n=B(t);return(n.local?Mt:xt)(n)}function Tt(){return null}function Et(){var t=this.parentNode;t&&t.removeChild(this)}function St(){var t=this.cloneNode(!1),n=this.parentNode;return n?n.insertBefore(t,this.nextSibling):t}function Nt(){var t=this.cloneNode(!0),n=this.parentNode;return n?n.insertBefore(t,this.nextSibling):t}function kt(t){return t.trim().split(/^|\s+/).map((function(t){var n="",e=t.indexOf(".");return e>=0&&(n=t.slice(e+1),t=t.slice(0,e)),{type:t,name:n}}))}function Dt(t){return function(){var n=this.__on;if(n){for(var e,r=0,o=-1,i=n.length;r<i;++r)e=n[r],t.type&&e.type!==t.type||e.name!==t.name?n[++o]=e:this.removeEventListener(e.type,e.listener,e.options);++o?n.length=o:delete this.__on}}}function Pt(t,n,e){return function(){var r,o=this.__on,i=function(t){return function(n){t.call(this,n,this.__data__)}}(n);if(o)for(var a=0,u=o.length;a<u;++a)if((r=o[a]).type===t.type&&r.name===t.name)return this.removeEventListener(r.type,r.listener,r.options),this.addEventListener(r.type,r.listener=i,r.options=e),void(r.value=n);this.addEventListener(t.type,i,e),r={type:t.type,name:t.name,value:n,listener:i,options:e},o?o.push(r):this.__on=[r]}}function Lt(t,n,e){var r=J(t),o=r.CustomEvent;"function"==typeof o?o=new o(n,e):(o=r.document.createEvent("Event"),e?(o.initEvent(n,e.bubbles,e.cancelable),o.detail=e.detail):o.initEvent(n,!1,!1)),t.dispatchEvent(o)}function jt(t,n){return function(){return Lt(this,t,n)}}function Rt(t,n){return function(){return Lt(this,t,n.apply(this,arguments))}}lt.prototype={add:function(t){this._names.indexOf(t)<0&&(this._names.push(t),this._node.setAttribute("class",this._names.join(" ")))},remove:function(t){var n=this._names.indexOf(t);n>=0&&(this._names.splice(n,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(t){return this._names.indexOf(t)>=0}};var Ot=[null];function $t(t,n){this._groups=t,this._parents=n}function zt(){return new $t([[document.documentElement]],Ot)}$t.prototype=zt.prototype={constructor:$t,select:function(t){"function"!=typeof t&&(t=N(t));for(var n=this._groups,e=n.length,r=new Array(e),o=0;o<e;++o)for(var i,a,u=n[o],l=u.length,c=r[o]=new Array(l),s=0;s<l;++s)(i=u[s])&&(a=t.call(i,i.__data__,s,u))&&("__data__"in i&&(a.__data__=i.__data__),c[s]=a);return new $t(r,this._parents)},selectAll:function(t){t="function"==typeof t?function(t){return function(){return E(t.apply(this,arguments))}}(t):T(t);for(var n=this._groups,e=n.length,r=[],o=[],i=0;i<e;++i)for(var a,u=n[i],l=u.length,c=0;c<l;++c)(a=u[c])&&(r.push(t.call(a,a.__data__,c,u)),o.push(a));return new $t(r,o)},selectChild:function(t){return this.select(null==t?L:function(t){return function(){return P.call(this.children,t)}}("function"==typeof t?t:D(t)))},selectChildren:function(t){return this.selectAll(null==t?R:function(t){return function(){return j.call(this.children,t)}}("function"==typeof t?t:D(t)))},filter:function(t){"function"!=typeof t&&(t=k(t));for(var n=this._groups,e=n.length,r=new Array(e),o=0;o<e;++o)for(var i,a=n[o],u=a.length,l=r[o]=[],c=0;c<u;++c)(i=a[c])&&t.call(i,i.__data__,c,a)&&l.push(i);return new $t(r,this._parents)},data:function(t,n){if(!arguments.length)return Array.from(this,C);var e=n?I:Y,r=this._parents,o=this._groups;"function"!=typeof t&&(t=z(t));for(var i=o.length,a=new Array(i),u=new Array(i),l=new Array(i),c=0;c<i;++c){var s=r[c],f=o[c],h=f.length,d=F(t.call(s,s&&s.__data__,c,r)),p=d.length,v=u[c]=new Array(p),m=a[c]=new Array(p),g=l[c]=new Array(h);e(s,f,v,m,g,d,n);for(var y,_,w=0,b=0;w<p;++w)if(y=v[w]){for(w>=b&&(b=w+1);!(_=m[b])&&++b<p;);y._next=_||null}}return(a=new $t(a,r))._enter=u,a._exit=l,a},enter:function(){return new $t(this._enter||this._groups.map(O),this._parents)},exit:function(){return new $t(this._exit||this._groups.map(O),this._parents)},join:function(t,n,e){var r=this.enter(),o=this,i=this.exit();return"function"==typeof t?(r=t(r))&&(r=r.selection()):r=r.append(t+""),null!=n&&(o=n(o))&&(o=o.selection()),null==e?i.remove():e(i),r&&o?r.merge(o).order():o},merge:function(t){for(var n=t.selection?t.selection():t,e=this._groups,r=n._groups,o=e.length,i=r.length,a=Math.min(o,i),u=new Array(o),l=0;l<a;++l)for(var c,s=e[l],f=r[l],h=s.length,d=u[l]=new Array(h),p=0;p<h;++p)(c=s[p]||f[p])&&(d[p]=c);for(;l<o;++l)u[l]=e[l];return new $t(u,this._parents)},selection:function(){return this},order:function(){for(var t=this._groups,n=-1,e=t.length;++n<e;)for(var r,o=t[n],i=o.length-1,a=o[i];--i>=0;)(r=o[i])&&(a&&4^r.compareDocumentPosition(a)&&a.parentNode.insertBefore(r,a),a=r);return this},sort:function(t){function n(n,e){return n&&e?t(n.__data__,e.__data__):!n-!e}t||(t=q);for(var e=this._groups,r=e.length,o=new Array(r),i=0;i<r;++i){for(var a,u=e[i],l=u.length,c=o[i]=new Array(l),s=0;s<l;++s)(a=u[s])&&(c[s]=a);c.sort(n)}return new $t(o,this._parents).order()},call:function(){var t=arguments[0];return arguments[0]=this,t.apply(null,arguments),this},nodes:function(){return Array.from(this)},node:function(){for(var t=this._groups,n=0,e=t.length;n<e;++n)for(var r=t[n],o=0,i=r.length;o<i;++o){var a=r[o];if(a)return a}return null},size:function(){let t=0;for(const n of this)++t;return t},empty:function(){return!this.node()},each:function(t){for(var n=this._groups,e=0,r=n.length;e<r;++e)for(var o,i=n[e],a=0,u=i.length;a<u;++a)(o=i[a])&&t.call(o,o.__data__,a,i);return this},attr:function(t,n){var e=B(t);if(arguments.length<2){var r=this.node();return e.local?r.getAttributeNS(e.space,e.local):r.getAttribute(e)}return this.each((null==n?e.local?W:X:"function"==typeof n?e.local?K:Z:e.local?G:V)(e,n))},style:function(t,n,e){return arguments.length>1?this.each((null==n?Q:"function"==typeof n?nt:tt)(t,n,null==e?"":e)):et(this.node(),t)},property:function(t,n){return arguments.length>1?this.each((null==n?rt:"function"==typeof n?it:ot)(t,n)):this.node()[t]},classed:function(t,n){var e=at(t+"");if(arguments.length<2){for(var r=ut(this.node()),o=-1,i=e.length;++o<i;)if(!r.contains(e[o]))return!1;return!0}return this.each(("function"==typeof n?dt:n?ft:ht)(e,n))},text:function(t){return arguments.length?this.each(null==t?pt:("function"==typeof t?mt:vt)(t)):this.node().textContent},html:function(t){return arguments.length?this.each(null==t?gt:("function"==typeof t?_t:yt)(t)):this.node().innerHTML},raise:function(){return this.each(wt)},lower:function(){return this.each(bt)},append:function(t){var n="function"==typeof t?t:At(t);return this.select((function(){return this.appendChild(n.apply(this,arguments))}))},insert:function(t,n){var e="function"==typeof t?t:At(t),r=null==n?Tt:"function"==typeof n?n:N(n);return this.select((function(){return this.insertBefore(e.apply(this,arguments),r.apply(this,arguments)||null)}))},remove:function(){return this.each(Et)},clone:function(t){return this.select(t?Nt:St)},datum:function(t){return arguments.length?this.property("__data__",t):this.node().__data__},on:function(t,n,e){var r,o,i=kt(t+""),a=i.length;if(!(arguments.length<2)){for(u=n?Pt:Dt,r=0;r<a;++r)this.each(u(i[r],n,e));return this}var u=this.node().__on;if(u)for(var l,c=0,s=u.length;c<s;++c)for(r=0,l=u[c];r<a;++r)if((o=i[r]).type===l.type&&o.name===l.name)return l.value},dispatch:function(t,n){return this.each(("function"==typeof n?Rt:jt)(t,n))},[Symbol.iterator]:function*(){for(var t=this._groups,n=0,e=t.length;n<e;++n)for(var r,o=t[n],i=0,a=o.length;i<a;++i)(r=o[i])&&(yield r)}};const Yt=zt;function It(t){return"string"==typeof t?new $t([document.querySelectorAll(t)],[document.documentElement]):new $t([E(t)],Ot)}function Ct(t){return"string"==typeof t?new $t([[document.querySelector(t)]],[document.documentElement]):new $t([[t]],Ot)}function Ft(t){return!!t&&"true"!==t.getAttribute("aria-disabled")}function qt(t){for(let e=null!=t?t:null;null!==e;e=null!==(n=e.parentElement)&&void 0!==n?n:null){var n;if(e.hasAttribute("inert"))return!0}return!1}function Ut(t){return function(){return t(this,...arguments)}}function Ht(t){return function(){return t(Ct(this),...arguments)}}function Bt(t){return function(){if(Ft(this))return t.apply(this,arguments)}}function Xt(t){var n;return(null!==(n=t.getAttribute("aria-controls"))&&void 0!==n?n:"").split(/\s+/).filter((t=>""!==t)).map((t=>"#"+t)).sort().join(",")}function Wt(t){t.stopPropagation(),t.preventDefault()}function Vt(t,n){return n=null==n?t.length-1:+n,function(){for(var e=Math.max(arguments.length-n,0),r=Array(e),o=0;o<e;o++)r[o]=arguments[o+n];switch(n){case 0:return t.call(this,r);case 1:return t.call(this,arguments[0],r);case 2:return t.call(this,arguments[0],arguments[1],r)}var i=Array(n+1);for(o=0;o<n;o++)i[o]=arguments[o];return i[n]=r,t.apply(this,i)}}const Gt=Vt((function(t,n,e){return setTimeout((function(){return t.apply(null,e)}),n)}));function Zt(t,n,e){var r,o,i=function(n,e){r=null,e&&(o=t.apply(n,e))},a=Vt((function(a){if(r&&clearTimeout(r),e){var u=!r;r=setTimeout(i,n),u&&(o=t.apply(this,a))}else r=Gt(i,n,this,a);return o}));return a.cancel=function(){clearTimeout(r),r=null},a}function Kt(t){var n=typeof t;return"function"===n||"object"===n&&!!t}var Jt="1.11.0",Qt="object"==typeof self&&self.self===self&&self||"object"==typeof global&&global.global===global&&global||Function("return this")()||{},tn=Array.prototype,nn=Object.prototype,en="undefined"!=typeof Symbol?Symbol.prototype:null,rn=tn.push,on=tn.slice,an=nn.toString,un=nn.hasOwnProperty,ln="undefined"!=typeof ArrayBuffer,cn=Array.isArray,sn=Object.keys,fn=Object.create,hn=ln&&ArrayBuffer.isView,dn=isNaN,pn=isFinite,vn=!{toString:null}.propertyIsEnumerable("toString"),mn=["valueOf","isPrototypeOf","toString","propertyIsEnumerable","hasOwnProperty","toLocaleString"],gn=Math.pow(2,53)-1;function yn(t,n){return null!=t&&un.call(t,n)}function _n(t){return function(n){return an.call(n)==="[object "+t+"]"}}var wn=_n("Function"),bn=Qt.document&&Qt.document.childNodes;"object"!=typeof Int8Array&&"function"!=typeof bn&&(wn=function(t){return"function"==typeof t||!1});const xn=wn;function Mn(t,n){n=function(t){for(var n={},e=t.length,r=0;r<e;++r)n[t[r]]=!0;return{contains:function(t){return n[t]},push:function(e){return n[e]=!0,t.push(e)}}}(n);var e=mn.length,r=t.constructor,o=xn(r)&&r.prototype||nn,i="constructor";for(yn(t,i)&&!n.contains(i)&&n.push(i);e--;)(i=mn[e])in t&&t[i]!==o[i]&&!n.contains(i)&&n.push(i)}function An(t){if(!Kt(t))return[];if(sn)return sn(t);var n=[];for(var e in t)yn(t,e)&&n.push(e);return vn&&Mn(t,n),n}function Tn(t){var n=function(n){return t[n]},e="(?:"+An(t).join("|")+")",r=RegExp(e),o=RegExp(e,"g");return function(t){return t=null==t?"":""+t,r.test(t)?t.replace(o,n):t}}const En={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;"},Sn=Tn(En);function Nn(t){return t instanceof Nn?t:this instanceof Nn?void(this._wrapped=t):new Nn(t)}function kn(t){return t}Nn.VERSION=Jt,Nn.prototype.value=function(){return this._wrapped},Nn.prototype.valueOf=Nn.prototype.toJSON=Nn.prototype.value,Nn.prototype.toString=function(){return String(this._wrapped)};const Dn=cn||_n("Array");function Pn(t,n){return function(e){var r=arguments.length;if(n&&(e=Object(e)),r<2||null==e)return e;for(var o=1;o<r;o++)for(var i=arguments[o],a=t(i),u=a.length,l=0;l<u;l++){var c=a[l];n&&void 0!==e[c]||(e[c]=i[c])}return e}}const Ln=Pn(An);function jn(t,n){var e=An(n),r=e.length;if(null==t)return!r;for(var o=Object(t),i=0;i<r;i++){var a=e[i];if(n[a]!==o[a]||!(a in o))return!1}return!0}function Rn(t){return t=Ln({},t),function(n){return jn(n,t)}}function On(t){return function(n){return null==n?void 0:n[t]}}function $n(t,n){for(var e=n.length,r=0;r<e;r++){if(null==t)return;t=t[n[r]]}return e?t:void 0}function zn(t){return Dn(t)?function(n){return $n(n,t)}:On(t)}function Yn(t,n,e){if(void 0===n)return t;switch(null==e?3:e){case 1:return function(e){return t.call(n,e)};case 3:return function(e,r,o){return t.call(n,e,r,o)};case 4:return function(e,r,o,i){return t.call(n,e,r,o,i)}}return function(){return t.apply(n,arguments)}}function In(t,n,e){return null==t?kn:xn(t)?Yn(t,n,e):Kt(t)&&!Dn(t)?Rn(t):zn(t)}function Cn(t,n){return In(t,n,1/0)}function Fn(t,n,e){return Nn.iteratee!==Cn?Nn.iteratee(t,n):In(t,n,e)}Nn.iteratee=Cn;const qn=On("length");function Un(t){return function(n,e,r){e=Fn(e,r);for(var o=qn(n),i=t>0?0:o-1;i>=0&&i<o;i+=t)if(e(n[i],i,n))return i;return-1}}const Hn=Un(1),Bn=Un(-1);function Xn(t,n,e){return on.call(t,0,Math.max(0,t.length-(null==n||e?1:n)))}function Wn(t,n,e){return null==t||t.length<1?null==n||e?void 0:[]:null==n||e?t[0]:Xn(t,t.length-n)}function Vn(t){return function(n){var e=t(n);return"number"==typeof e&&e>=0&&e<=gn}}const Gn=Vn(qn);function Zn(t,n,e){var r,o;if(n=Yn(n,e),Gn(t))for(r=0,o=t.length;r<o;r++)n(t[r],r,t);else{var i=An(t);for(r=0,o=i.length;r<o;r++)n(t[i[r]],i[r],t)}return t}function Kn(t,n){return function(e,r,o){var i=n?[[],[]]:{};return r=Fn(r,o),Zn(e,(function(n,o){var a=r(n,o,e);t(i,n,a)})),i}}const Jn=Kn((function(t,n,e){yn(t,e)?t[e].push(n):t[e]=[n]}));function Qn(t,n){if(!Dn(n))return yn(t,n);for(var e=n.length,r=0;r<e;r++){var o=n[r];if(null==t||!un.call(t,o))return!1;t=t[o]}return!!e}function te(t){for(var n=An(t),e=n.length,r=Array(e),o=0;o<e;o++)r[o]=t[n[o]];return r}function ne(t,n,e,r){for(var o=(e=Fn(e,r,1))(n),i=0,a=qn(t);i<a;){var u=Math.floor((i+a)/2);e(t[u])<o?i=u+1:a=u}return i}const ee=_n("Number");function re(t){return ee(t)&&dn(t)}function oe(t,n,e){return function(r,o,i){var a=0,u=qn(r);if("number"==typeof i)t>0?a=i>=0?i:Math.max(i+u,a):u=i>=0?Math.min(i+1,u):i+u+1;else if(e&&i&&u)return r[i=e(r,o)]===o?i:-1;if(o!=o)return(i=n(on.call(r,a,u),re))>=0?i+a:-1;for(i=t>0?a:u-1;i>=0&&i<u;i+=t)if(r[i]===o)return i;return-1}}const ie=oe(1,Hn,ne);function ae(t,n,e,r){return Gn(t)||(t=te(t)),("number"!=typeof e||r)&&(e=0),ie(t,n,e)>=0}function ue(t){for(var n=[],e=arguments.length,r=0,o=qn(t);r<o;r++){var i=t[r];if(!ae(n,i)){var a;for(a=1;a<e&&ae(arguments[a],i);a++);a===e&&n.push(i)}}return n}function le(t){return!0===t||!1===t||"[object Boolean]"===an.call(t)}const ce=On("byteLength"),se=_n("DataView");function fe(t){return function(){return t}}const he=Vn(ce);var de=/\[object ((I|Ui)nt(8|16|32)|Float(32|64)|Uint8Clamped|Big(I|Ui)nt64)Array\]/;const pe=ln?function(t){return hn?hn(t)&&!se(t):he(t)&&de.test(an.call(t))}:fe(!1);function ve(t,n,e,r){if(t===n)return 0!==t||1/t==1/n;if(null==t||null==n)return!1;if(t!=t)return n!=n;var o=typeof t;return("function"===o||"object"===o||"object"==typeof n)&&me(t,n,e,r)}function me(t,n,e,r){t instanceof Nn&&(t=t._wrapped),n instanceof Nn&&(n=n._wrapped);var o=an.call(t);if(o!==an.call(n))return!1;switch(o){case"[object RegExp]":case"[object String]":return""+t==""+n;case"[object Number]":return+t!=+t?+n!=+n:0==+t?1/+t==1/n:+t==+n;case"[object Date]":case"[object Boolean]":return+t==+n;case"[object Symbol]":return en.valueOf.call(t)===en.valueOf.call(n);case"[object ArrayBuffer]":return me(new DataView(t),new DataView(n),e,r);case"[object DataView]":var i=ce(t);if(i!==ce(n))return!1;for(;i--;)if(t.getUint8(i)!==n.getUint8(i))return!1;return!0}if(pe(t))return me(new DataView(t.buffer),new DataView(n.buffer),e,r);var a="[object Array]"===o;if(!a){if("object"!=typeof t||"object"!=typeof n)return!1;var u=t.constructor,l=n.constructor;if(u!==l&&!(xn(u)&&u instanceof u&&xn(l)&&l instanceof l)&&"constructor"in t&&"constructor"in n)return!1}r=r||[];for(var c=(e=e||[]).length;c--;)if(e[c]===t)return r[c]===n;if(e.push(t),r.push(n),a){if((c=t.length)!==n.length)return!1;for(;c--;)if(!ve(t[c],n[c],e,r))return!1}else{var s,f=An(t);if(c=f.length,An(n).length!==c)return!1;for(;c--;)if(!yn(n,s=f[c])||!ve(t[s],n[s],e,r))return!1}return e.pop(),r.pop(),!0}function ge(t,n){return ve(t,n)}const ye=_n("String");function _e(t,n,e){return on.call(t,null==n||e?1:n)}function we(t,n,e){return null==t||t.length<1?null==n||e?void 0:[]:null==n||e?t[t.length-1]:_e(t,Math.max(0,t.length-n))}function be(t,n,e){n=Fn(n,e);for(var r=!Gn(t)&&An(t),o=(r||t).length,i=Array(o),a=0;a<o;a++){var u=r?r[a]:a;i[a]=n(t[u],u,t)}return i}function xe(t,n,e){n=Fn(n,e);for(var r=An(t),o=r.length,i={},a=0;a<o;a++){var u=r[a];i[u]=n(t[u],u,t)}return i}function Me(t,n){var e=function(r){var o=e.cache,i=""+(n?n.apply(this,arguments):r);return yn(o,i)||(o[i]=t.apply(this,arguments)),o[i]};return e.cache={},e}function Ae(t){if(!Kt(t))return[];var n=[];for(var e in t)n.push(e);return vn&&Mn(t,n),n}function Te(t,n,e){return n in e}var Ee=_n("Arguments");!function(){Ee(arguments)||(Ee=function(t){return yn(t,"callee")})}();const Se=Ee;function Ne(t,n,e,r){if(r=r||[],n||0===n){if(n<=0)return r.concat(t)}else n=1/0;for(var o=r.length,i=0,a=qn(t);i<a;i++){var u=t[i];if(Gn(u)&&(Dn(u)||Se(u)))if(n>1)Ne(u,n-1,e,r),o=r.length;else for(var l=0,c=u.length;l<c;)r[o++]=u[l++];else e||(r[o++]=u)}return r}const ke=Vt((function(t,n){var e={},r=n[0];if(null==t)return e;xn(r)?(n.length>1&&(r=Yn(r,n[1])),n=Ae(t)):(r=Te,n=Ne(n,!1,!1),t=Object(t));for(var o=0,i=n.length;o<i;o++){var a=n[o],u=t[a];r(u,a,t)&&(e[a]=u)}return e}));function De(t,n){return null==n&&(n=t,t=0),t+Math.floor(Math.random()*(n-t+1))}function Pe(t,n,e){null==n&&(n=t||0,t=0),e||(e=n<t?-1:1);for(var r=Math.max(Math.ceil((n-t)/e),0),o=Array(r),i=0;i<r;i++,t+=e)o[i]=t;return o}const Le=Date.now||function(){return(new Date).getTime()};function je(t,n,e){var r,o,i,a,u=0;e||(e={});var l=function(){u=!1===e.leading?0:Le(),r=null,a=t.apply(o,i),r||(o=i=null)},c=function(){var c=Le();u||!1!==e.leading||(u=c);var s=n-(c-u);return o=this,i=arguments,s<=0||s>n?(r&&(clearTimeout(r),r=null),u=c,a=t.apply(o,i),r||(o=i=null)):r||!1===e.trailing||(r=setTimeout(l,s)),a};return c.cancel=function(){clearTimeout(r),u=0,r=o=i=null},c}const Re=Math.PI,Oe=2*Re,$e=360/Oe,ze=Oe/360;function Ye(t){if(Array.isArray(t))return!0;if("object"!=typeof t||!t)return!1;const n=t.length;return"number"==typeof n&&n>=0}function Ie(t,n){for(let e=0;e<t.length;e++){const r=t[e],o=n[e];if(r!==o&&!(r!=r&&o!=o||Ye(r)&&Ie(r,o)))return!1}return t.length===n.length}function Ce(t,n){const e=new Float32Array(2*t.length);for(let r=0;r<t.length;r++){const o=2*r;e[o]=t[r],e[o+1]=n[r]}return e}function Fe(t,n){for(let e=0;e<t.length;e++){const r=t[e];Ye(r)?Fe(r,n):n.push(r)}return n}function qe(t){return Ye(t)?Fe(t,[]):void 0}function Ue(t){return[...new Set(t)]}function He(t,n){const e=t-n*Math.floor(t/n);return e===n?0:e}function Be(t){const n=4503599627370496;let e=Math.abs(t);return e<n&&(e+=n,e-=n),Math.sign(t)*e}function Xe(t,n,e){return Math.max(n,Math.min(t,e))}function We(t,n,e,r,o){return(t-n)/(e-n)*(o-r)+r}function Ve(t){const[n,e]=t;return Math.sqrt(n*n+e*e)}function Ge(t,n){return Ve([n[0]-t[0],n[1]-t[1]])}function Ze(t){return"string"==typeof t&&t.indexOf("/")>=0&&(t=t.split("/")),Ye(t)&&2===t.length?t[0]/t[1]:+t}function Ke(t,n){return[t[0]*n,t[1]*n]}const Je=T("a[href], button, [tabindex]");function Qe(t){if(null===(null!=t?t:null))return!1;for(let e=t;null!==e;e=null!==(n=e.parentElement)&&void 0!==n?n:null){var n;if(e.hidden||e.hasAttribute("inert")||e.classList.contains("cloaked"))return!1}return!0}function tr(t){return t[Hn(t,Qe)]}function nr(t,n,e){const r=t.length;n=He(n,r);for(let o=He(n+e,r);o!==n;o=He(o+e,r))if(Qe(t[o]))return t[o]}function er(t){return t[Bn(t,Qe)]}const rr="inert"in HTMLElement.prototype,or=T("[data-inert-tabindex]");function ir(t){t.each((function(){this.hasAttribute("data-inert-tabindex")||(this.setAttribute("data-inert-tabindex",this.hasAttribute("tabindex")?this.getAttribute("tabindex"):""),this.removeAttribute("tabindex"),this.tabIndex>=0&&(this.tabIndex=-1,this.focus=()=>{}))}))}function ar(t){t.each((function(){if(!qt(this)&&this.hasAttribute("data-inert-tabindex")){var t;const n=null!==(t=this.getAttribute("data-inert-tabindex"))&&void 0!==t?t:"";this.removeAttribute("data-inert-tabindex"),""===n?this.removeAttribute("tabindex"):this.tabIndex=n,delete this.focus}}))}function ur(t){return rr||!qt(t)?"tabindex":"data-inert-tabindex"}function lr(t,n){t.each((function(){const t=n.apply(this,arguments);this.setAttribute(ur(this),t)}))}function cr(t){t.attr("aria-hidden",!0).call(ir).selectAll(Je).call(ir)}function sr(t){t.attr("aria-hidden",null).call(ar).selectAll(or).call(ar)}!function(){if(rr)return;const t=new MutationObserver((t=>{const n=t.map((t=>t.target));It(n.filter((t=>t.hasAttribute("inert")))).call(cr),It(n.filter((t=>!t.hasAttribute("inert")))).call(sr)})),n=Ct(":root");t.observe(n.node(),{attributes:!0,attributeFilter:["inert"],subtree:!0}),n.selectAll("[inert]").call(cr)}();const fr=function(){const t="F5v6#VQR5%";try{return localStorage.setItem(t,t),localStorage.removeItem(t),!0}catch(t){return!1}}(),hr=(dr=fr?localStorage:{getItem:()=>null,setItem:()=>!1,removeItem:()=>!1},new class{get(t){return dr.getItem(t)}put(t,n){try{return void 0===(null===n?dr.removeItem(t):dr.setItem(t,n))}catch(t){return!1}}});var dr;let pr=0;function vr(t){let n=t[0];for(let e=0;e<(arguments.length<=1?0:arguments.length-1);e++)n+=(e+1<1||arguments.length<=e+1?void 0:arguments[e+1])+t[e+1];return n.replace(/(\S+)/g,((t,n)=>`${n}.$${pr++}`))}var mr={value:()=>{}};function gr(){for(var t,n=0,e=arguments.length,r={};n<e;++n){if(!(t=arguments[n]+"")||t in r||/[\s.]/.test(t))throw new Error("illegal type: "+t);r[t]=[]}return new yr(r)}function yr(t){this._=t}function _r(t,n){return t.trim().split(/^|\s+/).map((function(t){var e="",r=t.indexOf(".");if(r>=0&&(e=t.slice(r+1),t=t.slice(0,r)),t&&!n.hasOwnProperty(t))throw new Error("unknown type: "+t);return{type:t,name:e}}))}function wr(t,n){for(var e,r=0,o=t.length;r<o;++r)if((e=t[r]).name===n)return e.value}function br(t,n,e){for(var r=0,o=t.length;r<o;++r)if(t[r].name===n){t[r]=mr,t=t.slice(0,r).concat(t.slice(r+1));break}return null!=e&&t.push({name:n,value:e}),t}yr.prototype=gr.prototype={constructor:yr,on:function(t,n){var e,r=this._,o=_r(t+"",r),i=-1,a=o.length;if(!(arguments.length<2)){if(null!=n&&"function"!=typeof n)throw new Error("invalid callback: "+n);for(;++i<a;)if(e=(t=o[i]).type)r[e]=br(r[e],t.name,n);else if(null==n)for(e in r)r[e]=br(r[e],t.name,null);return this}for(;++i<a;)if((e=(t=o[i]).type)&&(e=wr(r[e],t.name)))return e},copy:function(){var t={},n=this._;for(var e in n)t[e]=n[e].slice();return new yr(t)},call:function(t,n){if((e=arguments.length-2)>0)for(var e,r,o=new Array(e),i=0;i<e;++i)o[i]=arguments[i+2];if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(i=0,e=(r=this._[t]).length;i<e;++i)r[i].value.apply(n,o)},apply:function(t,n,e){if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(var r=this._[t],o=0,i=r.length;o<i;++o)r[o].value.apply(n,e)}};const xr=gr;function Mr(t){return Object.assign(Object.create(null),...arguments)}function Ar(t,n,e){const r={};for(const[o,i]of Object.entries(t)){const t=o.substring(0,n),a=ye(i)?i.substring(0,e):i;if(t in r)throw new Error(`key collision: ${t}`);r[t]=a}return r}function Tr(t){return Array.isArray(t)&&t.every(ee)}const Er={boolean:le,number:ee,string:ye};function Sr(t,n,e){if(!xn(t))throw new Error;return function(r,o){if(!ge(o,e)&&!t(o,r))throw new Error(`expected ${n} for '${r}'`)}}function Nr(t){let[n,e]=t;return ye(n)?Sr(Er[n],n,e):Sr(n,"valid value",e)}function kr(t){function n(){return xe(t,(t=>t[1]))}const e=Object.keys(t),r=xr.apply(void 0,["change"].concat(e.map((t=>`change:${t}`)))),o=Mr(xe(n(),(()=>{}))),i=function(t){const n=xe(t,Nr);return function(t){for(const[r,o]of Object.entries(t)){var e;null===(e=n[r])||void 0===e||e.call(n,r,o)}return t}}(t);function a(t){return t.trim().split(/^|\s+/)}return new class{get fields(){return e}initialState(){return n()}validate(t){return i(t)}reset(){this.save(n())}on(t,n){const e=a(t).join(" ");return arguments.length<2?r.on(e):(r.on(e,n),this)}get(t){return o[t]}getAll(){return Mr(o)}save(t,n){const e=Mr(),i=Mr();Object.keys(t).forEach((n=>{if(!(n in o))throw new Error(`unknown key: ${n}`);const r=t[n],a=o[n];ge(r,a)||(e[n]=r,i[n]=a)}));const a=Object.keys(e);return a.length>0&&(a.forEach((t=>o[t]=e[t])),a.forEach((t=>r.call(`change:${t}`,null,e[t],i[t],n))),r.call("change",null,e,i,n),!0)}set(t,n,e){return this.save({[t]:n},e)}getAndSet(t,n,e){return this.set(t,n(this.get(t)),e)}toggle(t,n){this.getAndSet(t,(t=>!0!==t),n)}handle(t){const n=this;return new class{on(n,e){const o=`${(n=a(n)[0]).substr(0,6)}:${t}${n.substr(6)}`;return arguments.length<2?r.on(o):(r.on(o,e),this)}get(){return n.get(t)}set(e,r){return n.set(t,e,r)}getAndSet(e,r){return n.getAndSet(t,e,r)}toggle(e){n.toggle(t,e)}}}}}var Dr="$";function Pr(){}function Lr(t,n){var e=new Pr;if(t instanceof Pr)t.each((function(t,n){e.set(n,t)}));else if(Array.isArray(t)){var r,o=-1,i=t.length;if(null==n)for(;++o<i;)e.set(o,t[o]);else for(;++o<i;)e.set(n(r=t[o],o,t),r)}else if(t)for(var a in t)e.set(a,t[a]);return e}Pr.prototype=Lr.prototype={constructor:Pr,has:function(t){return Dr+t in this},get:function(t){return this[Dr+t]},set:function(t,n){return this[Dr+t]=n,this},remove:function(t){var n=Dr+t;return n in this&&delete this[n]},clear:function(){for(var t in this)t[0]===Dr&&delete this[t]},keys:function(){var t=[];for(var n in this)n[0]===Dr&&t.push(n.slice(1));return t},values:function(){var t=[];for(var n in this)n[0]===Dr&&t.push(this[n]);return t},entries:function(){var t=[];for(var n in this)n[0]===Dr&&t.push({key:n.slice(1),value:this[n]});return t},size:function(){var t=0;for(var n in this)n[0]===Dr&&++t;return t},empty:function(){for(var t in this)if(t[0]===Dr)return!1;return!0},each:function(t){for(var n in this)n[0]===Dr&&t(this[n],n.slice(1),this)}};const jr=Lr;var Rr={value:function(){}};function Or(){for(var t,n=0,e=arguments.length,r={};n<e;++n){if(!(t=arguments[n]+"")||t in r||/[\s.]/.test(t))throw new Error("illegal type: "+t);r[t]=[]}return new $r(r)}function $r(t){this._=t}function zr(t,n){return t.trim().split(/^|\s+/).map((function(t){var e="",r=t.indexOf(".");if(r>=0&&(e=t.slice(r+1),t=t.slice(0,r)),t&&!n.hasOwnProperty(t))throw new Error("unknown type: "+t);return{type:t,name:e}}))}function Yr(t,n){for(var e,r=0,o=t.length;r<o;++r)if((e=t[r]).name===n)return e.value}function Ir(t,n,e){for(var r=0,o=t.length;r<o;++r)if(t[r].name===n){t[r]=Rr,t=t.slice(0,r).concat(t.slice(r+1));break}return null!=e&&t.push({name:n,value:e}),t}$r.prototype=Or.prototype={constructor:$r,on:function(t,n){var e,r=this._,o=zr(t+"",r),i=-1,a=o.length;if(!(arguments.length<2)){if(null!=n&&"function"!=typeof n)throw new Error("invalid callback: "+n);for(;++i<a;)if(e=(t=o[i]).type)r[e]=Ir(r[e],t.name,n);else if(null==n)for(e in r)r[e]=Ir(r[e],t.name,null);return this}for(;++i<a;)if((e=(t=o[i]).type)&&(e=Yr(r[e],t.name)))return e},copy:function(){var t={},n=this._;for(var e in n)t[e]=n[e].slice();return new $r(t)},call:function(t,n){if((e=arguments.length-2)>0)for(var e,r,o=new Array(e),i=0;i<e;++i)o[i]=arguments[i+2];if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(i=0,e=(r=this._[t]).length;i<e;++i)r[i].value.apply(n,o)},apply:function(t,n,e){if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(var r=this._[t],o=0,i=r.length;o<i;++o)r[o].value.apply(n,e)}};const Cr=Or;function Fr(t,n){var e,r,o,i,a=Cr("beforesend","progress","load","error"),u=jr(),l=new XMLHttpRequest,c=null,s=null,f=0;function h(t){var n,r=l.status;if(!r&&function(t){var n=t.responseType;return n&&"text"!==n?t.response:t.responseText}(l)||r>=200&&r<300||304===r){if(o)try{n=o.call(e,l)}catch(t){return void a.call("error",e,t)}else n=l;a.call("load",e,n)}else a.call("error",e,t)}if("undefined"!=typeof XDomainRequest&&!("withCredentials"in l)&&/^(http(s)?:)?\/\//.test(t)&&(l=new XDomainRequest),"onload"in l?l.onload=l.onerror=l.ontimeout=h:l.onreadystatechange=function(t){l.readyState>3&&h(t)},l.onprogress=function(t){a.call("progress",e,t)},e={header:function(t,n){return t=(t+"").toLowerCase(),arguments.length<2?u.get(t):(null==n?u.remove(t):u.set(t,n+""),e)},mimeType:function(t){return arguments.length?(r=null==t?null:t+"",e):r},responseType:function(t){return arguments.length?(i=t,e):i},timeout:function(t){return arguments.length?(f=+t,e):f},user:function(t){return arguments.length<1?c:(c=null==t?null:t+"",e)},password:function(t){return arguments.length<1?s:(s=null==t?null:t+"",e)},response:function(t){return o=t,e},get:function(t,n){return e.send("GET",t,n)},post:function(t,n){return e.send("POST",t,n)},send:function(n,o,h){return l.open(n,t,!0,c,s),null==r||u.has("accept")||u.set("accept",r+",*/*"),l.setRequestHeader&&u.each((function(t,n){l.setRequestHeader(n,t)})),null!=r&&l.overrideMimeType&&l.overrideMimeType(r),null!=i&&(l.responseType=i),f>0&&(l.timeout=f),null==h&&"function"==typeof o&&(h=o,o=null),null!=h&&1===h.length&&(h=function(t){return function(n,e){t(null==n?e:null)}}(h)),null!=h&&e.on("error",h).on("load",(function(t){h(null,t)})),a.call("beforesend",e,l),l.send(null==o?null:o),e},abort:function(){return l.abort(),e},on:function(){var t=a.on.apply(a,arguments);return t===a?e:t}},null!=n){if("function"!=typeof n)throw new Error("invalid callback: "+n);return e.get(n)}return e}function qr(t,n){let e=0,r=0;for(;e<n.length;){let o=n[e++];if(o<128)o=o<<25>>25;else switch(o>>4){case 8:case 9:case 10:case 11:o=o<<26>>18|n[e++];break;case 12:case 13:o=o<<27>>11|n[e++]<<8|n[e++];break;case 14:o=o<<28>>4|n[e++]<<16|n[e++]<<8|n[e++];break;case 15:if(255===o){for(let o=1+n[e++];o>0;o--)t[r++]=NaN;continue}switch(7&o){case 0:case 1:case 2:case 3:case 4:case 5:case 6:case 7:o=n[e++]<<24|n[e++]<<16|n[e++]<<8|n[e++];break;default:throw new Error("NYI")}}t[r++]=o}return t}function Ur(t,n){for(let e=0;e<t.length;e++)t[e]/=n;return t}function Hr(t,n,e,r,o){const i=new Float32Array(n*e*r);return qr(i,t),function(t,n,e,r){let o,i,a,u,l,c,s;for(a=0;a<r;a++){for(c=a*n*e,o=1;o<n;o++)u=c+o,s=t[u-1],t[u]+=s==s?s:0;for(i=1;i<e;i++)for(l=c+i*n,s=t[l-n],t[l]+=s==s?s:0,o=1;o<n;o++){u=l+o;const e=t[u-1],r=t[u-n],i=t[u-n-1];s=e+r-i,t[u]+=s==s?s:e==e?e:r==r?r:i==i?i:0}}}(i,n,e,r),Ur(i,o),i}function Br(t,n,e,r){const o=new DataView(n,e,r),i=new Uint8Array(n,e+16,r-16),a=o.getInt32(0),u=o.getInt32(4),l=o.getInt32(8),c=Math.pow(10,o.getFloat32(12));return{metadata:{type:t,cols:a,rows:u,grids:l,scaleFactor:c},values:Hr(i,a,u,l,c)}}function Xr(t,n,e,r){const o=function(t,n){switch(t){case 8:return new Float32Array(n);case 9:return new Float64Array(n);default:throw new Error(`unknown array type: ${t}`)}}(n,e);return qr(o,t),function(t,n){for(let e=0,r=0;r<t.length;r++)n[r]=e+=t[r]}(o,o),Ur(o,r),o}function Wr(t,n,e){const r=new DataView(t,n,e),o=new Uint8Array(t,n+13,e-13),i=r.getUint8(0),a=r.getInt32(1),u=r.getFloat64(5);return{metadata:{type:"qpak",scaleFactor:u},values:Xr(o,i,a,u)}}var Vr,Gr;const Zr=JSON.parse(null!==(Vr=null===(Gr=document.querySelector("#translations"))||void 0===Gr?void 0:Gr.textContent)&&void 0!==Vr?Vr:"{}");function Kr(t){var n;if(t.length>1)throw new Error("NYI");const e=t[0];return null!==(n=Zr[e])&&void 0!==n?n:e}function Jr(t){return setTimeout(t,1)}function Qr(t){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,e=0;return function(){if(0===e){const r=[...arguments];e=setTimeout((()=>{e=0,t.apply(this,r)}),n)}}}function to(t){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const e=t.substring(0,40),r=Ar(n,40,100);xn(window.gtag)&&(window.gtag("event",e,r),no())}const no=Qr((()=>{const{dataLayer:t}=window;t.length>=1e3&&t.splice(0,t.length/2)}),5e3);function eo(t){try{const{host:n,pathname:e}=new URL(t,window.location.href);to("fetch",{fetch_host:n,fetch_pathname:e})}catch(t){to("exception",{category:"fetch",description:t})}}function ro(t,n,e,r,o){if(null===(null!=r?r:null))return n(o);let i=r;if(r instanceof ProgressEvent){const t=r.target,{status:n}=t;i=Kr`Data download failed`,navigator.onLine?404===n?i=Kr`Data not available for this date`:n>0&&(i=`Error: HTTP ${n}: ${t.statusText}`):i=Kr`Network not available`}return e({resource:t,error:i})}function oo(t){return eo(t),new Promise(((n,e)=>{Fr(t).mimeType("application/json").response((t=>JSON.parse(t.responseText))).get(((r,o)=>ro(t,n,e,r,o)))}))}const io=Me(oo);function ao(t){return eo(t),new Promise(((n,e)=>{Fr(t).responseType("arraybuffer").response((t=>{var n;if((null===(n=t.response)||void 0===n?void 0:n.byteLength)>0)return function(t,n){let e=0;const r=new DataView(t),o=new TextDecoder("utf-8"),i=o.decode(new Uint8Array(t,e,4));if(e+=4,"head"!==i)throw new Error("expected 'head' but found '"+i+"'");let a=r.getInt32(e);e+=4;const u=JSON.parse(o.decode(new Uint8Array(t,e,a)));let l;e+=a;const c=[],s=[];let f;for(;"tail"!==(f=o.decode(new Uint8Array(t,e,4)));){switch(e+=4,a=r.getInt32(e),e+=4,f){case"ppak":l=Br(f,t,e,a);break;case"qpak":l=Wr(t,e,a);break;default:throw new Error("unknown block type: "+f)}c.push(l.values),s.push(l.metadata),e+=a}return{header:u,blocks:c,metadata:s}}(t.response);throw new Error(Kr`Data is empty`)})).get(((r,o)=>ro(t,n,e,r,o)))}))}function uo(t){return/\.epak([/?#]|$)/.test(t)?ao(t):oo(t)}function lo(t){return t}function co(t,n){return"string"==typeof n&&(n=t.objects[n]),"GeometryCollection"===n.type?{type:"FeatureCollection",features:n.geometries.map((function(n){return so(t,n)}))}:so(t,n)}function so(t,n){var e=n.id,r=n.bbox,o=null==n.properties?{}:n.properties,i=function(t,n){var e=function(t){if(null==t)return lo;var n,e,r=t.scale[0],o=t.scale[1],i=t.translate[0],a=t.translate[1];return function(t,u){u||(n=e=0);var l=2,c=t.length,s=new Array(c);for(s[0]=(n+=t[0])*r+i,s[1]=(e+=t[1])*o+a;l<c;)s[l]=t[l],++l;return s}}(t.transform),r=t.arcs;function o(t,n){n.length&&n.pop();for(var o=r[t<0?~t:t],i=0,a=o.length;i<a;++i)n.push(e(o[i],i));t<0&&function(t,n){for(var e,r=t.length,o=r-n;o<--r;)e=t[o],t[o++]=t[r],t[r]=e}(n,a)}function i(t){return e(t)}function a(t){for(var n=[],e=0,r=t.length;e<r;++e)o(t[e],n);return n.length<2&&n.push(n[0]),n}function u(t){for(var n=a(t);n.length<4;)n.push(n[0]);return n}function l(t){return t.map(u)}return function t(n){var e,r=n.type;switch(r){case"GeometryCollection":return{type:r,geometries:n.geometries.map(t)};case"Point":e=i(n.coordinates);break;case"MultiPoint":e=n.coordinates.map(i);break;case"LineString":e=a(n.arcs);break;case"MultiLineString":e=n.arcs.map(a);break;case"Polygon":e=l(n.arcs);break;case"MultiPolygon":e=n.arcs.map(l);break;default:return null}return{type:r,coordinates:e}}(n)}(t,n);return null==e&&null==r?{type:"Feature",properties:o,geometry:i}:null==r?{type:"Feature",id:e,properties:o,geometry:i}:{type:"Feature",id:e,bbox:r,properties:o,geometry:i}}function fo(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;const e=document.createElement("canvas");return e.width=t,e.height=n,e}function ho(t){const{width:n,height:e}=t.canvas;t.save(),t.setTransform(1,0,0,1,0,0),t.clearRect(0,0,n,e),t.restore()}function po(t){ho(t.getContext("2d"))}function vo(t,n){const e=xn(t)?t:()=>t;return{renderTo(t,r){var o,i;t.beginPath(),r(e()),n.fillStyle&&(t.fillStyle=n.fillStyle,t.fill()),n.strokeStyle&&(t.strokeStyle=n.strokeStyle,t.lineWidth=null!==(o=n.lineWidth)&&void 0!==o?o:1,t.setLineDash(null!==(i=n.lineDash)&&void 0!==i?i:[]),t.stroke())}}}function mo(){const t=[];return{add(n){t.push(n)},clear(){t.length=0},renderTo(n,e){t.forEach((t=>t.renderTo(n,e)))}}}function go(t){return{renderTo(n,e){ho(n),e.context(n),n.lineJoin="bevel",t.forEach((t=>t.renderTo(n,e)))}}}const yo=1.25,_o={strokeStyle:"rgba(250,250,250,0.65)",lineWidth:yo},wo={strokeStyle:"rgba(250,250,250,0.65)",lineWidth:yo},bo={strokeStyle:"rgba(220,220,220,0.30)",lineWidth:yo},xo={strokeStyle:"rgba(250,250,250,0.45)",lineWidth:yo},Mo={strokeStyle:"rgba(250,250,250,0.30)",lineWidth:yo,lineDash:[5,5]},Ao={strokeStyle:"rgba(250,250,250,0.45)",lineWidth:1,lineDash:[2,2]},To={admin_1:{admin_1_110m:{file:"/map/v2/admin_1_110m-topo.json",style:Ao,scene:"lo"},admin_1_50m:{file:"/map/v2/admin_1_50m-topo.json",style:Ao,scene:"hi"}},disputed_areas:{disputed_50m:{file:"/map/v2/disputed_50m-topo.json",style:{strokeStyle:"rgba(250,250,250,0.45)",lineWidth:yo,lineDash:[3,3]},scene:"hi"}},pacific_groupings:{pacific_110m:{file:"/map/v2/pacific_110m-topo.json",style:Mo,scene:"lo"},pacific_50m:{file:"/map/v2/pacific_50m-topo.json",style:Mo,scene:"hi"}},admin_0:{admin_0_110m:{file:"/map/v2/admin_0_110m-topo.json",style:xo,scene:"lo"},admin_0_50m:{file:"/map/v2/admin_0_50m-topo.json",style:xo,scene:"hi"}},rivers:{rivers_110m:{file:"/earth-topo.json",style:bo,scene:"lo"},rivers_50m:{file:"/earth-topo.json",style:bo,scene:"hi"}},lakes:{lakes_110m:{file:"/earth-topo.json",style:wo,scene:"lo"},lakes_50m:{file:"/earth-topo.json",style:wo,scene:"hi"}},coastline:{coastline_110m:{file:"/earth-topo.json",style:_o,scene:"lo"},coastline_50m:{file:"/earth-topo.json",style:_o,scene:"hi"}}};var Eo;const So=new Set(Object.keys(To)),No=kr({map_scene:[function(t){return 2===t.version&&Array.isArray(t.elements)&&t.elements.every((t=>So.has(t)))},{version:2,elements:["rivers","lakes","coastline"]}],interpolation_type:["string","bilinear"],hd_enabled:["boolean",!1],status:["string",void 0],error:["string",void 0],progress:["number",void 0],display_timezone:["string","device"],show_menu:["boolean",!1],notice:["string",void 0],show_cta:["boolean",!0!==Ct(".cta-bar").property("hidden")],colorbar_cursor:["number",void 0],selected_units:[function(t){const n=qe(Object.entries(t));return n.length>=2&&n.every(ye)},void 0],font_size:["string",null!==(Eo=hr.get("settings.font_size"))&&void 0!==Eo?Eo:"medium"]});function ko(t){const n=Ue(t.map(Xt));if(n.length>1)throw new Error;return It(n[0])}function Do(t){const n=new Set(t.nodes());return function(t){return t.selectAll((function(){return this.children}))}(function(t){return It(Ue(t.select((function(){return this.parentElement})).nodes()))}(t)).filter((function(){return!n.has(this)}))}function Po(t,n){t.on(vr`click`,Bt(n))}function Lo(t,n,e){const r=xn(e)?e:()=>e;t.on(vr`click`,Bt((function(){n.save(r())})))}function jo(t,n,e){const r=xn(e)?e:()=>e;t.on(vr`click`,Bt((function(){n.getAndSet(r)})))}function Ro(t,n){function e(n){t.attr("aria-pressed",!0===n)}e(n.get()),n.on(vr`change`,e),t.on(vr`click`,Bt((function(){n.toggle()})))}var Oo;No.on(vr`change:font_size`,(t=>hr.put("settings.font_size",null!=t?t:null)));const $o=null!==(Oo=navigator.userAgent)&&void 0!==Oo?Oo:"",zo=new URLSearchParams(window.location.search);function Yo(){return 8081==+window.location.port}function Io(){return window.self!==window.top}function Co(t){return zo.has(t)}function Fo(){var t;const n=null!==(t=document.referrer.split("/")[2])&&void 0!==t?t:"",e=/dailymail/i.test(n);return Co("kiosk")&&!e}function qo(){return Io()&&!Fo()&&!Uo()}function Uo(){return Co("bridge")}function Ho(){var t,n;return null!==(t=null===(n=window.location.hostname.match(/(.*)\.nullschool\.net$/))||void 0===n?void 0:n[1])&&void 0!==t?t:"unknown"}function Bo(){var t;return null!==(t=document.querySelector("html").dataset.version)&&void 0!==t?t:"unknown"}Uo()||function(t,n){const e=t.select(".field"),r=t.select("button");n.on(vr`change:status change:error`,(function(){var r;const o=null!==(r=n.get("error"))&&void 0!==r?r:n.get("status");t.property("hidden",""===(null!=o?o:"")),e.text(o)})),Po(r,(()=>n.save({status:void 0,error:void 0})))}(It("[data-name=status-card]"),No);const Xo={status(t){console.log(`[status] ${t}`),No.set("status",t)},error(t,n){var e,r,o;const i=null!==(e=null!==(r=null==t?void 0:t.error)&&void 0!==r?r:t)&&void 0!==e?e:"unexpected error",a=String(null!==(o=i.message)&&void 0!==o?o:i),u=[n?`[${n}]`:null,null==t?void 0:t.resource,i].filter((t=>!!t));console.error(...u),No.set("error",a)},reset(){No.save({status:void 0,error:void 0})}};function Wo(t,n,e,r){xn(window.ga)&&!Yo()&&window.ga("send","event",...arguments)}const Vo=[/dailymail/i,/tamilinstanews/i,/xtremeweatherforecast/i,/oracle77.asuscomm/i];function Go(t,n,e){t.prototype=n.prototype=e,e.constructor=t}function Zo(t,n){var e=Object.create(t.prototype);for(var r in n)e[r]=n[r];return e}function Ko(){}var Jo=.7,Qo=1/Jo,ti="\\s*([+-]?\\d+)\\s*",ni="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",ei="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",ri=/^#([0-9a-f]{3,8})$/,oi=new RegExp(`^rgb\\(${ti},${ti},${ti}\\)$`),ii=new RegExp(`^rgb\\(${ei},${ei},${ei}\\)$`),ai=new RegExp(`^rgba\\(${ti},${ti},${ti},${ni}\\)$`),ui=new RegExp(`^rgba\\(${ei},${ei},${ei},${ni}\\)$`),li=new RegExp(`^hsl\\(${ni},${ei},${ei}\\)$`),ci=new RegExp(`^hsla\\(${ni},${ei},${ei},${ni}\\)$`),si={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};function fi(){return this.rgb().formatHex()}function hi(){return this.rgb().formatRgb()}function di(t){var n,e;return t=(t+"").trim().toLowerCase(),(n=ri.exec(t))?(e=n[1].length,n=parseInt(n[1],16),6===e?pi(n):3===e?new yi(n>>8&15|n>>4&240,n>>4&15|240&n,(15&n)<<4|15&n,1):8===e?vi(n>>24&255,n>>16&255,n>>8&255,(255&n)/255):4===e?vi(n>>12&15|n>>8&240,n>>8&15|n>>4&240,n>>4&15|240&n,((15&n)<<4|15&n)/255):null):(n=oi.exec(t))?new yi(n[1],n[2],n[3],1):(n=ii.exec(t))?new yi(255*n[1]/100,255*n[2]/100,255*n[3]/100,1):(n=ai.exec(t))?vi(n[1],n[2],n[3],n[4]):(n=ui.exec(t))?vi(255*n[1]/100,255*n[2]/100,255*n[3]/100,n[4]):(n=li.exec(t))?Ai(n[1],n[2]/100,n[3]/100,1):(n=ci.exec(t))?Ai(n[1],n[2]/100,n[3]/100,n[4]):si.hasOwnProperty(t)?pi(si[t]):"transparent"===t?new yi(NaN,NaN,NaN,0):null}function pi(t){return new yi(t>>16&255,t>>8&255,255&t,1)}function vi(t,n,e,r){return r<=0&&(t=n=e=NaN),new yi(t,n,e,r)}function mi(t){return t instanceof Ko||(t=di(t)),t?new yi((t=t.rgb()).r,t.g,t.b,t.opacity):new yi}function gi(t,n,e,r){return 1===arguments.length?mi(t):new yi(t,n,e,null==r?1:r)}function yi(t,n,e,r){this.r=+t,this.g=+n,this.b=+e,this.opacity=+r}function _i(){return`#${Mi(this.r)}${Mi(this.g)}${Mi(this.b)}`}function wi(){const t=bi(this.opacity);return`${1===t?"rgb(":"rgba("}${xi(this.r)}, ${xi(this.g)}, ${xi(this.b)}${1===t?")":`, ${t})`}`}function bi(t){return isNaN(t)?1:Math.max(0,Math.min(1,t))}function xi(t){return Math.max(0,Math.min(255,Math.round(t)||0))}function Mi(t){return((t=xi(t))<16?"0":"")+t.toString(16)}function Ai(t,n,e,r){return r<=0?t=n=e=NaN:e<=0||e>=1?t=n=NaN:n<=0&&(t=NaN),new Si(t,n,e,r)}function Ti(t){if(t instanceof Si)return new Si(t.h,t.s,t.l,t.opacity);if(t instanceof Ko||(t=di(t)),!t)return new Si;if(t instanceof Si)return t;var n=(t=t.rgb()).r/255,e=t.g/255,r=t.b/255,o=Math.min(n,e,r),i=Math.max(n,e,r),a=NaN,u=i-o,l=(i+o)/2;return u?(a=n===i?(e-r)/u+6*(e<r):e===i?(r-n)/u+2:(n-e)/u+4,u/=l<.5?i+o:2-i-o,a*=60):u=l>0&&l<1?0:a,new Si(a,u,l,t.opacity)}function Ei(t,n,e,r){return 1===arguments.length?Ti(t):new Si(t,n,e,null==r?1:r)}function Si(t,n,e,r){this.h=+t,this.s=+n,this.l=+e,this.opacity=+r}function Ni(t){return(t=(t||0)%360)<0?t+360:t}function ki(t){return Math.max(0,Math.min(1,t||0))}function Di(t,n,e){return 255*(t<60?n+(e-n)*t/60:t<180?e:t<240?n+(e-n)*(240-t)/60:n)}Go(Ko,di,{copy(t){return Object.assign(new this.constructor,this,t)},displayable(){return this.rgb().displayable()},hex:fi,formatHex:fi,formatHex8:function(){return this.rgb().formatHex8()},formatHsl:function(){return Ti(this).formatHsl()},formatRgb:hi,toString:hi}),Go(yi,gi,Zo(Ko,{brighter(t){return t=null==t?Qo:Math.pow(Qo,t),new yi(this.r*t,this.g*t,this.b*t,this.opacity)},darker(t){return t=null==t?Jo:Math.pow(Jo,t),new yi(this.r*t,this.g*t,this.b*t,this.opacity)},rgb(){return this},clamp(){return new yi(xi(this.r),xi(this.g),xi(this.b),bi(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:_i,formatHex:_i,formatHex8:function(){return`#${Mi(this.r)}${Mi(this.g)}${Mi(this.b)}${Mi(255*(isNaN(this.opacity)?1:this.opacity))}`},formatRgb:wi,toString:wi})),Go(Si,Ei,Zo(Ko,{brighter(t){return t=null==t?Qo:Math.pow(Qo,t),new Si(this.h,this.s,this.l*t,this.opacity)},darker(t){return t=null==t?Jo:Math.pow(Jo,t),new Si(this.h,this.s,this.l*t,this.opacity)},rgb(){var t=this.h%360+360*(this.h<0),n=isNaN(t)||isNaN(this.s)?0:this.s,e=this.l,r=e+(e<.5?e:1-e)*n,o=2*e-r;return new yi(Di(t>=240?t-240:t+120,o,r),Di(t,o,r),Di(t<120?t+240:t-120,o,r),this.opacity)},clamp(){return new Si(Ni(this.h),ki(this.s),ki(this.l),bi(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const t=bi(this.opacity);return`${1===t?"hsl(":"hsla("}${Ni(this.h)}, ${100*ki(this.s)}%, ${100*ki(this.l)}%${1===t?")":`, ${t})`}`}}));const Pi=Math.PI/180,Li=180/Math.PI,ji=.96422,Ri=.82521,Oi=4/29,$i=6/29,zi=3*$i*$i;function Yi(t){if(t instanceof Ci)return new Ci(t.l,t.a,t.b,t.opacity);if(t instanceof Wi)return Vi(t);t instanceof yi||(t=mi(t));var n,e,r=Hi(t.r),o=Hi(t.g),i=Hi(t.b),a=Fi((.2225045*r+.7168786*o+.0606169*i)/1);return r===o&&o===i?n=e=a:(n=Fi((.4360747*r+.3850649*o+.1430804*i)/ji),e=Fi((.0139322*r+.0971045*o+.7141733*i)/Ri)),new Ci(116*a-16,500*(n-a),200*(a-e),t.opacity)}function Ii(t,n,e,r){return 1===arguments.length?Yi(t):new Ci(t,n,e,null==r?1:r)}function Ci(t,n,e,r){this.l=+t,this.a=+n,this.b=+e,this.opacity=+r}function Fi(t){return t>.008856451679035631?Math.pow(t,1/3):t/zi+Oi}function qi(t){return t>$i?t*t*t:zi*(t-Oi)}function Ui(t){return 255*(t<=.0031308?12.92*t:1.055*Math.pow(t,1/2.4)-.055)}function Hi(t){return(t/=255)<=.04045?t/12.92:Math.pow((t+.055)/1.055,2.4)}function Bi(t){if(t instanceof Wi)return new Wi(t.h,t.c,t.l,t.opacity);if(t instanceof Ci||(t=Yi(t)),0===t.a&&0===t.b)return new Wi(NaN,0<t.l&&t.l<100?0:NaN,t.l,t.opacity);var n=Math.atan2(t.b,t.a)*Li;return new Wi(n<0?n+360:n,Math.sqrt(t.a*t.a+t.b*t.b),t.l,t.opacity)}function Xi(t,n,e,r){return 1===arguments.length?Bi(t):new Wi(t,n,e,null==r?1:r)}function Wi(t,n,e,r){this.h=+t,this.c=+n,this.l=+e,this.opacity=+r}function Vi(t){if(isNaN(t.h))return new Ci(t.l,0,0,t.opacity);var n=t.h*Pi;return new Ci(t.l,Math.cos(n)*t.c,Math.sin(n)*t.c,t.opacity)}function Gi(t){let n;for(;n=t.sourceEvent;)t=n;return t}function Zi(t,n){if(t=Gi(t),void 0===n&&(n=t.currentTarget),n){var e=n.ownerSVGElement||n;if(e.createSVGPoint){var r=e.createSVGPoint();return r.x=t.clientX,r.y=t.clientY,[(r=r.matrixTransform(n.getScreenCTM().inverse())).x,r.y]}if(n.getBoundingClientRect){var o=n.getBoundingClientRect();return[t.clientX-o.left-n.clientLeft,t.clientY-o.top-n.clientTop]}}return[t.pageX,t.pageY]}Go(Ci,Ii,Zo(Ko,{brighter(t){return new Ci(this.l+18*(null==t?1:t),this.a,this.b,this.opacity)},darker(t){return new Ci(this.l-18*(null==t?1:t),this.a,this.b,this.opacity)},rgb(){var t=(this.l+16)/116,n=isNaN(this.a)?t:t+this.a/500,e=isNaN(this.b)?t:t-this.b/200;return new yi(Ui(3.1338561*(n=ji*qi(n))-1.6168667*(t=1*qi(t))-.4906146*(e=Ri*qi(e))),Ui(-.9787684*n+1.9161415*t+.033454*e),Ui(.0719453*n-.2289914*t+1.4052427*e),this.opacity)}})),Go(Wi,Xi,Zo(Ko,{brighter(t){return new Wi(this.h,this.c,this.l+18*(null==t?1:t),this.opacity)},darker(t){return new Wi(this.h,this.c,this.l-18*(null==t?1:t),this.opacity)},rgb(){return Vi(this).rgb()}}));const Ki={passive:!1},Ji={capture:!0,passive:!1};function Qi(t){t.stopImmediatePropagation()}function ta(t){t.preventDefault(),t.stopImmediatePropagation()}function na(t){var n=t.document.documentElement,e=Ct(t).on("dragstart.drag",ta,Ji);"onselectstart"in n?e.on("selectstart.drag",ta,Ji):(n.__noselect=n.style.MozUserSelect,n.style.MozUserSelect="none")}function ea(t,n){var e=t.document.documentElement,r=Ct(t).on("dragstart.drag",null);n&&(r.on("click.drag",ta,Ji),setTimeout((function(){r.on("click.drag",null)}),0)),"onselectstart"in e?r.on("selectstart.drag",null):(e.style.MozUserSelect=e.__noselect,delete e.__noselect)}const ra=t=>()=>t;function oa(t,n){let{sourceEvent:e,subject:r,target:o,identifier:i,active:a,x:u,y:l,dx:c,dy:s,dispatch:f}=n;Object.defineProperties(this,{type:{value:t,enumerable:!0,configurable:!0},sourceEvent:{value:e,enumerable:!0,configurable:!0},subject:{value:r,enumerable:!0,configurable:!0},target:{value:o,enumerable:!0,configurable:!0},identifier:{value:i,enumerable:!0,configurable:!0},active:{value:a,enumerable:!0,configurable:!0},x:{value:u,enumerable:!0,configurable:!0},y:{value:l,enumerable:!0,configurable:!0},dx:{value:c,enumerable:!0,configurable:!0},dy:{value:s,enumerable:!0,configurable:!0},_:{value:f}})}function ia(t){return!t.ctrlKey&&!t.button}function aa(){return this.parentNode}function ua(t,n){return null==n?{x:t.x,y:t.y}:n}function la(){return navigator.maxTouchPoints||"ontouchstart"in this}function ca(){var t,n,e,r,o=ia,i=aa,a=ua,u=la,l={},c=xr("start","drag","end"),s=0,f=0;function h(t){t.on("mousedown.drag",d).filter(u).on("touchstart.drag",m).on("touchmove.drag",g,Ki).on("touchend.drag touchcancel.drag",y).style("touch-action","none").style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}function d(a,u){if(!r&&o.call(this,a,u)){var l=_(this,i.call(this,a,u),a,u,"mouse");l&&(Ct(a.view).on("mousemove.drag",p,Ji).on("mouseup.drag",v,Ji),na(a.view),Qi(a),e=!1,t=a.clientX,n=a.clientY,l("start",a))}}function p(r){if(ta(r),!e){var o=r.clientX-t,i=r.clientY-n;e=o*o+i*i>f}l.mouse("drag",r)}function v(t){Ct(t.view).on("mousemove.drag mouseup.drag",null),ea(t.view,e),ta(t),l.mouse("end",t)}function m(t,n){if(o.call(this,t,n)){var e,r,a=t.changedTouches,u=i.call(this,t,n),l=a.length;for(e=0;e<l;++e)(r=_(this,u,t,n,a[e].identifier,a[e]))&&(Qi(t),r("start",t,a[e]))}}function g(t){var n,e,r=t.changedTouches,o=r.length;for(n=0;n<o;++n)(e=l[r[n].identifier])&&(ta(t),e("drag",t,r[n]))}function y(t){var n,e,o=t.changedTouches,i=o.length;for(r&&clearTimeout(r),r=setTimeout((function(){r=null}),500),n=0;n<i;++n)(e=l[o[n].identifier])&&(Qi(t),e("end",t,o[n]))}function _(t,n,e,r,o,i){var u,f,d,p=c.copy(),v=Zi(i||e,n);if(null!=(d=a.call(t,new oa("beforestart",{sourceEvent:e,target:h,identifier:o,active:s,x:v[0],y:v[1],dx:0,dy:0,dispatch:p}),r)))return u=d.x-v[0]||0,f=d.y-v[1]||0,function e(i,a,c){var m,g=v;switch(i){case"start":l[o]=e,m=s++;break;case"end":delete l[o],--s;case"drag":v=Zi(c||a,n),m=s}p.call(i,t,new oa(i,{sourceEvent:a,subject:d,target:h,identifier:o,active:m,x:v[0]+u,y:v[1]+f,dx:v[0]-g[0],dy:v[1]-g[1],dispatch:p}),r)}}return h.filter=function(t){return arguments.length?(o="function"==typeof t?t:ra(!!t),h):o},h.container=function(t){return arguments.length?(i="function"==typeof t?t:ra(t),h):i},h.subject=function(t){return arguments.length?(a="function"==typeof t?t:ra(t),h):a},h.touchable=function(t){return arguments.length?(u="function"==typeof t?t:ra(!!t),h):u},h.on=function(){var t=c.on.apply(c,arguments);return t===c?h:t},h.clickDistance=function(t){return arguments.length?(f=(t=+t)*t,h):Math.sqrt(f)},h}oa.prototype.on=function(){var t=this._.on.apply(this._,arguments);return t===this._?this:t};var sa=1e-6,fa=Math.PI,ha=fa/2,da=fa/4,pa=2*fa,va=180/fa,ma=fa/180,ga=Math.abs,ya=Math.atan,_a=Math.atan2,wa=Math.cos,ba=Math.ceil,xa=(Math.exp,Math.floor,Math.hypot),Ma=(Math.log,Math.pow,Math.sin),Aa=Math.sign||function(t){return t>0?1:t<0?-1:0},Ta=Math.sqrt;function Ea(t){return t>1?ha:t<-1?-ha:Math.asin(t)}function Sa(t){return(t=Ma(t/2))*t}function Na(){}function ka(){var t,n=[];return{point:function(n,e,r){t.push([n,e,r])},lineStart:function(){n.push(t=[])},lineEnd:Na,rejoin:function(){n.length>1&&n.push(n.pop().concat(n.shift()))},result:function(){var e=n;return n=[],t=null,e}}}function Da(t,n){return ga(t[0]-n[0])<sa&&ga(t[1]-n[1])<sa}function Pa(t,n,e,r){this.x=t,this.z=n,this.o=e,this.e=r,this.v=!1,this.n=this.p=null}function La(t,n,e,r,o){var i,a,u=[],l=[];if(t.forEach((function(t){if(!((n=t.length-1)<=0)){var n,e,r=t[0],a=t[n];if(Da(r,a)){if(!r[2]&&!a[2]){for(o.lineStart(),i=0;i<n;++i)o.point((r=t[i])[0],r[1]);return void o.lineEnd()}a[0]+=2e-6}u.push(e=new Pa(r,t,null,!0)),l.push(e.o=new Pa(r,null,e,!1)),u.push(e=new Pa(a,t,null,!1)),l.push(e.o=new Pa(a,null,e,!0))}})),u.length){for(l.sort(n),ja(u),ja(l),i=0,a=l.length;i<a;++i)l[i].e=e=!e;for(var c,s,f=u[0];;){for(var h=f,d=!0;h.v;)if((h=h.n)===f)return;c=h.z,o.lineStart();do{if(h.v=h.o.v=!0,h.e){if(d)for(i=0,a=c.length;i<a;++i)o.point((s=c[i])[0],s[1]);else r(h.x,h.n.x,1,o);h=h.n}else{if(d)for(c=h.p.z,i=c.length-1;i>=0;--i)o.point((s=c[i])[0],s[1]);else r(h.x,h.p.x,-1,o);h=h.p}c=(h=h.o).z,d=!d}while(!h.v);o.lineEnd()}}}function ja(t){if(n=t.length){for(var n,e,r=0,o=t[0];++r<n;)o.n=e=t[r],e.p=o,o=e;o.n=e=t[0],e.p=o}}Math.tan;class Ra{constructor(){this._partials=new Float64Array(32),this._n=0}add(t){const n=this._partials;let e=0;for(let r=0;r<this._n&&r<32;r++){const o=n[r],i=t+o,a=Math.abs(t)<Math.abs(o)?t-(i-o):o-(i-t);a&&(n[e++]=a),t=i}return n[e]=t,this._n=e+1,this}valueOf(){const t=this._partials;let n,e,r,o=this._n,i=0;if(o>0){for(i=t[--o];o>0&&(n=i,e=t[--o],i=n+e,r=e-(i-n),!r););o>0&&(r<0&&t[o-1]<0||r>0&&t[o-1]>0)&&(e=2*r,n=i+e,e==n-i&&(i=n))}return i}}function Oa(t){return[_a(t[1],t[0]),Ea(t[2])]}function $a(t){var n=t[0],e=t[1],r=wa(e);return[r*wa(n),r*Ma(n),Ma(e)]}function za(t,n){return t[0]*n[0]+t[1]*n[1]+t[2]*n[2]}function Ya(t,n){return[t[1]*n[2]-t[2]*n[1],t[2]*n[0]-t[0]*n[2],t[0]*n[1]-t[1]*n[0]]}function Ia(t,n){t[0]+=n[0],t[1]+=n[1],t[2]+=n[2]}function Ca(t,n){return[t[0]*n,t[1]*n,t[2]*n]}function Fa(t){var n=Ta(t[0]*t[0]+t[1]*t[1]+t[2]*t[2]);t[0]/=n,t[1]/=n,t[2]/=n}function qa(t){return ga(t[0])<=fa?t[0]:Aa(t[0])*((ga(t[0])+fa)%pa-fa)}function Ua(t){return Array.from(function*(t){for(const n of t)yield*n}(t))}function Ha(t,n,e,r){return function(o){var i,a,u,l=n(o),c=ka(),s=n(c),f=!1,h={point:d,lineStart:v,lineEnd:m,polygonStart:function(){h.point=g,h.lineStart=y,h.lineEnd=_,a=[],i=[]},polygonEnd:function(){h.point=d,h.lineStart=v,h.lineEnd=m,a=Ua(a);var t=function(t,n){var e=qa(n),r=n[1],o=Ma(r),i=[Ma(e),-wa(e),0],a=0,u=0,l=new Ra;1===o?r=ha+sa:-1===o&&(r=-ha-sa);for(var c=0,s=t.length;c<s;++c)if(h=(f=t[c]).length)for(var f,h,d=f[h-1],p=qa(d),v=d[1]/2+da,m=Ma(v),g=wa(v),y=0;y<h;++y,p=w,m=x,g=M,d=_){var _=f[y],w=qa(_),b=_[1]/2+da,x=Ma(b),M=wa(b),A=w-p,T=A>=0?1:-1,E=T*A,S=E>fa,N=m*x;if(l.add(_a(N*T*Ma(E),g*M+N*wa(E))),a+=S?A+T*pa:A,S^p>=e^w>=e){var k=Ya($a(d),$a(_));Fa(k);var D=Ya(i,k);Fa(D);var P=(S^A>=0?-1:1)*Ea(D[2]);(r>P||r===P&&(k[0]||k[1]))&&(u+=S^A>=0?1:-1)}}return(a<-sa||a<sa&&l<-1e-12)^1&u}(i,r);a.length?(f||(o.polygonStart(),f=!0),La(a,Xa,t,e,o)):t&&(f||(o.polygonStart(),f=!0),o.lineStart(),e(null,null,1,o),o.lineEnd()),f&&(o.polygonEnd(),f=!1),a=i=null},sphere:function(){o.polygonStart(),o.lineStart(),e(null,null,1,o),o.lineEnd(),o.polygonEnd()}};function d(n,e){t(n,e)&&o.point(n,e)}function p(t,n){l.point(t,n)}function v(){h.point=p,l.lineStart()}function m(){h.point=d,l.lineEnd()}function g(t,n){u.push([t,n]),s.point(t,n)}function y(){s.lineStart(),u=[]}function _(){g(u[0][0],u[0][1]),s.lineEnd();var t,n,e,r,l=s.clean(),h=c.result(),d=h.length;if(u.pop(),i.push(u),u=null,d)if(1&l){if((n=(e=h[0]).length-1)>0){for(f||(o.polygonStart(),f=!0),o.lineStart(),t=0;t<n;++t)o.point((r=e[t])[0],r[1]);o.lineEnd()}}else d>1&&2&l&&h.push(h.pop().concat(h.shift())),a.push(h.filter(Ba))}return h}}function Ba(t){return t.length>1}function Xa(t,n){return((t=t.x)[0]<0?t[1]-ha-sa:ha-t[1])-((n=n.x)[0]<0?n[1]-ha-sa:ha-n[1])}const Wa=Ha((function(){return!0}),(function(t){var n,e=NaN,r=NaN,o=NaN;return{lineStart:function(){t.lineStart(),n=1},point:function(i,a){var u=i>0?fa:-fa,l=ga(i-e);ga(l-fa)<sa?(t.point(e,r=(r+a)/2>0?ha:-ha),t.point(o,r),t.lineEnd(),t.lineStart(),t.point(u,r),t.point(i,r),n=0):o!==u&&l>=fa&&(ga(e-o)<sa&&(e-=o*sa),ga(i-u)<sa&&(i-=u*sa),r=function(t,n,e,r){var o,i,a=Ma(t-e);return ga(a)>sa?ya((Ma(n)*(i=wa(r))*Ma(e)-Ma(r)*(o=wa(n))*Ma(t))/(o*i*a)):(n+r)/2}(e,r,i,a),t.point(o,r),t.lineEnd(),t.lineStart(),t.point(u,r),n=0),t.point(e=i,r=a),o=u},lineEnd:function(){t.lineEnd(),e=r=NaN},clean:function(){return 2-n}}}),(function(t,n,e,r){var o;if(null==t)o=e*ha,r.point(-fa,o),r.point(0,o),r.point(fa,o),r.point(fa,0),r.point(fa,-o),r.point(0,-o),r.point(-fa,-o),r.point(-fa,0),r.point(-fa,o);else if(ga(t[0]-n[0])>sa){var i=t[0]<n[0]?fa:-fa;o=e*i/2,r.point(-i,o),r.point(0,o),r.point(i,o)}else r.point(n[0],n[1])}),[-fa,-ha]);function Va(t,n){(n=$a(n))[0]-=t,Fa(n);var e,r=(e=-n[1])>1?0:e<-1?fa:Math.acos(e);return((-n[2]<0?-r:r)+pa-sa)%pa}function Ga(t){var n=wa(t),e=6*ma,r=n>0,o=ga(n)>sa;function i(t,e){return wa(t)*wa(e)>n}function a(t,e,r){var o=[1,0,0],i=Ya($a(t),$a(e)),a=za(i,i),u=i[0],l=a-u*u;if(!l)return!r&&t;var c=n*a/l,s=-n*u/l,f=Ya(o,i),h=Ca(o,c);Ia(h,Ca(i,s));var d=f,p=za(h,d),v=za(d,d),m=p*p-v*(za(h,h)-1);if(!(m<0)){var g=Ta(m),y=Ca(d,(-p-g)/v);if(Ia(y,h),y=Oa(y),!r)return y;var _,w=t[0],b=e[0],x=t[1],M=e[1];b<w&&(_=w,w=b,b=_);var A=b-w,T=ga(A-fa)<sa;if(!T&&M<x&&(_=x,x=M,M=_),T||A<sa?T?x+M>0^y[1]<(ga(y[0]-w)<sa?x:M):x<=y[1]&&y[1]<=M:A>fa^(w<=y[0]&&y[0]<=b)){var E=Ca(d,(-p+g)/v);return Ia(E,h),[y,Oa(E)]}}}function u(n,e){var o=r?t:fa-t,i=0;return n<-o?i|=1:n>o&&(i|=2),e<-o?i|=4:e>o&&(i|=8),i}return Ha(i,(function(t){var n,e,l,c,s;return{lineStart:function(){c=l=!1,s=1},point:function(f,h){var d,p=[f,h],v=i(f,h),m=r?v?0:u(f,h):v?u(f+(f<0?fa:-fa),h):0;if(!n&&(c=l=v)&&t.lineStart(),v!==l&&(!(d=a(n,p))||Da(n,d)||Da(p,d))&&(p[2]=1),v!==l)s=0,v?(t.lineStart(),d=a(p,n),t.point(d[0],d[1])):(d=a(n,p),t.point(d[0],d[1],2),t.lineEnd()),n=d;else if(o&&n&&r^v){var g;m&e||!(g=a(p,n,!0))||(s=0,r?(t.lineStart(),t.point(g[0][0],g[0][1]),t.point(g[1][0],g[1][1]),t.lineEnd()):(t.point(g[1][0],g[1][1]),t.lineEnd(),t.lineStart(),t.point(g[0][0],g[0][1],3)))}!v||n&&Da(n,p)||t.point(p[0],p[1]),n=p,l=v,e=m},lineEnd:function(){l&&t.lineEnd(),n=null},clean:function(){return s|(c&&l)<<1}}}),(function(n,r,o,i){!function(t,n,e,r,o,i){if(e){var a=wa(n),u=Ma(n),l=r*e;null==o?(o=n+r*pa,i=n-l/2):(o=Va(a,o),i=Va(a,i),(r>0?o<i:o>i)&&(o+=r*pa));for(var c,s=o;r>0?s>i:s<i;s-=l)c=Oa([a,-u*wa(s),-u*Ma(s)]),t.point(c[0],c[1])}}(i,t,e,o,n,r)}),r?[0,-t]:[-fa,t-fa])}var Za=1e9,Ka=-Za;function Ja(t,n,e,r){function o(o,i){return t<=o&&o<=e&&n<=i&&i<=r}function i(o,i,u,c){var s=0,f=0;if(null==o||(s=a(o,u))!==(f=a(i,u))||l(o,i)<0^u>0)do{c.point(0===s||3===s?t:e,s>1?r:n)}while((s=(s+u+4)%4)!==f);else c.point(i[0],i[1])}function a(r,o){return ga(r[0]-t)<sa?o>0?0:3:ga(r[0]-e)<sa?o>0?2:1:ga(r[1]-n)<sa?o>0?1:0:o>0?3:2}function u(t,n){return l(t.x,n.x)}function l(t,n){var e=a(t,1),r=a(n,1);return e!==r?e-r:0===e?n[1]-t[1]:1===e?t[0]-n[0]:2===e?t[1]-n[1]:n[0]-t[0]}return function(a){var l,c,s,f,h,d,p,v,m,g,y,_=a,w=ka(),b={point:x,lineStart:function(){b.point=M,c&&c.push(s=[]),g=!0,m=!1,p=v=NaN},lineEnd:function(){l&&(M(f,h),d&&m&&w.rejoin(),l.push(w.result())),b.point=x,m&&_.lineEnd()},polygonStart:function(){_=w,l=[],c=[],y=!0},polygonEnd:function(){var n=function(){for(var n=0,e=0,o=c.length;e<o;++e)for(var i,a,u=c[e],l=1,s=u.length,f=u[0],h=f[0],d=f[1];l<s;++l)i=h,a=d,h=(f=u[l])[0],d=f[1],a<=r?d>r&&(h-i)*(r-a)>(d-a)*(t-i)&&++n:d<=r&&(h-i)*(r-a)<(d-a)*(t-i)&&--n;return n}(),e=y&&n,o=(l=Ua(l)).length;(e||o)&&(a.polygonStart(),e&&(a.lineStart(),i(null,null,1,a),a.lineEnd()),o&&La(l,u,n,i,a),a.polygonEnd()),_=a,l=c=s=null}};function x(t,n){o(t,n)&&_.point(t,n)}function M(i,a){var u=o(i,a);if(c&&s.push([i,a]),g)f=i,h=a,d=u,g=!1,u&&(_.lineStart(),_.point(i,a));else if(u&&m)_.point(i,a);else{var l=[p=Math.max(Ka,Math.min(Za,p)),v=Math.max(Ka,Math.min(Za,v))],w=[i=Math.max(Ka,Math.min(Za,i)),a=Math.max(Ka,Math.min(Za,a))];!function(t,n,e,r,o,i){var a,u=t[0],l=t[1],c=0,s=1,f=n[0]-u,h=n[1]-l;if(a=e-u,f||!(a>0)){if(a/=f,f<0){if(a<c)return;a<s&&(s=a)}else if(f>0){if(a>s)return;a>c&&(c=a)}if(a=o-u,f||!(a<0)){if(a/=f,f<0){if(a>s)return;a>c&&(c=a)}else if(f>0){if(a<c)return;a<s&&(s=a)}if(a=r-l,h||!(a>0)){if(a/=h,h<0){if(a<c)return;a<s&&(s=a)}else if(h>0){if(a>s)return;a>c&&(c=a)}if(a=i-l,h||!(a<0)){if(a/=h,h<0){if(a>s)return;a>c&&(c=a)}else if(h>0){if(a<c)return;a<s&&(s=a)}return c>0&&(t[0]=u+c*f,t[1]=l+c*h),s<1&&(n[0]=u+s*f,n[1]=l+s*h),!0}}}}}(l,w,t,n,e,r)?u&&(_.lineStart(),_.point(i,a),y=!1):(m||(_.lineStart(),_.point(l[0],l[1])),_.point(w[0],w[1]),u||_.lineEnd(),y=!1)}p=i,v=a,m=u}return b}}function Qa(t,n){function e(e,r){return e=t(e,r),n(e[0],e[1])}return t.invert&&n.invert&&(e.invert=function(e,r){return(e=n.invert(e,r))&&t.invert(e[0],e[1])}),e}const tu=t=>t;function nu(t,n){return[ga(t)>fa?t+Math.round(-t/pa)*pa:t,n]}function eu(t){return function(n,e){return[(n+=t)>fa?n-pa:n<-fa?n+pa:n,e]}}function ru(t){var n=eu(t);return n.invert=eu(-t),n}function ou(t,n){var e=wa(t),r=Ma(t),o=wa(n),i=Ma(n);function a(t,n){var a=wa(n),u=wa(t)*a,l=Ma(t)*a,c=Ma(n),s=c*e+u*r;return[_a(l*o-s*i,u*e-c*r),Ea(s*o+l*i)]}return a.invert=function(t,n){var a=wa(n),u=wa(t)*a,l=Ma(t)*a,c=Ma(n),s=c*o-l*i;return[_a(l*o+c*i,u*e+s*r),Ea(s*e-u*r)]},a}function iu(t){return function(n){var e=new au;for(var r in t)e[r]=t[r];return e.stream=n,e}}function au(){}function uu(t,n){t&&cu.hasOwnProperty(t.type)&&cu[t.type](t,n)}nu.invert=nu,au.prototype={constructor:au,point:function(t,n){this.stream.point(t,n)},sphere:function(){this.stream.sphere()},lineStart:function(){this.stream.lineStart()},lineEnd:function(){this.stream.lineEnd()},polygonStart:function(){this.stream.polygonStart()},polygonEnd:function(){this.stream.polygonEnd()}};var lu={Feature:function(t,n){uu(t.geometry,n)},FeatureCollection:function(t,n){for(var e=t.features,r=-1,o=e.length;++r<o;)uu(e[r].geometry,n)}},cu={Sphere:function(t,n){n.sphere()},Point:function(t,n){t=t.coordinates,n.point(t[0],t[1],t[2])},MultiPoint:function(t,n){for(var e=t.coordinates,r=-1,o=e.length;++r<o;)t=e[r],n.point(t[0],t[1],t[2])},LineString:function(t,n){su(t.coordinates,n,0)},MultiLineString:function(t,n){for(var e=t.coordinates,r=-1,o=e.length;++r<o;)su(e[r],n,0)},Polygon:function(t,n){fu(t.coordinates,n)},MultiPolygon:function(t,n){for(var e=t.coordinates,r=-1,o=e.length;++r<o;)fu(e[r],n)},GeometryCollection:function(t,n){for(var e=t.geometries,r=-1,o=e.length;++r<o;)uu(e[r],n)}};function su(t,n,e){var r,o=-1,i=t.length-e;for(n.lineStart();++o<i;)r=t[o],n.point(r[0],r[1],r[2]);n.lineEnd()}function fu(t,n){var e=-1,r=t.length;for(n.polygonStart();++e<r;)su(t[e],n,1);n.polygonEnd()}function hu(t,n){t&&lu.hasOwnProperty(t.type)?lu[t.type](t,n):uu(t,n)}var du=1/0,pu=du,vu=-du,mu=vu,gu={point:function(t,n){t<du&&(du=t),t>vu&&(vu=t),n<pu&&(pu=n),n>mu&&(mu=n)},lineStart:Na,lineEnd:Na,polygonStart:Na,polygonEnd:Na,result:function(){var t=[[du,pu],[vu,mu]];return vu=mu=-(pu=du=1/0),t}};const yu=gu;function _u(t,n,e){var r=t.clipExtent&&t.clipExtent();return t.scale(150).translate([0,0]),null!=r&&t.clipExtent(null),hu(e,t.stream(yu)),n(yu.result()),null!=r&&t.clipExtent(r),t}function wu(t,n,e){return _u(t,(function(e){var r=n[1][0]-n[0][0],o=n[1][1]-n[0][1],i=Math.min(r/(e[1][0]-e[0][0]),o/(e[1][1]-e[0][1])),a=+n[0][0]+(r-i*(e[1][0]+e[0][0]))/2,u=+n[0][1]+(o-i*(e[1][1]+e[0][1]))/2;t.scale(150*i).translate([a,u])}),e)}var bu=wa(30*ma);function xu(t,n){return+n?function(t,n){function e(r,o,i,a,u,l,c,s,f,h,d,p,v,m){var g=c-r,y=s-o,_=g*g+y*y;if(_>4*n&&v--){var w=a+h,b=u+d,x=l+p,M=Ta(w*w+b*b+x*x),A=Ea(x/=M),T=ga(ga(x)-1)<sa||ga(i-f)<sa?(i+f)/2:_a(b,w),E=t(T,A),S=E[0],N=E[1],k=S-r,D=N-o,P=y*k-g*D;(P*P/_>n||ga((g*k+y*D)/_-.5)>.3||a*h+u*d+l*p<bu)&&(e(r,o,i,a,u,l,S,N,T,w/=M,b/=M,x,v,m),m.point(S,N),e(S,N,T,w,b,x,c,s,f,h,d,p,v,m))}}return function(n){var r,o,i,a,u,l,c,s,f,h,d,p,v={point:m,lineStart:g,lineEnd:_,polygonStart:function(){n.polygonStart(),v.lineStart=w},polygonEnd:function(){n.polygonEnd(),v.lineStart=g}};function m(e,r){e=t(e,r),n.point(e[0],e[1])}function g(){s=NaN,v.point=y,n.lineStart()}function y(r,o){var i=$a([r,o]),a=t(r,o);e(s,f,c,h,d,p,s=a[0],f=a[1],c=r,h=i[0],d=i[1],p=i[2],16,n),n.point(s,f)}function _(){v.point=m,n.lineEnd()}function w(){g(),v.point=b,v.lineEnd=x}function b(t,n){y(r=t,n),o=s,i=f,a=h,u=d,l=p,v.point=y}function x(){e(s,f,c,h,d,p,o,i,r,a,u,l,16,n),v.lineEnd=_,_()}return v}}(t,n):function(t){return iu({point:function(n,e){n=t(n,e),this.stream.point(n[0],n[1])}})}(t)}var Mu=iu({point:function(t,n){this.stream.point(t*ma,n*ma)}});function Au(t,n,e,r,o,i){if(!i)return function(t,n,e,r,o){function i(i,a){return[n+t*(i*=r),e-t*(a*=o)]}return i.invert=function(i,a){return[(i-n)/t*r,(e-a)/t*o]},i}(t,n,e,r,o);var a=wa(i),u=Ma(i),l=a*t,c=u*t,s=a/t,f=u/t,h=(u*e-a*n)/t,d=(u*n+a*e)/t;function p(t,i){return[l*(t*=r)-c*(i*=o)+n,e-c*t-l*i]}return p.invert=function(t,n){return[r*(s*t-f*n+h),o*(d-f*t-s*n)]},p}function Tu(t){return Eu((function(){return t}))()}function Eu(t){var n,e,r,o,i,a,u,l,c,s,f=150,h=480,d=250,p=0,v=0,m=0,g=0,y=0,_=0,w=1,b=1,x=null,M=Wa,A=null,T=tu,E=.5;function S(t){return l(t[0]*ma,t[1]*ma)}function N(t){return(t=l.invert(t[0],t[1]))&&[t[0]*va,t[1]*va]}function k(){var t=Au(f,0,0,w,b,_).apply(null,n(p,v)),r=Au(f,h-t[0],d-t[1],w,b,_);return e=function(t,n,e){return(t%=pa)?n||e?Qa(ru(t),ou(n,e)):ru(t):n||e?ou(n,e):nu}(m,g,y),u=Qa(n,r),l=Qa(e,u),a=xu(u,E),D()}function D(){return c=s=null,S}return S.stream=function(t){return c&&s===t?c:c=Mu(function(t){return iu({point:function(n,e){var r=t(n,e);return this.stream.point(r[0],r[1])}})}(e)(M(a(T(s=t)))))},S.preclip=function(t){return arguments.length?(M=t,x=void 0,D()):M},S.postclip=function(t){return arguments.length?(T=t,A=r=o=i=null,D()):T},S.clipAngle=function(t){return arguments.length?(M=+t?Ga(x=t*ma):(x=null,Wa),D()):x*va},S.clipExtent=function(t){return arguments.length?(T=null==t?(A=r=o=i=null,tu):Ja(A=+t[0][0],r=+t[0][1],o=+t[1][0],i=+t[1][1]),D()):null==A?null:[[A,r],[o,i]]},S.scale=function(t){return arguments.length?(f=+t,k()):f},S.translate=function(t){return arguments.length?(h=+t[0],d=+t[1],k()):[h,d]},S.center=function(t){return arguments.length?(p=t[0]%360*ma,v=t[1]%360*ma,k()):[p*va,v*va]},S.rotate=function(t){return arguments.length?(m=t[0]%360*ma,g=t[1]%360*ma,y=t.length>2?t[2]%360*ma:0,k()):[m*va,g*va,y*va]},S.angle=function(t){return arguments.length?(_=t%360*ma,k()):_*va},S.reflectX=function(t){return arguments.length?(w=t?-1:1,k()):w<0},S.reflectY=function(t){return arguments.length?(b=t?-1:1,k()):b<0},S.precision=function(t){return arguments.length?(a=xu(u,E=t*t),D()):Ta(E)},S.fitExtent=function(t,n){return wu(S,t,n)},S.fitSize=function(t,n){return function(t,n,e){return wu(t,[[0,0],n],e)}(S,t,n)},S.fitWidth=function(t,n){return function(t,n,e){return _u(t,(function(e){var r=+n,o=r/(e[1][0]-e[0][0]),i=(r-o*(e[1][0]+e[0][0]))/2,a=-o*e[0][1];t.scale(150*o).translate([i,a])}),e)}(S,t,n)},S.fitHeight=function(t,n){return function(t,n,e){return _u(t,(function(e){var r=+n,o=r/(e[1][1]-e[0][1]),i=-o*e[0][0],a=(r-o*(e[1][1]+e[0][1]))/2;t.scale(150*o).translate([i,a])}),e)}(S,t,n)},function(){return n=t.apply(this,arguments),S.invert=n.invert&&N,k()}}function Su(t,n){return[t,n]}function Nu(){return Tu(Su).scale(152.63)}function ku(t,n){var e=wa(t),r=t===n?Ma(t):(e-wa(n))/(n-t),o=e/r+t;if(ga(r)<sa)return Su;function i(t,n){var e=o-n,i=r*t;return[e*Ma(i),o-e*wa(i)]}return i.invert=function(t,n){var e=o-n,i=_a(t,ga(e))*Aa(e);return e*r<0&&(i-=fa*Aa(t)*Aa(e)),[i/r,o-Aa(r)*Ta(t*t+e*e)]},i}function Du(){return function(t){var n=0,e=fa/3,r=Eu(t),o=r(n,e);return o.parallels=function(t){return arguments.length?r(n=t[0]*ma,e=t[1]*ma):[n*va,e*va]},o}(ku).scale(131.154).center([0,13.9389])}function Pu(t,n,e){t=+t,n=+n,e=(o=arguments.length)<2?(n=t,t=0,1):o<3?1:+e;for(var r=-1,o=0|Math.max(0,Math.ceil((n-t)/e)),i=new Array(o);++r<o;)i[r]=t+r*e;return i}function Lu(t,n,e){var r=Pu(t,n-sa,e).concat(n);return function(t){return r.map((function(n){return[t,n]}))}}function ju(t,n,e){var r=Pu(t,n-sa,e).concat(n);return function(t){return r.map((function(n){return[n,t]}))}}function Ru(){var t,n,e,r,o,i,a,u,l,c,s,f,h=10,d=h,p=90,v=360,m=2.5;function g(){return{type:"MultiLineString",coordinates:y()}}function y(){return Pu(ba(r/p)*p,e,p).map(s).concat(Pu(ba(u/v)*v,a,v).map(f)).concat(Pu(ba(n/h)*h,t,h).filter((function(t){return ga(t%p)>sa})).map(l)).concat(Pu(ba(i/d)*d,o,d).filter((function(t){return ga(t%v)>sa})).map(c))}return g.lines=function(){return y().map((function(t){return{type:"LineString",coordinates:t}}))},g.outline=function(){return{type:"Polygon",coordinates:[s(r).concat(f(a).slice(1),s(e).reverse().slice(1),f(u).reverse().slice(1))]}},g.extent=function(t){return arguments.length?g.extentMajor(t).extentMinor(t):g.extentMinor()},g.extentMajor=function(t){return arguments.length?(r=+t[0][0],e=+t[1][0],u=+t[0][1],a=+t[1][1],r>e&&(t=r,r=e,e=t),u>a&&(t=u,u=a,a=t),g.precision(m)):[[r,u],[e,a]]},g.extentMinor=function(e){return arguments.length?(n=+e[0][0],t=+e[1][0],i=+e[0][1],o=+e[1][1],n>t&&(e=n,n=t,t=e),i>o&&(e=i,i=o,o=e),g.precision(m)):[[n,i],[t,o]]},g.step=function(t){return arguments.length?g.stepMajor(t).stepMinor(t):g.stepMinor()},g.stepMajor=function(t){return arguments.length?(p=+t[0],v=+t[1],g):[p,v]},g.stepMinor=function(t){return arguments.length?(h=+t[0],d=+t[1],g):[h,d]},g.precision=function(h){return arguments.length?(m=+h,l=Lu(i,o,90),c=ju(n,t,m),s=Lu(u,a,90),f=ju(r,e,m),g):m},g.extentMajor([[-180,-89.999999],[180,89.999999]]).extentMinor([[-180,-80.000001],[180,80.000001]])}function Ou(t){return function(n,e){var r=Ta(n*n+e*e),o=t(r),i=Ma(o),a=wa(o);return[_a(n*i,r*a),Ea(r&&e*i/r)]}}function $u(t,n){return[wa(n)*Ma(t),Ma(n)]}function zu(){return Tu($u).scale(249.5).clipAngle(90.000001)}Su.invert=Su,$u.invert=Ou(Ea);var Yu,Iu,Cu,Fu,qu=new Ra,Uu=new Ra,Hu={point:Na,lineStart:Na,lineEnd:Na,polygonStart:function(){Hu.lineStart=Bu,Hu.lineEnd=Vu},polygonEnd:function(){Hu.lineStart=Hu.lineEnd=Hu.point=Na,qu.add(ga(Uu)),Uu=new Ra},result:function(){var t=qu/2;return qu=new Ra,t}};function Bu(){Hu.point=Xu}function Xu(t,n){Hu.point=Wu,Yu=Cu=t,Iu=Fu=n}function Wu(t,n){Uu.add(Fu*t-Cu*n),Cu=t,Fu=n}function Vu(){Wu(Yu,Iu)}const Gu=Hu;var Zu,Ku,Ju,Qu,tl=0,nl=0,el=0,rl=0,ol=0,il=0,al=0,ul=0,ll=0,cl={point:sl,lineStart:fl,lineEnd:pl,polygonStart:function(){cl.lineStart=vl,cl.lineEnd=ml},polygonEnd:function(){cl.point=sl,cl.lineStart=fl,cl.lineEnd=pl},result:function(){var t=ll?[al/ll,ul/ll]:il?[rl/il,ol/il]:el?[tl/el,nl/el]:[NaN,NaN];return tl=nl=el=rl=ol=il=al=ul=ll=0,t}};function sl(t,n){tl+=t,nl+=n,++el}function fl(){cl.point=hl}function hl(t,n){cl.point=dl,sl(Ju=t,Qu=n)}function dl(t,n){var e=t-Ju,r=n-Qu,o=Ta(e*e+r*r);rl+=o*(Ju+t)/2,ol+=o*(Qu+n)/2,il+=o,sl(Ju=t,Qu=n)}function pl(){cl.point=sl}function vl(){cl.point=gl}function ml(){yl(Zu,Ku)}function gl(t,n){cl.point=yl,sl(Zu=Ju=t,Ku=Qu=n)}function yl(t,n){var e=t-Ju,r=n-Qu,o=Ta(e*e+r*r);rl+=o*(Ju+t)/2,ol+=o*(Qu+n)/2,il+=o,al+=(o=Qu*t-Ju*n)*(Ju+t),ul+=o*(Qu+n),ll+=3*o,sl(Ju=t,Qu=n)}const _l=cl;function wl(t){this._context=t}wl.prototype={_radius:4.5,pointRadius:function(t){return this._radius=t,this},polygonStart:function(){this._line=0},polygonEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){0===this._line&&this._context.closePath(),this._point=NaN},point:function(t,n){switch(this._point){case 0:this._context.moveTo(t,n),this._point=1;break;case 1:this._context.lineTo(t,n);break;default:this._context.moveTo(t+this._radius,n),this._context.arc(t,n,this._radius,0,pa)}},result:Na};var bl,xl,Ml,Al,Tl,El=new Ra,Sl={point:Na,lineStart:function(){Sl.point=Nl},lineEnd:function(){bl&&kl(xl,Ml),Sl.point=Na},polygonStart:function(){bl=!0},polygonEnd:function(){bl=null},result:function(){var t=+El;return El=new Ra,t}};function Nl(t,n){Sl.point=kl,xl=Al=t,Ml=Tl=n}function kl(t,n){Al-=t,Tl-=n,El.add(Ta(Al*Al+Tl*Tl)),Al=t,Tl=n}const Dl=Sl;function Pl(){this._string=[]}function Ll(t){return"m0,"+t+"a"+t+","+t+" 0 1,1 0,"+-2*t+"a"+t+","+t+" 0 1,1 0,"+2*t+"z"}function jl(t,n){var e,r,o=4.5;function i(t){return t&&("function"==typeof o&&r.pointRadius(+o.apply(this,arguments)),hu(t,e(r))),r.result()}return i.area=function(t){return hu(t,e(Gu)),Gu.result()},i.measure=function(t){return hu(t,e(Dl)),Dl.result()},i.bounds=function(t){return hu(t,e(yu)),yu.result()},i.centroid=function(t){return hu(t,e(_l)),_l.result()},i.projection=function(n){return arguments.length?(e=null==n?(t=null,tu):(t=n).stream,i):t},i.context=function(t){return arguments.length?(r=null==t?(n=null,new Pl):new wl(n=t),"function"!=typeof o&&r.pointRadius(o),i):n},i.pointRadius=function(t){return arguments.length?(o="function"==typeof t?t:(r.pointRadius(+t),+t),i):o},i.projection(t).context(n)}function Rl(t,n){var e=wa(n),r=1+wa(t)*e;return[e*Ma(t)/r,Ma(n)/r]}function Ol(){return Tu(Rl).scale(250).clipAngle(142)}Pl.prototype={_radius:4.5,_circle:Ll(4.5),pointRadius:function(t){return(t=+t)!==this._radius&&(this._radius=t,this._circle=null),this},polygonStart:function(){this._line=0},polygonEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){0===this._line&&this._string.push("Z"),this._point=NaN},point:function(t,n){switch(this._point){case 0:this._string.push("M",t,",",n),this._point=1;break;case 1:this._string.push("L",t,",",n);break;default:null==this._circle&&(this._circle=Ll(this._radius)),this._string.push("M",t,",",n,this._circle)}},result:function(){if(this._string.length){var t=this._string.join("");return this._string=[],t}return null}},Rl.invert=Ou((function(t){return 2*ya(t)}));var $l=Math.abs,zl=(Math.atan,Math.atan2),Yl=(Math.ceil,Math.cos),Il=(Math.exp,Math.floor,Math.log,Math.max),Cl=Math.min,Fl=(Math.pow,Math.round,Math.sign,Math.sin),ql=(Math.tan,1e-6),Ul=Math.PI,Hl=Ul/2,Bl=(Math.SQRT1_2,Zl(2)),Xl=(Zl(Ul),180/Ul),Wl=Ul/180;function Vl(t){return t>1?Hl:t<-1?-Hl:Math.asin(t)}function Gl(t){return t>1?0:t<-1?Ul:Math.acos(t)}function Zl(t){return t>0?Math.sqrt(t):0}function Kl(t,n){var e,r=t*Fl(n),o=30;do{n-=e=(n+Fl(n)-r)/(1+Yl(n))}while($l(e)>ql&&--o>0);return n/2}var Jl=function(t,n,e){function r(r,o){return[t*r*Yl(o=Kl(e,o)),n*Fl(o)]}return r.invert=function(r,o){return o=Vl(o/n),[r/(t*Yl(o)),Vl((2*o+Fl(2*o))/e)]},r}(Bl/Hl,Bl,Ul);function Ql(){return Tu(Jl).scale(169.529)}var tc,nc,ec,rc,oc,ic,ac,uc,lc,cc,sc,fc,hc,dc,pc,vc,mc=1.0148,gc=.23185,yc=-.14499,_c=.02406,wc=1.790857183;function bc(t,n){var e=n*n;return[t,n*(mc+e*e*(gc+e*(yc+_c*e)))]}function xc(){return Tu(bc).scale(139.319)}bc.invert=function(t,n){n>wc?n=wc:n<-1.790857183&&(n=-1.790857183);var e,r=n;do{var o=r*r;r-=e=(r*(mc+o*o*(gc+o*(yc+_c*o)))-n)/(1.0148+o*o*(1.1592500000000001+o*(.21654*o-1.01493)))}while($l(e)>ql);return[t,r]};var Mc={sphere:Na,point:Ac,lineStart:Ec,lineEnd:kc,polygonStart:function(){Mc.lineStart=Dc,Mc.lineEnd=Pc},polygonEnd:function(){Mc.lineStart=Ec,Mc.lineEnd=kc}};function Ac(t,n){t*=ma;var e=wa(n*=ma);Tc(e*wa(t),e*Ma(t),Ma(n))}function Tc(t,n,e){++tc,ec+=(t-ec)/tc,rc+=(n-rc)/tc,oc+=(e-oc)/tc}function Ec(){Mc.point=Sc}function Sc(t,n){t*=ma;var e=wa(n*=ma);dc=e*wa(t),pc=e*Ma(t),vc=Ma(n),Mc.point=Nc,Tc(dc,pc,vc)}function Nc(t,n){t*=ma;var e=wa(n*=ma),r=e*wa(t),o=e*Ma(t),i=Ma(n),a=_a(Ta((a=pc*i-vc*o)*a+(a=vc*r-dc*i)*a+(a=dc*o-pc*r)*a),dc*r+pc*o+vc*i);nc+=a,ic+=a*(dc+(dc=r)),ac+=a*(pc+(pc=o)),uc+=a*(vc+(vc=i)),Tc(dc,pc,vc)}function kc(){Mc.point=Ac}function Dc(){Mc.point=Lc}function Pc(){jc(fc,hc),Mc.point=Ac}function Lc(t,n){fc=t,hc=n,t*=ma,n*=ma,Mc.point=jc;var e=wa(n);dc=e*wa(t),pc=e*Ma(t),vc=Ma(n),Tc(dc,pc,vc)}function jc(t,n){t*=ma;var e=wa(n*=ma),r=e*wa(t),o=e*Ma(t),i=Ma(n),a=pc*i-vc*o,u=vc*r-dc*i,l=dc*o-pc*r,c=xa(a,u,l),s=Ea(c),f=c&&-s/c;lc.add(f*a),cc.add(f*u),sc.add(f*l),nc+=s,ic+=s*(dc+(dc=r)),ac+=s*(pc+(pc=o)),uc+=s*(vc+(vc=i)),Tc(dc,pc,vc)}function Rc(t){tc=nc=ec=rc=oc=ic=ac=uc=0,lc=new Ra,cc=new Ra,sc=new Ra,hu(t,Mc);var n=+lc,e=+cc,r=+sc,o=xa(n,e,r);return o<1e-12&&(n=ic,e=ac,r=uc,nc<sa&&(n=ec,e=rc,r=oc),(o=xa(n,e,r))<1e-12)?[NaN,NaN]:[_a(e,n)*va,Ea(r/o)*va]}function Oc(t,n){var e=wa(n),r=wa(t)*e;return[e*Ma(t)/r,Ma(n)/r]}Oc.invert=Ou(ya);var $c,zc,Yc,Ic,Cc,Fc,qc,Uc,Hc,Bc,Xc,Wc,Vc,Gc,Zc,Kc,Jc=new Ra,Qc=new Ra,ts={point:Na,lineStart:Na,lineEnd:Na,polygonStart:function(){Jc=new Ra,ts.lineStart=ns,ts.lineEnd=es},polygonEnd:function(){var t=+Jc;Qc.add(t<0?pa+t:t),this.lineStart=this.lineEnd=this.point=Na},sphere:function(){Qc.add(pa)}};function ns(){ts.point=rs}function es(){os($c,zc)}function rs(t,n){ts.point=os,$c=t,zc=n,Yc=t*=ma,Ic=wa(n=(n*=ma)/2+da),Cc=Ma(n)}function os(t,n){var e=(t*=ma)-Yc,r=e>=0?1:-1,o=r*e,i=wa(n=(n*=ma)/2+da),a=Ma(n),u=Cc*a,l=Ic*i+u*wa(o),c=u*r*Ma(o);Jc.add(_a(c,l)),Yc=t,Ic=i,Cc=a}var is={point:as,lineStart:ls,lineEnd:cs,polygonStart:function(){is.point=ss,is.lineStart=fs,is.lineEnd=hs,Gc=new Ra,ts.polygonStart()},polygonEnd:function(){ts.polygonEnd(),is.point=as,is.lineStart=ls,is.lineEnd=cs,Jc<0?(Fc=-(Uc=180),qc=-(Hc=90)):Gc>sa?Hc=90:Gc<-sa&&(qc=-90),Kc[0]=Fc,Kc[1]=Uc},sphere:function(){Fc=-(Uc=180),qc=-(Hc=90)}};function as(t,n){Zc.push(Kc=[Fc=t,Uc=t]),n<qc&&(qc=n),n>Hc&&(Hc=n)}function us(t,n){var e=$a([t*ma,n*ma]);if(Vc){var r=Ya(Vc,e),o=Ya([r[1],-r[0],0],r);Fa(o),o=Oa(o);var i,a=t-Bc,u=a>0?1:-1,l=o[0]*va*u,c=ga(a)>180;c^(u*Bc<l&&l<u*t)?(i=o[1]*va)>Hc&&(Hc=i):c^(u*Bc<(l=(l+360)%360-180)&&l<u*t)?(i=-o[1]*va)<qc&&(qc=i):(n<qc&&(qc=n),n>Hc&&(Hc=n)),c?t<Bc?ds(Fc,t)>ds(Fc,Uc)&&(Uc=t):ds(t,Uc)>ds(Fc,Uc)&&(Fc=t):Uc>=Fc?(t<Fc&&(Fc=t),t>Uc&&(Uc=t)):t>Bc?ds(Fc,t)>ds(Fc,Uc)&&(Uc=t):ds(t,Uc)>ds(Fc,Uc)&&(Fc=t)}else Zc.push(Kc=[Fc=t,Uc=t]);n<qc&&(qc=n),n>Hc&&(Hc=n),Vc=e,Bc=t}function ls(){is.point=us}function cs(){Kc[0]=Fc,Kc[1]=Uc,is.point=as,Vc=null}function ss(t,n){if(Vc){var e=t-Bc;Gc.add(ga(e)>180?e+(e>0?360:-360):e)}else Xc=t,Wc=n;ts.point(t,n),us(t,n)}function fs(){ts.lineStart()}function hs(){ss(Xc,Wc),ts.lineEnd(),ga(Gc)>sa&&(Fc=-(Uc=180)),Kc[0]=Fc,Kc[1]=Uc,Vc=null}function ds(t,n){return(n-=t)<0?n+360:n}function ps(t,n){return t[0]-n[0]}function vs(t,n){return t[0]<=t[1]?t[0]<=n&&n<=t[1]:n<t[0]||t[1]<n}function ms(t,n){var e=t[0]*ma,r=t[1]*ma,o=n[0]*ma,i=n[1]*ma,a=wa(r),u=Ma(r),l=wa(i),c=Ma(i),s=a*wa(e),f=a*Ma(e),h=l*wa(o),d=l*Ma(o),p=2*Ea(Ta(Sa(i-r)+a*l*Sa(o-e))),v=Ma(p),m=p?function(t){var n=Ma(t*=p)/v,e=Ma(p-t)/v,r=e*s+n*h,o=e*f+n*d,i=e*u+n*c;return[_a(o,r)*va,_a(i,Ta(r*r+o*o))*va]}:function(){return[e*va,r*va]};return m.distance=p,m}function gs(t,n){return[t[0]*n[0]+t[1]*n[3],t[0]*n[1]+t[1]*n[4],t[0]*n[2]+t[1]*n[5]+t[2],t[3]*n[0]+t[4]*n[3],t[3]*n[1]+t[4]*n[4],t[3]*n[2]+t[4]*n[5]+t[5]]}function ys(t,n){return[t[0]-n[0],t[1]-n[1]]}function _s(t){return Zl(t[0]*t[0]+t[1]*t[1])}function ws(t,n){function e(t,e){var r,o=n(t,e),i=o.project([t*Xl,e*Xl]);return(r=o.transform)?[r[0]*i[0]+r[1]*i[1]+r[2],-(r[3]*i[0]+r[4]*i[1]+r[5])]:(i[1]=-i[1],i)}function r(t,e){var o,i,a=t.project.invert,u=t.transform,l=e;if(u&&(l=[(u=[(i=1/((o=u)[0]*o[4]-o[1]*o[3]))*o[4],-i*o[1],i*(o[1]*o[5]-o[2]*o[4]),-i*o[3],i*o[0],i*(o[2]*o[3]-o[0]*o[5])])[0]*l[0]+u[1]*l[1]+u[2],u[3]*l[0]+u[4]*l[1]+u[5]]),a&&t===function(t){return n(t[0]*Wl,t[1]*Wl)}(c=a(l)))return c;for(var c,s=t.children,f=0,h=s&&s.length;f<h;++f)if(c=r(s[f],e))return c}!function t(n,e){if(n.edges=function(t){for(var n=t.length,e=[],r=t[n-1],o=0;o<n;++o)e.push([r,r=t[o]]);return e}(n.face),e.face){var r=n.shared=function(t,n){for(var e,r,o=t.length,i=null,a=0;a<o;++a){e=t[a];for(var u=n.length;--u>=0;)if(r=n[u],e[0]===r[0]&&e[1]===r[1]){if(i)return[i,e];i=e}}}(n.face,e.face),o=(l=r.map(e.project),c=r.map(n.project),s=ys(l[1],l[0]),f=ys(c[1],c[0]),h=function(t,n){return zl(t[0]*n[1]-t[1]*n[0],t[0]*n[0]+t[1]*n[1])}(s,f),d=_s(s)/_s(f),gs([1,0,l[0][0],0,1,l[0][1]],gs([d,0,0,0,d,0],gs([Yl(h),Fl(h),0,-Fl(h),Yl(h),0],[1,0,-c[0][0],0,1,-c[0][1]]))));n.transform=e.transform?gs(e.transform,o):o;for(var i=e.edges,a=0,u=i.length;a<u;++a)xs(r[0],i[a][1])&&xs(r[1],i[a][0])&&(i[a]=n),xs(r[0],i[a][0])&&xs(r[1],i[a][1])&&(i[a]=n);for(a=0,u=(i=n.edges).length;a<u;++a)xs(r[0],i[a][0])&&xs(r[1],i[a][1])&&(i[a]=e),xs(r[0],i[a][1])&&xs(r[1],i[a][0])&&(i[a]=e)}else n.transform=e.transform;var l,c,s,f,h,d;return n.children&&n.children.forEach((function(e){t(e,n)})),n}(t,{transform:null}),Ms(t)&&(e.invert=function(n,e){var o=r(t,[n,-e]);return o&&(o[0]*=Wl,o[1]*=Wl,o)});var o=Tu(e),i=o.stream;return o.stream=function(n){var e=o.rotate(),r=i(n),a=(o.rotate([0,0]),i(n));return o.rotate(e),r.sphere=function(){a.polygonStart(),a.lineStart(),bs(a,t),a.lineEnd(),a.polygonEnd()},r},o.angle(-30)}function bs(t,n,e){var r,o,i=n.edges,a=i.length,u={type:"MultiPoint",coordinates:n.face},l=function(t){var n,e,r,o,i,a,u;if(Hc=Uc=-(Fc=qc=1/0),Zc=[],hu(t,is),e=Zc.length){for(Zc.sort(ps),n=1,i=[r=Zc[0]];n<e;++n)vs(r,(o=Zc[n])[0])||vs(r,o[1])?(ds(r[0],o[1])>ds(r[0],r[1])&&(r[1]=o[1]),ds(o[0],r[1])>ds(r[0],r[1])&&(r[0]=o[0])):i.push(r=o);for(a=-1/0,n=0,r=i[e=i.length-1];n<=e;r=o,++n)o=i[n],(u=ds(r[1],o[0]))>a&&(a=u,Fc=o[0],Uc=r[1])}return Zc=Kc=null,Fc===1/0||qc===1/0?[[NaN,NaN],[NaN,NaN]]:[[Fc,qc],[Uc,Hc]]}({type:"MultiPoint",coordinates:n.face.filter((function(t){return 90!==$l(t[1])}))}),c=!1,s=-1,f=l[1][0]-l[0][0],h=180===f||360===f?[(l[0][0]+l[1][0])/2,(l[0][1]+l[1][1])/2]:Rc(u);if(e)for(;++s<a&&i[s]!==e;);++s;for(var d=0;d<a;++d)o=i[(d+s)%a],Array.isArray(o)?(c||(t.point((r=ms(o[0],h)(ql))[0],r[1]),c=!0),t.point((r=ms(o[1],h)(ql))[0],r[1])):(c=!1,o!==e&&bs(t,o,n))}function xs(t,n){return t&&n&&t[0]===n[0]&&t[1]===n[1]}function Ms(t){return t.project.invert||t.children&&t.children.some(Ms)}var As=[[0,90],[-90,0],[0,0],[90,0],[180,0],[0,-90]];const Ts=[[0,2,1],[0,3,2],[5,1,2],[5,2,3],[0,1,4],[0,4,3],[5,4,1],[5,3,4]].map((function(t){return t.map((function(t){return As[t]}))}));function Es(t){t=t||function(t){var n=6===t.length?Rc({type:"MultiPoint",coordinates:t}):t[0];return Tu(Oc).scale(144.049).clipAngle(60).scale(1).translate([0,0]).rotate([-n[0],-n[1]])};var n=Ts.map((function(t){for(var n,e=t.map(ks),r=e.length,o=e[r-1],i=[],a=0;a<r;++a)n=e[a],i.push(Ns([.9486832980505138*o[0]+.31622776601683794*n[0],.9486832980505138*o[1]+.31622776601683794*n[1],.9486832980505138*o[2]+.31622776601683794*n[2]]),Ns([.9486832980505138*n[0]+.31622776601683794*o[0],.9486832980505138*n[1]+.31622776601683794*o[1],.9486832980505138*n[2]+.31622776601683794*o[2]])),o=n;return i})),e=[],r=[-1,0,0,1,0,1,4,5];n.forEach((function(t,o){for(var i,a,u=Ts[o],l=u.length,c=e[o]=[],s=0;s<l;++s)n.push([u[s],t[(2*s+2)%(2*l)],t[(2*s+1)%(2*l)]]),r.push(o),c.push((i=ks(t[(2*s+2)%(2*l)]),a=ks(t[(2*s+1)%(2*l)]),[i[1]*a[2]-i[2]*a[1],i[2]*a[0]-i[0]*a[2],i[0]*a[1]-i[1]*a[0]]))}));var o=n.map((function(n){return{project:t(n),face:n}}));return r.forEach((function(t,n){var e=o[t];e&&(e.children||(e.children=[])).push(o[n])})),ws(o[0],(function(t,n){var r=Yl(n),i=[r*Yl(t),r*Fl(t),Fl(n)],a=t<-Ul/2?n<0?6:4:t<0?n<0?2:0:t<Ul/2?n<0?3:1:n<0?7:5,u=e[a];return o[Ss(u[0],i)<0?8+3*a:Ss(u[1],i)<0?8+3*a+1:Ss(u[2],i)<0?8+3*a+2:a]})).angle(-30).scale(110.625).center([0,45])}function Ss(t,n){for(var e=0,r=t.length,o=0;e<r;++e)o+=t[e]*n[e];return o}function Ns(t){return[zl(t[1],t[0])*Xl,Vl(Il(-1,Cl(1,t[2])))*Xl]}function ks(t){var n=t[0]*Wl,e=t[1]*Wl,r=Yl(e);return[r*Yl(n),r*Fl(n),Fl(e)]}function Ds(t,n){var e=Yl(n),r=function(t){return t?t/Math.sin(t):1}(Gl(e*Yl(t/=2)));return[2*e*Fl(t)*r,Fl(n)*r]}function Ps(t,n){var e=Ds(t,n);return[(e[0]+t/Hl)/2,(e[1]+n)/2]}function Ls(){return Tu(Ps).scale(158.837)}function js(t,n,e,r,o){var i=t*t,a=i*t;return((1-3*t+3*i-a)*n+(4-6*i+3*a)*e+(1+3*t+3*i-3*a)*r+a*o)/6}function Rs(t){var n=t.length-1;return function(e){var r=e<=0?e=0:e>=1?(e=1,n-1):Math.floor(e*n),o=t[r],i=t[r+1],a=r>0?t[r-1]:2*o-i,u=r<n-1?t[r+2]:2*i-o;return js((e-r/n)*n,a,o,i,u)}}Ds.invert=function(t,n){if(!(t*t+4*n*n>Ul*Ul+ql)){var e=t,r=n,o=25;do{var i,a=Fl(e),u=Fl(e/2),l=Yl(e/2),c=Fl(r),s=Yl(r),f=Fl(2*r),h=c*c,d=s*s,p=u*u,v=1-d*l*l,m=v?Gl(s*l)*Zl(i=1/v):i=0,g=2*m*s*u-t,y=m*c-n,_=i*(d*p+m*s*l*h),w=i*(.5*a*f-2*m*c*u),b=.25*i*(f*u-m*c*d*a),x=i*(h*l+m*p*s),M=w*b-x*_;if(!M)break;var A=(y*w-g*x)/M,T=(g*b-y*_)/M;e-=A,r-=T}while(($l(A)>ql||$l(T)>ql)&&--o>0);return[e,r]}},Ps.invert=function(t,n){var e=t,r=n,o=25;do{var i,a=Yl(r),u=Fl(r),l=Fl(2*r),c=u*u,s=a*a,f=Fl(e),h=Yl(e/2),d=Fl(e/2),p=d*d,v=1-s*h*h,m=v?Gl(a*h)*Zl(i=1/v):i=0,g=.5*(2*m*a*d+e/Hl)-t,y=.5*(m*u+r)-n,_=.5*i*(s*p+m*a*h*c)+.5/Hl,w=i*(f*l/4-m*u*d),b=.125*i*(l*d-m*u*s*f),x=.5*i*(c*h+m*p*a)+.5,M=w*b-x*_,A=(y*w-g*x)/M,T=(g*b-y*_)/M;e-=A,r-=T}while(($l(A)>ql||$l(T)>ql)&&--o>0);return[e,r]};const Os=t=>()=>t;function $s(t,n){return function(e){return t+e*n}}function zs(t,n){var e=n-t;return e?$s(t,e>180||e<-180?e-360*Math.round(e/360):e):Os(isNaN(t)?n:t)}function Ys(t,n){var e=n-t;return e?$s(t,e):Os(isNaN(t)?n:t)}function Is(t){return function(n,e){var r=t((n=Xi(n)).h,(e=Xi(e)).h),o=Ys(n.c,e.c),i=Ys(n.l,e.l),a=Ys(n.opacity,e.opacity);return function(t){return n.h=r(t),n.c=o(t),n.l=i(t),n.opacity=a(t),n+""}}}const Cs=Is(zs);function Fs(t){return function(n,e){var r=t((n=Ei(n)).h,(e=Ei(e)).h),o=Ys(n.s,e.s),i=Ys(n.l,e.l),a=Ys(n.opacity,e.opacity);return function(t){return n.h=r(t),n.s=o(t),n.l=i(t),n.opacity=a(t),n+""}}}Is(Ys);const qs=Fs(zs);function Us(t,n){var e=Ys((t=Ii(t)).l,(n=Ii(n)).l),r=Ys(t.a,n.a),o=Ys(t.b,n.b),i=Ys(t.opacity,n.opacity);return function(n){return t.l=e(n),t.a=r(n),t.b=o(n),t.opacity=i(n),t+""}}Fs(Ys);const Hs=function t(n){var e=function(t){return 1==(t=+t)?Ys:function(n,e){return e-n?function(t,n,e){return t=Math.pow(t,e),n=Math.pow(n,e)-t,e=1/e,function(r){return Math.pow(t+r*n,e)}}(n,e,t):Os(isNaN(n)?e:n)}}(n);function r(t,n){var r=e((t=gi(t)).r,(n=gi(n)).r),o=e(t.g,n.g),i=e(t.b,n.b),a=Ys(t.opacity,n.opacity);return function(n){return t.r=r(n),t.g=o(n),t.b=i(n),t.opacity=a(n),t+""}}return r.gamma=t,r}(1);function Bs(t){return function(n){var e,r,o=n.length,i=new Array(o),a=new Array(o),u=new Array(o);for(e=0;e<o;++e)r=gi(n[e]),i[e]=r.r||0,a[e]=r.g||0,u[e]=r.b||0;return i=t(i),a=t(a),u=t(u),r.opacity=1,function(t){return r.r=i(t),r.g=a(t),r.b=u(t),r+""}}}var Xs=Bs(Rs);Bs((function(t){var n=t.length;return function(e){var r=Math.floor(((e%=1)<0?++e:e)*n),o=t[(r+n-1)%n],i=t[r%n],a=t[(r+1)%n],u=t[(r+2)%n];return js((e-r/n)*n,o,i,a,u)}}));const Ws=("application/json",Vs=function(t){return JSON.parse(t.responseText)},function(t,n){var e=Fr(t).mimeType("application/json").response(Vs);if(null!=n){if("function"!=typeof n)throw new Error("invalid callback: "+n);return e.get(n)}return e});var Vs,Gs=-.14861,Zs=1.78277,Ks=-.29227,Js=-.90649,Qs=1.97294,tf=Qs*Js,nf=Qs*Zs,ef=Zs*Ks-Js*Gs;function rf(t){if(t instanceof af)return new af(t.h,t.s,t.l,t.opacity);t instanceof yi||(t=mi(t));var n=t.r/255,e=t.g/255,r=t.b/255,o=(ef*r+tf*n-nf*e)/(ef+tf-nf),i=r-o,a=(Qs*(e-o)-Ks*i)/Js,u=Math.sqrt(a*a+i*i)/(Qs*o*(1-o)),l=u?Math.atan2(a,i)*Li-120:NaN;return new af(l<0?l+360:l,u,o,t.opacity)}function of(t,n,e,r){return 1===arguments.length?rf(t):new af(t,n,e,null==r?1:r)}function af(t,n,e,r){this.h=+t,this.s=+n,this.l=+e,this.opacity=+r}function uf(t){return function n(e){function r(n,r){var o=t((n=of(n)).h,(r=of(r)).h),i=Ys(n.s,r.s),a=Ys(n.l,r.l),u=Ys(n.opacity,r.opacity);return function(t){return n.h=o(t),n.s=i(t),n.l=a(Math.pow(t,e)),n.opacity=u(t),n+""}}return e=+e,r.gamma=n,r}(1)}Go(af,of,Zo(Ko,{brighter(t){return t=null==t?Qo:Math.pow(Qo,t),new af(this.h,this.s,this.l*t,this.opacity)},darker(t){return t=null==t?Jo:Math.pow(Jo,t),new af(this.h,this.s,this.l*t,this.opacity)},rgb(){var t=isNaN(this.h)?0:(this.h+120)*Pi,n=+this.l,e=isNaN(this.s)?0:this.s*n*(1-n),r=Math.cos(t),o=Math.sin(t);return new yi(255*(n+e*(Gs*r+Zs*o)),255*(n+e*(Ks*r+Js*o)),255*(n+e*(Qs*r)),this.opacity)}})),uf(zs);const lf=uf(Ys)(of(300,.5,0),of(-240,.5,1));function cf(t){for(var n=t.length/6|0,e=new Array(n),r=0;r<n;)e[r]="#"+t.slice(6*r,6*++r);return e}const sf=t=>Xs(t[t.length-1]),ff=sf(new Array(3).concat("ef8a62ffffff999999","ca0020f4a582bababa404040","ca0020f4a582ffffffbababa404040","b2182bef8a62fddbc7e0e0e09999994d4d4d","b2182bef8a62fddbc7ffffffe0e0e09999994d4d4d","b2182bd6604df4a582fddbc7e0e0e0bababa8787874d4d4d","b2182bd6604df4a582fddbc7ffffffe0e0e0bababa8787874d4d4d","67001fb2182bd6604df4a582fddbc7e0e0e0bababa8787874d4d4d1a1a1a","67001fb2182bd6604df4a582fddbc7ffffffe0e0e0bababa8787874d4d4d1a1a1a").map(cf)),hf=sf(new Array(3).concat("ffeda0feb24cf03b20","ffffb2fecc5cfd8d3ce31a1c","ffffb2fecc5cfd8d3cf03b20bd0026","ffffb2fed976feb24cfd8d3cf03b20bd0026","ffffb2fed976feb24cfd8d3cfc4e2ae31a1cb10026","ffffccffeda0fed976feb24cfd8d3cfc4e2ae31a1cb10026","ffffccffeda0fed976feb24cfd8d3cfc4e2ae31a1cbd0026800026").map(cf));function df(t,n){return t.target&&(t=Gi(t),void 0===n&&(n=t.currentTarget),t=t.touches||[t]),Array.from(t,(t=>Zi(t,n)))}function pf(t){return((t=Math.exp(t))+1/t)/2}const vf=function t(n,e,r){function o(t,o){var i,a,u=t[0],l=t[1],c=t[2],s=o[0],f=o[1],h=o[2],d=s-u,p=f-l,v=d*d+p*p;if(v<1e-12)a=Math.log(h/c)/n,i=function(t){return[u+t*d,l+t*p,c*Math.exp(n*t*a)]};else{var m=Math.sqrt(v),g=(h*h-c*c+r*v)/(2*c*e*m),y=(h*h-c*c-r*v)/(2*h*e*m),_=Math.log(Math.sqrt(g*g+1)-g),w=Math.log(Math.sqrt(y*y+1)-y);a=(w-_)/n,i=function(t){var r,o=t*a,i=pf(_),s=c/(e*m)*(i*(r=n*o+_,((r=Math.exp(2*r))-1)/(r+1))-function(t){return((t=Math.exp(t))-1/t)/2}(_));return[u+s*d,l+s*p,c*i/pf(n*o+_)]}}return i.duration=1e3*a*n/Math.SQRT2,i}return o.rho=function(n){var e=Math.max(.001,+n),r=e*e;return t(e,r,r*r)},o}(Math.SQRT2,2,4);var mf,gf,yf=0,_f=0,wf=0,bf=0,xf=0,Mf=0,Af="object"==typeof performance&&performance.now?performance:Date,Tf="object"==typeof window&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(t){setTimeout(t,17)};function Ef(){return xf||(Tf(Sf),xf=Af.now()+Mf)}function Sf(){xf=0}function Nf(){this._call=this._time=this._next=null}function kf(t,n,e){var r=new Nf;return r.restart(t,n,e),r}function Df(){xf=(bf=Af.now())+Mf,yf=_f=0;try{!function(){Ef(),++yf;for(var t,n=mf;n;)(t=xf-n._time)>=0&&n._call.call(void 0,t),n=n._next;--yf}()}finally{yf=0,function(){for(var t,n,e=mf,r=1/0;e;)e._call?(r>e._time&&(r=e._time),t=e,e=e._next):(n=e._next,e._next=null,e=t?t._next=n:mf=n);gf=t,Lf(r)}(),xf=0}}function Pf(){var t=Af.now(),n=t-bf;n>1e3&&(Mf-=n,bf=t)}function Lf(t){yf||(_f&&(_f=clearTimeout(_f)),t-xf>24?(t<1/0&&(_f=setTimeout(Df,t-Af.now()-Mf)),wf&&(wf=clearInterval(wf))):(wf||(bf=Af.now(),wf=setInterval(Pf,1e3)),yf=1,Tf(Df)))}function jf(t,n,e){var r=new Nf;return n=null==n?0:+n,r.restart((e=>{r.stop(),t(e+n)}),n,e),r}Nf.prototype=kf.prototype={constructor:Nf,restart:function(t,n,e){if("function"!=typeof t)throw new TypeError("callback is not a function");e=(null==e?Ef():+e)+(null==n?0:+n),this._next||gf===this||(gf?gf._next=this:mf=this,gf=this),this._call=t,this._time=e,Lf()},stop:function(){this._call&&(this._call=null,this._time=1/0,Lf())}};var Rf=xr("start","end","cancel","interrupt"),Of=[];function $f(t,n,e,r,o,i){var a=t.__transition;if(a){if(e in a)return}else t.__transition={};!function(t,n,e){var r,o=t.__transition;function i(l){var c,s,f,h;if(1!==e.state)return u();for(c in o)if((h=o[c]).name===e.name){if(3===h.state)return jf(i);4===h.state?(h.state=6,h.timer.stop(),h.on.call("interrupt",t,t.__data__,h.index,h.group),delete o[c]):+c<n&&(h.state=6,h.timer.stop(),h.on.call("cancel",t,t.__data__,h.index,h.group),delete o[c])}if(jf((function(){3===e.state&&(e.state=4,e.timer.restart(a,e.delay,e.time),a(l))})),e.state=2,e.on.call("start",t,t.__data__,e.index,e.group),2===e.state){for(e.state=3,r=new Array(f=e.tween.length),c=0,s=-1;c<f;++c)(h=e.tween[c].value.call(t,t.__data__,e.index,e.group))&&(r[++s]=h);r.length=s+1}}function a(n){for(var o=n<e.duration?e.ease.call(null,n/e.duration):(e.timer.restart(u),e.state=5,1),i=-1,a=r.length;++i<a;)r[i].call(t,o);5===e.state&&(e.on.call("end",t,t.__data__,e.index,e.group),u())}function u(){for(var r in e.state=6,e.timer.stop(),delete o[n],o)return;delete t.__transition}o[n]=e,e.timer=kf((function(t){e.state=1,e.timer.restart(i,e.delay,e.time),e.delay<=t&&i(t-e.delay)}),0,e.time)}(t,e,{name:n,index:r,group:o,on:Rf,tween:Of,time:i.time,delay:i.delay,duration:i.duration,ease:i.ease,timer:null,state:0})}function zf(t,n){var e=If(t,n);if(e.state>0)throw new Error("too late; already scheduled");return e}function Yf(t,n){var e=If(t,n);if(e.state>3)throw new Error("too late; already running");return e}function If(t,n){var e=t.__transition;if(!e||!(e=e[n]))throw new Error("transition not found");return e}function Cf(t,n){var e,r,o,i=t.__transition,a=!0;if(i){for(o in n=null==n?null:n+"",i)(e=i[o]).name===n?(r=e.state>2&&e.state<5,e.state=6,e.timer.stop(),e.on.call(r?"interrupt":"cancel",t,t.__data__,e.index,e.group),delete i[o]):a=!1;a&&delete t.__transition}}function Ff(t,n){return t=+t,n=+n,function(e){return t*(1-e)+n*e}}var qf,Uf=180/Math.PI,Hf={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function Bf(t,n,e,r,o,i){var a,u,l;return(a=Math.sqrt(t*t+n*n))&&(t/=a,n/=a),(l=t*e+n*r)&&(e-=t*l,r-=n*l),(u=Math.sqrt(e*e+r*r))&&(e/=u,r/=u,l/=u),t*r<n*e&&(t=-t,n=-n,l=-l,a=-a),{translateX:o,translateY:i,rotate:Math.atan2(n,t)*Uf,skewX:Math.atan(l)*Uf,scaleX:a,scaleY:u}}function Xf(t,n,e,r){function o(t){return t.length?t.pop()+" ":""}return function(i,a){var u=[],l=[];return i=t(i),a=t(a),function(t,r,o,i,a,u){if(t!==o||r!==i){var l=a.push("translate(",null,n,null,e);u.push({i:l-4,x:Ff(t,o)},{i:l-2,x:Ff(r,i)})}else(o||i)&&a.push("translate("+o+n+i+e)}(i.translateX,i.translateY,a.translateX,a.translateY,u,l),function(t,n,e,i){t!==n?(t-n>180?n+=360:n-t>180&&(t+=360),i.push({i:e.push(o(e)+"rotate(",null,r)-2,x:Ff(t,n)})):n&&e.push(o(e)+"rotate("+n+r)}(i.rotate,a.rotate,u,l),function(t,n,e,i){t!==n?i.push({i:e.push(o(e)+"skewX(",null,r)-2,x:Ff(t,n)}):n&&e.push(o(e)+"skewX("+n+r)}(i.skewX,a.skewX,u,l),function(t,n,e,r,i,a){if(t!==e||n!==r){var u=i.push(o(i)+"scale(",null,",",null,")");a.push({i:u-4,x:Ff(t,e)},{i:u-2,x:Ff(n,r)})}else 1===e&&1===r||i.push(o(i)+"scale("+e+","+r+")")}(i.scaleX,i.scaleY,a.scaleX,a.scaleY,u,l),i=a=null,function(t){for(var n,e=-1,r=l.length;++e<r;)u[(n=l[e]).i]=n.x(t);return u.join("")}}}var Wf=Xf((function(t){const n=new("function"==typeof DOMMatrix?DOMMatrix:WebKitCSSMatrix)(t+"");return n.isIdentity?Hf:Bf(n.a,n.b,n.c,n.d,n.e,n.f)}),"px, ","px)","deg)"),Vf=Xf((function(t){return null==t?Hf:(qf||(qf=document.createElementNS("http://www.w3.org/2000/svg","g")),qf.setAttribute("transform",t),(t=qf.transform.baseVal.consolidate())?Bf((t=t.matrix).a,t.b,t.c,t.d,t.e,t.f):Hf)}),", ",")",")");function Gf(t,n){var e,r;return function(){var o=Yf(this,t),i=o.tween;if(i!==e)for(var a=0,u=(r=e=i).length;a<u;++a)if(r[a].name===n){(r=r.slice()).splice(a,1);break}o.tween=r}}function Zf(t,n,e){var r,o;if("function"!=typeof e)throw new Error;return function(){var i=Yf(this,t),a=i.tween;if(a!==r){o=(r=a).slice();for(var u={name:n,value:e},l=0,c=o.length;l<c;++l)if(o[l].name===n){o[l]=u;break}l===c&&o.push(u)}i.tween=o}}function Kf(t,n,e){var r=t._id;return t.each((function(){var t=Yf(this,r);(t.value||(t.value={}))[n]=e.apply(this,arguments)})),function(t){return If(t,r).value[n]}}var Jf=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,Qf=new RegExp(Jf.source,"g");function th(t,n){var e,r,o,i=Jf.lastIndex=Qf.lastIndex=0,a=-1,u=[],l=[];for(t+="",n+="";(e=Jf.exec(t))&&(r=Qf.exec(n));)(o=r.index)>i&&(o=n.slice(i,o),u[a]?u[a]+=o:u[++a]=o),(e=e[0])===(r=r[0])?u[a]?u[a]+=r:u[++a]=r:(u[++a]=null,l.push({i:a,x:Ff(e,r)})),i=Qf.lastIndex;return i<n.length&&(o=n.slice(i),u[a]?u[a]+=o:u[++a]=o),u.length<2?l[0]?function(t){return function(n){return t(n)+""}}(l[0].x):function(t){return function(){return t}}(n):(n=l.length,function(t){for(var e,r=0;r<n;++r)u[(e=l[r]).i]=e.x(t);return u.join("")})}function nh(t,n){var e;return("number"==typeof n?Ff:n instanceof di?Hs:(e=di(n))?(n=e,Hs):th)(t,n)}function eh(t){return function(){this.removeAttribute(t)}}function rh(t){return function(){this.removeAttributeNS(t.space,t.local)}}function oh(t,n,e){var r,o,i=e+"";return function(){var a=this.getAttribute(t);return a===i?null:a===r?o:o=n(r=a,e)}}function ih(t,n,e){var r,o,i=e+"";return function(){var a=this.getAttributeNS(t.space,t.local);return a===i?null:a===r?o:o=n(r=a,e)}}function ah(t,n,e){var r,o,i;return function(){var a,u,l=e(this);if(null!=l)return(a=this.getAttribute(t))===(u=l+"")?null:a===r&&u===o?i:(o=u,i=n(r=a,l));this.removeAttribute(t)}}function uh(t,n,e){var r,o,i;return function(){var a,u,l=e(this);if(null!=l)return(a=this.getAttributeNS(t.space,t.local))===(u=l+"")?null:a===r&&u===o?i:(o=u,i=n(r=a,l));this.removeAttributeNS(t.space,t.local)}}function lh(t,n){return function(e){this.setAttribute(t,n.call(this,e))}}function ch(t,n){return function(e){this.setAttributeNS(t.space,t.local,n.call(this,e))}}function sh(t,n){var e,r;function o(){var o=n.apply(this,arguments);return o!==r&&(e=(r=o)&&ch(t,o)),e}return o._value=n,o}function fh(t,n){var e,r;function o(){var o=n.apply(this,arguments);return o!==r&&(e=(r=o)&&lh(t,o)),e}return o._value=n,o}function hh(t,n){return function(){zf(this,t).delay=+n.apply(this,arguments)}}function dh(t,n){return n=+n,function(){zf(this,t).delay=n}}function ph(t,n){return function(){Yf(this,t).duration=+n.apply(this,arguments)}}function vh(t,n){return n=+n,function(){Yf(this,t).duration=n}}function mh(t,n){if("function"!=typeof n)throw new Error;return function(){Yf(this,t).ease=n}}function gh(t,n,e){var r,o,i=function(t){return(t+"").trim().split(/^|\s+/).every((function(t){var n=t.indexOf(".");return n>=0&&(t=t.slice(0,n)),!t||"start"===t}))}(n)?zf:Yf;return function(){var a=i(this,t),u=a.on;u!==r&&(o=(r=u).copy()).on(n,e),a.on=o}}var yh=Yt.prototype.constructor;function _h(t){return function(){this.style.removeProperty(t)}}function wh(t,n,e){return function(r){this.style.setProperty(t,n.call(this,r),e)}}function bh(t,n,e){var r,o;function i(){var i=n.apply(this,arguments);return i!==o&&(r=(o=i)&&wh(t,i,e)),r}return i._value=n,i}function xh(t){return function(n){this.textContent=t.call(this,n)}}function Mh(t){var n,e;function r(){var r=t.apply(this,arguments);return r!==e&&(n=(e=r)&&xh(r)),n}return r._value=t,r}var Ah=0;function Th(t,n,e,r){this._groups=t,this._parents=n,this._name=e,this._id=r}function Eh(){return++Ah}var Sh=Yt.prototype;Th.prototype=function(t){return Yt().transition(t)}.prototype={constructor:Th,select:function(t){var n=this._name,e=this._id;"function"!=typeof t&&(t=N(t));for(var r=this._groups,o=r.length,i=new Array(o),a=0;a<o;++a)for(var u,l,c=r[a],s=c.length,f=i[a]=new Array(s),h=0;h<s;++h)(u=c[h])&&(l=t.call(u,u.__data__,h,c))&&("__data__"in u&&(l.__data__=u.__data__),f[h]=l,$f(f[h],n,e,h,f,If(u,e)));return new Th(i,this._parents,n,e)},selectAll:function(t){var n=this._name,e=this._id;"function"!=typeof t&&(t=T(t));for(var r=this._groups,o=r.length,i=[],a=[],u=0;u<o;++u)for(var l,c=r[u],s=c.length,f=0;f<s;++f)if(l=c[f]){for(var h,d=t.call(l,l.__data__,f,c),p=If(l,e),v=0,m=d.length;v<m;++v)(h=d[v])&&$f(h,n,e,v,d,p);i.push(d),a.push(l)}return new Th(i,a,n,e)},selectChild:Sh.selectChild,selectChildren:Sh.selectChildren,filter:function(t){"function"!=typeof t&&(t=k(t));for(var n=this._groups,e=n.length,r=new Array(e),o=0;o<e;++o)for(var i,a=n[o],u=a.length,l=r[o]=[],c=0;c<u;++c)(i=a[c])&&t.call(i,i.__data__,c,a)&&l.push(i);return new Th(r,this._parents,this._name,this._id)},merge:function(t){if(t._id!==this._id)throw new Error;for(var n=this._groups,e=t._groups,r=n.length,o=e.length,i=Math.min(r,o),a=new Array(r),u=0;u<i;++u)for(var l,c=n[u],s=e[u],f=c.length,h=a[u]=new Array(f),d=0;d<f;++d)(l=c[d]||s[d])&&(h[d]=l);for(;u<r;++u)a[u]=n[u];return new Th(a,this._parents,this._name,this._id)},selection:function(){return new yh(this._groups,this._parents)},transition:function(){for(var t=this._name,n=this._id,e=Eh(),r=this._groups,o=r.length,i=0;i<o;++i)for(var a,u=r[i],l=u.length,c=0;c<l;++c)if(a=u[c]){var s=If(a,n);$f(a,t,e,c,u,{time:s.time+s.delay+s.duration,delay:0,duration:s.duration,ease:s.ease})}return new Th(r,this._parents,t,e)},call:Sh.call,nodes:Sh.nodes,node:Sh.node,size:Sh.size,empty:Sh.empty,each:Sh.each,on:function(t,n){var e=this._id;return arguments.length<2?If(this.node(),e).on.on(t):this.each(gh(e,t,n))},attr:function(t,n){var e=B(t),r="transform"===e?Vf:nh;return this.attrTween(t,"function"==typeof n?(e.local?uh:ah)(e,r,Kf(this,"attr."+t,n)):null==n?(e.local?rh:eh)(e):(e.local?ih:oh)(e,r,n))},attrTween:function(t,n){var e="attr."+t;if(arguments.length<2)return(e=this.tween(e))&&e._value;if(null==n)return this.tween(e,null);if("function"!=typeof n)throw new Error;var r=B(t);return this.tween(e,(r.local?sh:fh)(r,n))},style:function(t,n,e){var r="transform"==(t+="")?Wf:nh;return null==n?this.styleTween(t,function(t,n){var e,r,o;return function(){var i=et(this,t),a=(this.style.removeProperty(t),et(this,t));return i===a?null:i===e&&a===r?o:o=n(e=i,r=a)}}(t,r)).on("end.style."+t,_h(t)):"function"==typeof n?this.styleTween(t,function(t,n,e){var r,o,i;return function(){var a=et(this,t),u=e(this),l=u+"";return null==u&&(this.style.removeProperty(t),l=u=et(this,t)),a===l?null:a===r&&l===o?i:(o=l,i=n(r=a,u))}}(t,r,Kf(this,"style."+t,n))).each(function(t,n){var e,r,o,i,a="style."+n,u="end."+a;return function(){var l=Yf(this,t),c=l.on,s=null==l.value[a]?i||(i=_h(n)):void 0;c===e&&o===s||(r=(e=c).copy()).on(u,o=s),l.on=r}}(this._id,t)):this.styleTween(t,function(t,n,e){var r,o,i=e+"";return function(){var a=et(this,t);return a===i?null:a===r?o:o=n(r=a,e)}}(t,r,n),e).on("end.style."+t,null)},styleTween:function(t,n,e){var r="style."+(t+="");if(arguments.length<2)return(r=this.tween(r))&&r._value;if(null==n)return this.tween(r,null);if("function"!=typeof n)throw new Error;return this.tween(r,bh(t,n,null==e?"":e))},text:function(t){return this.tween("text","function"==typeof t?function(t){return function(){var n=t(this);this.textContent=null==n?"":n}}(Kf(this,"text",t)):function(t){return function(){this.textContent=t}}(null==t?"":t+""))},textTween:function(t){var n="text";if(arguments.length<1)return(n=this.tween(n))&&n._value;if(null==t)return this.tween(n,null);if("function"!=typeof t)throw new Error;return this.tween(n,Mh(t))},remove:function(){return this.on("end.remove",function(t){return function(){var n=this.parentNode;for(var e in this.__transition)if(+e!==t)return;n&&n.removeChild(this)}}(this._id))},tween:function(t,n){var e=this._id;if(t+="",arguments.length<2){for(var r,o=If(this.node(),e).tween,i=0,a=o.length;i<a;++i)if((r=o[i]).name===t)return r.value;return null}return this.each((null==n?Gf:Zf)(e,t,n))},delay:function(t){var n=this._id;return arguments.length?this.each(("function"==typeof t?hh:dh)(n,t)):If(this.node(),n).delay},duration:function(t){var n=this._id;return arguments.length?this.each(("function"==typeof t?ph:vh)(n,t)):If(this.node(),n).duration},ease:function(t){var n=this._id;return arguments.length?this.each(mh(n,t)):If(this.node(),n).ease},easeVarying:function(t){if("function"!=typeof t)throw new Error;return this.each(function(t,n){return function(){var e=n.apply(this,arguments);if("function"!=typeof e)throw new Error;Yf(this,t).ease=e}}(this._id,t))},end:function(){var t,n,e=this,r=e._id,o=e.size();return new Promise((function(i,a){var u={value:a},l={value:function(){0==--o&&i()}};e.each((function(){var e=Yf(this,r),o=e.on;o!==t&&((n=(t=o).copy())._.cancel.push(u),n._.interrupt.push(u),n._.end.push(l)),e.on=n})),0===o&&i()}))},[Symbol.iterator]:Sh[Symbol.iterator]};var Nh={time:null,delay:0,duration:250,ease:function(t){return((t*=2)<=1?t*t*t:(t-=2)*t*t+2)/2}};function kh(t,n){for(var e;!(e=t.__transition)||!(e=e[n]);)if(!(t=t.parentNode))throw new Error(`transition ${n} not found`);return e}Yt.prototype.interrupt=function(t){return this.each((function(){Cf(this,t)}))},Yt.prototype.transition=function(t){var n,e;t instanceof Th?(n=t._id,t=t._name):(n=Eh(),(e=Nh).time=Ef(),t=null==t?null:t+"");for(var r=this._groups,o=r.length,i=0;i<o;++i)for(var a,u=r[i],l=u.length,c=0;c<l;++c)(a=u[c])&&$f(a,t,n,c,u,e||kh(a,n));return new Th(r,this._parents,t,n)};const Dh=t=>()=>t;function Ph(t,n){let{sourceEvent:e,target:r,transform:o,dispatch:i}=n;Object.defineProperties(this,{type:{value:t,enumerable:!0,configurable:!0},sourceEvent:{value:e,enumerable:!0,configurable:!0},target:{value:r,enumerable:!0,configurable:!0},transform:{value:o,enumerable:!0,configurable:!0},_:{value:i}})}function Lh(t,n,e){this.k=t,this.x=n,this.y=e}Lh.prototype={constructor:Lh,scale:function(t){return 1===t?this:new Lh(this.k*t,this.x,this.y)},translate:function(t,n){return 0===t&0===n?this:new Lh(this.k,this.x+this.k*t,this.y+this.k*n)},apply:function(t){return[t[0]*this.k+this.x,t[1]*this.k+this.y]},applyX:function(t){return t*this.k+this.x},applyY:function(t){return t*this.k+this.y},invert:function(t){return[(t[0]-this.x)/this.k,(t[1]-this.y)/this.k]},invertX:function(t){return(t-this.x)/this.k},invertY:function(t){return(t-this.y)/this.k},rescaleX:function(t){return t.copy().domain(t.range().map(this.invertX,this).map(t.invert,t))},rescaleY:function(t){return t.copy().domain(t.range().map(this.invertY,this).map(t.invert,t))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};var jh=new Lh(1,0,0);function Rh(t){t.stopImmediatePropagation()}function Oh(t){t.preventDefault(),t.stopImmediatePropagation()}function $h(t){return!(t.ctrlKey&&"wheel"!==t.type||t.button)}function zh(){var t=this;return t instanceof SVGElement?(t=t.ownerSVGElement||t).hasAttribute("viewBox")?[[(t=t.viewBox.baseVal).x,t.y],[t.x+t.width,t.y+t.height]]:[[0,0],[t.width.baseVal.value,t.height.baseVal.value]]:[[0,0],[t.clientWidth,t.clientHeight]]}function Yh(){return this.__zoom||jh}function Ih(t){return-t.deltaY*(1===t.deltaMode?.05:t.deltaMode?1:.002)*(t.ctrlKey?10:1)}function Ch(){return navigator.maxTouchPoints||"ontouchstart"in this}function Fh(t,n,e){var r=t.invertX(n[0][0])-e[0][0],o=t.invertX(n[1][0])-e[1][0],i=t.invertY(n[0][1])-e[0][1],a=t.invertY(n[1][1])-e[1][1];return t.translate(o>r?(r+o)/2:Math.min(0,r)||Math.max(0,o),a>i?(i+a)/2:Math.min(0,i)||Math.max(0,a))}function qh(){var t,n,e,r=$h,o=zh,i=Fh,a=Ih,u=Ch,l=[0,1/0],c=[[-1/0,-1/0],[1/0,1/0]],s=250,f=vf,h=xr("start","zoom","end"),d=500,p=0,v=10;function m(t){t.property("__zoom",Yh).on("wheel.zoom",M,{passive:!1}).on("mousedown.zoom",A).on("dblclick.zoom",T).filter(u).on("touchstart.zoom",E).on("touchmove.zoom",S).on("touchend.zoom touchcancel.zoom",N).style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}function g(t,n){return(n=Math.max(l[0],Math.min(l[1],n)))===t.k?t:new Lh(n,t.x,t.y)}function y(t,n,e){var r=n[0]-e[0]*t.k,o=n[1]-e[1]*t.k;return r===t.x&&o===t.y?t:new Lh(t.k,r,o)}function _(t){return[(+t[0][0]+ +t[1][0])/2,(+t[0][1]+ +t[1][1])/2]}function w(t,n,e,r){t.on("start.zoom",(function(){b(this,arguments).event(r).start()})).on("interrupt.zoom end.zoom",(function(){b(this,arguments).event(r).end()})).tween("zoom",(function(){var t=this,i=arguments,a=b(t,i).event(r),u=o.apply(t,i),l=null==e?_(u):"function"==typeof e?e.apply(t,i):e,c=Math.max(u[1][0]-u[0][0],u[1][1]-u[0][1]),s=t.__zoom,h="function"==typeof n?n.apply(t,i):n,d=f(s.invert(l).concat(c/s.k),h.invert(l).concat(c/h.k));return function(t){if(1===t)t=h;else{var n=d(t),e=c/n[2];t=new Lh(e,l[0]-n[0]*e,l[1]-n[1]*e)}a.zoom(null,t)}}))}function b(t,n,e){return!e&&t.__zooming||new x(t,n)}function x(t,n){this.that=t,this.args=n,this.active=0,this.sourceEvent=null,this.extent=o.apply(t,n),this.taps=0}function M(t){for(var n=arguments.length,e=new Array(n>1?n-1:0),o=1;o<n;o++)e[o-1]=arguments[o];if(r.apply(this,arguments)){var u=b(this,e).event(t),s=this.__zoom,f=Math.max(l[0],Math.min(l[1],s.k*Math.pow(2,a.apply(this,arguments)))),h=Zi(t);if(u.wheel)u.mouse[0][0]===h[0]&&u.mouse[0][1]===h[1]||(u.mouse[1]=s.invert(u.mouse[0]=h)),clearTimeout(u.wheel);else{if(s.k===f)return;u.mouse=[h,s.invert(h)],Cf(this),u.start()}Oh(t),u.wheel=setTimeout(d,150),u.zoom("mouse",i(y(g(s,f),u.mouse[0],u.mouse[1]),u.extent,c))}function d(){u.wheel=null,u.end()}}function A(t){for(var n=arguments.length,o=new Array(n>1?n-1:0),a=1;a<n;a++)o[a-1]=arguments[a];if(!e&&r.apply(this,arguments)){var u=t.currentTarget,l=b(this,o,!0).event(t),s=Ct(t.view).on("mousemove.zoom",v,!0).on("mouseup.zoom",m,!0),f=Zi(t,u),h=t.clientX,d=t.clientY;na(t.view),Rh(t),l.mouse=[f,this.__zoom.invert(f)],Cf(this),l.start()}function v(t){if(Oh(t),!l.moved){var n=t.clientX-h,e=t.clientY-d;l.moved=n*n+e*e>p}l.event(t).zoom("mouse",i(y(l.that.__zoom,l.mouse[0]=Zi(t,u),l.mouse[1]),l.extent,c))}function m(t){s.on("mousemove.zoom mouseup.zoom",null),ea(t.view,l.moved),Oh(t),l.event(t).end()}}function T(t){for(var n=arguments.length,e=new Array(n>1?n-1:0),a=1;a<n;a++)e[a-1]=arguments[a];if(r.apply(this,arguments)){var u=this.__zoom,l=Zi(t.changedTouches?t.changedTouches[0]:t,this),f=u.invert(l),h=u.k*(t.shiftKey?.5:2),d=i(y(g(u,h),l,f),o.apply(this,e),c);Oh(t),s>0?Ct(this).transition().duration(s).call(w,d,l,t):Ct(this).call(m.transform,d,l,t)}}function E(e){for(var o=arguments.length,i=new Array(o>1?o-1:0),a=1;a<o;a++)i[a-1]=arguments[a];if(r.apply(this,arguments)){var u,l,c,s,f=e.touches,h=f.length,p=b(this,i,e.changedTouches.length===h).event(e);for(Rh(e),l=0;l<h;++l)s=[s=Zi(c=f[l],this),this.__zoom.invert(s),c.identifier],p.touch0?p.touch1||p.touch0[2]===s[2]||(p.touch1=s,p.taps=0):(p.touch0=s,u=!0,p.taps=1+!!t);t&&(t=clearTimeout(t)),u&&(p.taps<2&&(n=s[0],t=setTimeout((function(){t=null}),d)),Cf(this),p.start())}}function S(t){if(this.__zooming){for(var n=arguments.length,e=new Array(n>1?n-1:0),r=1;r<n;r++)e[r-1]=arguments[r];var o,a,u,l,s=b(this,e).event(t),f=t.changedTouches,h=f.length;for(Oh(t),o=0;o<h;++o)u=Zi(a=f[o],this),s.touch0&&s.touch0[2]===a.identifier?s.touch0[0]=u:s.touch1&&s.touch1[2]===a.identifier&&(s.touch1[0]=u);if(a=s.that.__zoom,s.touch1){var d=s.touch0[0],p=s.touch0[1],v=s.touch1[0],m=s.touch1[1],_=(_=v[0]-d[0])*_+(_=v[1]-d[1])*_,w=(w=m[0]-p[0])*w+(w=m[1]-p[1])*w;a=g(a,Math.sqrt(_/w)),u=[(d[0]+v[0])/2,(d[1]+v[1])/2],l=[(p[0]+m[0])/2,(p[1]+m[1])/2]}else{if(!s.touch0)return;u=s.touch0[0],l=s.touch0[1]}s.zoom("touch",i(y(a,u,l),s.extent,c))}}function N(t){for(var r=arguments.length,o=new Array(r>1?r-1:0),i=1;i<r;i++)o[i-1]=arguments[i];if(this.__zooming){var a,u,l=b(this,o).event(t),c=t.changedTouches,s=c.length;for(Rh(t),e&&clearTimeout(e),e=setTimeout((function(){e=null}),d),a=0;a<s;++a)u=c[a],l.touch0&&l.touch0[2]===u.identifier?delete l.touch0:l.touch1&&l.touch1[2]===u.identifier&&delete l.touch1;if(l.touch1&&!l.touch0&&(l.touch0=l.touch1,delete l.touch1),l.touch0)l.touch0[1]=this.__zoom.invert(l.touch0[0]);else if(l.end(),2===l.taps&&(u=Zi(u,this),Math.hypot(n[0]-u[0],n[1]-u[1])<v)){var f=Ct(this).on("dblclick.zoom");f&&f.apply(this,arguments)}}}return m.transform=function(t,n,e,r){var o=t.selection?t.selection():t;o.property("__zoom",Yh),t!==o?w(t,n,e,r):o.interrupt().each((function(){b(this,arguments).event(r).start().zoom(null,"function"==typeof n?n.apply(this,arguments):n).end()}))},m.scaleBy=function(t,n,e,r){m.scaleTo(t,(function(){var t=this.__zoom.k,e="function"==typeof n?n.apply(this,arguments):n;return t*e}),e,r)},m.scaleTo=function(t,n,e,r){m.transform(t,(function(){var t=o.apply(this,arguments),r=this.__zoom,a=null==e?_(t):"function"==typeof e?e.apply(this,arguments):e,u=r.invert(a),l="function"==typeof n?n.apply(this,arguments):n;return i(y(g(r,l),a,u),t,c)}),e,r)},m.translateBy=function(t,n,e,r){m.transform(t,(function(){return i(this.__zoom.translate("function"==typeof n?n.apply(this,arguments):n,"function"==typeof e?e.apply(this,arguments):e),o.apply(this,arguments),c)}),null,r)},m.translateTo=function(t,n,e,r,a){m.transform(t,(function(){var t=o.apply(this,arguments),a=this.__zoom,u=null==r?_(t):"function"==typeof r?r.apply(this,arguments):r;return i(jh.translate(u[0],u[1]).scale(a.k).translate("function"==typeof n?-n.apply(this,arguments):-n,"function"==typeof e?-e.apply(this,arguments):-e),t,c)}),r,a)},x.prototype={event:function(t){return t&&(this.sourceEvent=t),this},start:function(){return 1==++this.active&&(this.that.__zooming=this,this.emit("start")),this},zoom:function(t,n){return this.mouse&&"mouse"!==t&&(this.mouse[1]=n.invert(this.mouse[0])),this.touch0&&"touch"!==t&&(this.touch0[1]=n.invert(this.touch0[0])),this.touch1&&"touch"!==t&&(this.touch1[1]=n.invert(this.touch1[0])),this.that.__zoom=n,this.emit("zoom"),this},end:function(){return 0==--this.active&&(delete this.that.__zooming,this.emit("end")),this},emit:function(t){var n=Ct(this.that).datum();h.call(t,this.that,new Ph(t,{sourceEvent:this.sourceEvent,target:m,type:t,transform:this.that.__zoom,dispatch:h}),n)}},m.wheelDelta=function(t){return arguments.length?(a="function"==typeof t?t:Dh(+t),m):a},m.filter=function(t){return arguments.length?(r="function"==typeof t?t:Dh(!!t),m):r},m.touchable=function(t){return arguments.length?(u="function"==typeof t?t:Dh(!!t),m):u},m.extent=function(t){return arguments.length?(o="function"==typeof t?t:Dh([[+t[0][0],+t[0][1]],[+t[1][0],+t[1][1]]]),m):o},m.scaleExtent=function(t){return arguments.length?(l[0]=+t[0],l[1]=+t[1],m):[l[0],l[1]]},m.translateExtent=function(t){return arguments.length?(c[0][0]=+t[0][0],c[1][0]=+t[1][0],c[0][1]=+t[0][1],c[1][1]=+t[1][1],m):[[c[0][0],c[0][1]],[c[1][0],c[1][1]]]},m.constrain=function(t){return arguments.length?(i=t,m):i},m.duration=function(t){return arguments.length?(s=+t,m):s},m.interpolate=function(t){return arguments.length?(f=t,m):f},m.on=function(){var t=h.on.apply(h,arguments);return t===h?m:t},m.clickDistance=function(t){return arguments.length?(p=(t=+t)*t,m):Math.sqrt(p)},m.tapDistance=function(t){return arguments.length?(v=+t,m):v},m}function Uh(t){return null===t}function Hh(t){return void 0===t}function Bh(t){return!(!t||1!==t.nodeType)}Lh.prototype;const Xh=_n("Date"),Wh=_n("RegExp"),Vh=_n("Error"),Gh=_n("Symbol"),Zh=_n("Map"),Kh=_n("WeakMap"),Jh=_n("Set"),Qh=_n("WeakSet"),td=_n("ArrayBuffer");function nd(t){return!Gh(t)&&pn(t)&&!isNaN(parseFloat(t))}function ed(t){return null==t||(Gn(t)&&(Dn(t)||ye(t)||Se(t))?0===t.length:0===An(t).length)}function rd(t){for(var n=An(t),e=n.length,r=Array(e),o=0;o<e;o++)r[o]=[n[o],t[n[o]]];return r}function od(t){for(var n={},e=An(t),r=0,o=e.length;r<o;r++)n[t[e[r]]]=e[r];return n}function id(t){var n=[];for(var e in t)xn(t[e])&&n.push(e);return n.sort()}const ad=Pn(Ae),ud=Pn(Ae,!0);function ld(t){if(!Kt(t))return{};if(fn)return fn(t);var n=function(){};n.prototype=t;var e=new n;return n.prototype=null,e}function cd(t,n){var e=ld(t);return n&&Ln(e,n),e}function sd(t){return Kt(t)?Dn(t)?t.slice():ad({},t):t}function fd(t,n){return n(t),t}function hd(){}function dd(t){return null==t?function(){}:function(n){return Dn(n)?$n(t,n):t[n]}}function pd(t,n,e){var r=Array(Math.max(0,t));n=Yn(n,e,1);for(var o=0;o<t;o++)r[o]=n(o);return r}const vd=Tn(od(En)),md=Nn.templateSettings={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,escape:/<%-([\s\S]+?)%>/g};var gd=/(.)^/,yd={"'":"'","\\":"\\","\r":"r","\n":"n","\u2028":"u2028","\u2029":"u2029"},_d=/\\|'|\r|\n|\u2028|\u2029/g;function wd(t){return"\\"+yd[t]}function bd(t,n,e){!n&&e&&(n=e),n=ud({},n,Nn.templateSettings);var r,o=RegExp([(n.escape||gd).source,(n.interpolate||gd).source,(n.evaluate||gd).source].join("|")+"|$","g"),i=0,a="__p+='";t.replace(o,(function(n,e,r,o,u){return a+=t.slice(i,u).replace(_d,wd),i=u+n.length,e?a+="'+\n((__t=("+e+"))==null?'':_.escape(__t))+\n'":r?a+="'+\n((__t=("+r+"))==null?'':__t)+\n'":o&&(a+="';\n"+o+"\n__p+='"),n})),a+="';\n",n.variable||(a="with(obj||{}){\n"+a+"}\n"),a="var __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};\n"+a+"return __p;\n";try{r=new Function(n.variable||"obj","_",a)}catch(t){throw t.source=a,t}var u=function(t){return r.call(this,t,Nn)},l=n.variable||"obj";return u.source="function("+l+"){\n"+a+"}",u}function xd(t,n,e){Dn(n)||(n=[n]);var r=n.length;if(!r)return xn(e)?e.call(t):e;for(var o=0;o<r;o++){var i=null==t?void 0:t[n[o]];void 0===i&&(i=e,o=r),t=xn(i)?i.call(t):i}return t}var Md=0;function Ad(t){var n=++Md+"";return t?t+n:n}function Td(t){var n=Nn(t);return n._chain=!0,n}function Ed(t,n,e,r,o){if(!(r instanceof n))return t.apply(e,o);var i=ld(t.prototype),a=t.apply(i,o);return Kt(a)?a:i}var Sd=Vt((function(t,n){var e=Sd.placeholder,r=function(){for(var o=0,i=n.length,a=Array(i),u=0;u<i;u++)a[u]=n[u]===e?arguments[o++]:n[u];for(;o<arguments.length;)a.push(arguments[o++]);return Ed(t,r,this,this,a)};return r}));Sd.placeholder=Nn;const Nd=Sd,kd=Vt((function(t,n,e){if(!xn(t))throw new TypeError("Bind must be called on a function");var r=Vt((function(o){return Ed(t,r,n,this,e.concat(o))}));return r})),Dd=Vt((function(t,n){var e=(n=Ne(n,!1,!1)).length;if(e<1)throw new Error("bindAll must be passed function names");for(;e--;){var r=n[e];t[r]=kd(t[r],t)}return t})),Pd=Nd(Gt,Nn,1);function Ld(t,n){return Nd(n,t)}function jd(t){return function(){return!t.apply(this,arguments)}}function Rd(){var t=arguments,n=t.length-1;return function(){for(var e=n,r=t[n].apply(this,arguments);e--;)r=t[e].call(this,r);return r}}function Od(t,n){return function(){if(--t<1)return n.apply(this,arguments)}}function $d(t,n){var e;return function(){return--t>0&&(e=n.apply(this,arguments)),t<=1&&(n=null),e}}const zd=Nd($d,2);function Yd(t,n,e){n=Fn(n,e);for(var r,o=An(t),i=0,a=o.length;i<a;i++)if(n(t[r=o[i]],r,t))return r}const Id=oe(-1,Bn);function Cd(t,n,e){var r=(Gn(t)?Hn:Yd)(t,n,e);if(void 0!==r&&-1!==r)return t[r]}function Fd(t,n){return Cd(t,Rn(n))}function qd(t){var n=function(n,e,r,o){var i=!Gn(n)&&An(n),a=(i||n).length,u=t>0?0:a-1;for(o||(r=n[i?i[u]:u],u+=t);u>=0&&u<a;u+=t){var l=i?i[u]:u;r=e(r,n[l],l,n)}return r};return function(t,e,r,o){var i=arguments.length>=3;return n(t,Yn(e,o,4),r,i)}}const Ud=qd(1),Hd=qd(-1);function Bd(t,n,e){var r=[];return n=Fn(n,e),Zn(t,(function(t,e,o){n(t,e,o)&&r.push(t)})),r}function Xd(t,n,e){return Bd(t,jd(Fn(n)),e)}function Wd(t,n,e){n=Fn(n,e);for(var r=!Gn(t)&&An(t),o=(r||t).length,i=0;i<o;i++){var a=r?r[i]:i;if(!n(t[a],a,t))return!1}return!0}function Vd(t,n,e){n=Fn(n,e);for(var r=!Gn(t)&&An(t),o=(r||t).length,i=0;i<o;i++){var a=r?r[i]:i;if(n(t[a],a,t))return!0}return!1}const Gd=Vt((function(t,n,e){var r,o;return xn(n)?o=n:Dn(n)&&(r=n.slice(0,-1),n=n[n.length-1]),be(t,(function(t){var i=o;if(!i){if(r&&r.length&&(t=$n(t,r)),null==t)return;i=t[n]}return null==i?i:i.apply(t,e)}))}));function Zd(t,n){return be(t,zn(n))}function Kd(t,n){return Bd(t,Rn(n))}function Jd(t,n,e){var r,o,i=-1/0,a=-1/0;if(null==n||"number"==typeof n&&"object"!=typeof t[0]&&null!=t)for(var u=0,l=(t=Gn(t)?t:te(t)).length;u<l;u++)null!=(r=t[u])&&r>i&&(i=r);else n=Fn(n,e),Zn(t,(function(t,e,r){((o=n(t,e,r))>a||o===-1/0&&i===-1/0)&&(i=t,a=o)}));return i}function Qd(t,n,e){var r,o,i=1/0,a=1/0;if(null==n||"number"==typeof n&&"object"!=typeof t[0]&&null!=t)for(var u=0,l=(t=Gn(t)?t:te(t)).length;u<l;u++)null!=(r=t[u])&&r<i&&(i=r);else n=Fn(n,e),Zn(t,(function(t,e,r){((o=n(t,e,r))<a||o===1/0&&i===1/0)&&(i=t,a=o)}));return i}function tp(t,n,e){if(null==n||e)return Gn(t)||(t=te(t)),t[De(t.length-1)];var r=Gn(t)?sd(t):te(t),o=qn(r);n=Math.max(Math.min(n,o),0);for(var i=o-1,a=0;a<n;a++){var u=De(a,i),l=r[a];r[a]=r[u],r[u]=l}return r.slice(0,n)}function np(t){return tp(t,1/0)}function ep(t,n,e){var r=0;return n=Fn(n,e),Zd(be(t,(function(t,e,o){return{value:t,index:r++,criteria:n(t,e,o)}})).sort((function(t,n){var e=t.criteria,r=n.criteria;if(e!==r){if(e>r||void 0===e)return 1;if(e<r||void 0===r)return-1}return t.index-n.index})),"value")}const rp=Kn((function(t,n,e){t[e]=n})),op=Kn((function(t,n,e){yn(t,e)?t[e]++:t[e]=1})),ip=Kn((function(t,n,e){t[e?0:1].push(n)}),!0);var ap=/[^\ud800-\udfff]|[\ud800-\udbff][\udc00-\udfff]|[\ud800-\udfff]/g;function up(t){return t?Dn(t)?on.call(t):ye(t)?t.match(ap):Gn(t)?be(t,kn):te(t):[]}function lp(t){return null==t?0:Gn(t)?t.length:An(t).length}const cp=Vt((function(t,n){var e,r=n[0];return xn(r)?(r=jd(r),n.length>1&&(e=n[1])):(n=be(Ne(n,!1,!1),String),r=function(t,e){return!ae(n,e)}),ke(t,r,e)}));function sp(t){return Bd(t,Boolean)}function fp(t,n){return Ne(t,n,!1)}const hp=Vt((function(t,n){return n=Ne(n,!0,!0),Bd(t,(function(t){return!ae(n,t)}))})),dp=Vt((function(t,n){return hp(t,n)}));function pp(t,n,e,r){le(n)||(r=e,e=n,n=!1),null!=e&&(e=Fn(e,r));for(var o=[],i=[],a=0,u=qn(t);a<u;a++){var l=t[a],c=e?e(l,a,t):l;n&&!e?(a&&i===c||o.push(l),i=c):e?ae(i,c)||(i.push(c),o.push(l)):ae(o,l)||o.push(l)}return o}const vp=Vt((function(t){return pp(Ne(t,!0,!0))}));function mp(t){for(var n=t&&Jd(t,qn).length||0,e=Array(n),r=0;r<n;r++)e[r]=Zd(t,r);return e}const gp=Vt(mp);function yp(t,n){for(var e={},r=0,o=qn(t);r<o;r++)n?e[t[r]]=n[r]:e[t[r][0]]=t[r][1];return e}function _p(t,n){if(null==n||n<1)return[];for(var e=[],r=0,o=t.length;r<o;)e.push(on.call(t,r,r+=n));return e}function wp(t,n){return t._chain?Nn(n).chain():n}function bp(t){return Zn(id(t),(function(n){var e=Nn[n]=t[n];Nn.prototype[n]=function(){var t=[this._wrapped];return rn.apply(t,arguments),wp(this,e.apply(Nn,t))}})),Nn}Zn(["pop","push","reverse","shift","sort","splice","unshift"],(function(t){var n=tn[t];Nn.prototype[t]=function(){var e=this._wrapped;return null!=e&&(n.apply(e,arguments),"shift"!==t&&"splice"!==t||0!==e.length||delete e[0]),wp(this,e)}})),Zn(["concat","join","slice"],(function(t){var n=tn[t];Nn.prototype[t]=function(){var t=this._wrapped;return null!=t&&(t=n.apply(t,arguments)),wp(this,t)}}));const xp=Nn;var Mp=bp(e);function Ap(t){const{clientWidth:n,clientHeight:e}=t.node();return{xMin:0,yMin:0,xMax:n-1,yMax:e-1,width:n,height:e}}function Tp(t,n){return function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{name:n,initial:e,events:r=[]}=t,o=r.concat(["submit","update","reject","fail"]),i=xr.apply(void 0,o);function a(){return function t(){return t.requested=!0,s}}function u(t,n){function e(t){i.call("fail",null,t,s)}try{const[r,...o]=n;Promise.all(o).then((n=>function(n,e){return t.requested?null:xn(n)?n.apply(s,e):n}(r,n))).then((function(n){if(!t.requested){const t=l;l=n,i.call("update",null,n,s,t)}}),(function(n){t.requested||i.call("reject",null,n,s)})).catch(e),i.call("submit",null,s)}catch(t){e(t)}}let l=e;const c=Zt(u,0),s=Object.assign(i,{value:function(){return l},cancel:a(),submit:function(t,n,e,r){return this.cancel(),c(this.cancel=a(),arguments),this},toString:function(){return n}});return s}(Mr(n,{name:t})).on(vr`reject fail`,Xo.error)}function Ep(t,n,e,r,o){const i=He(e+90,360),a=180<i?-1:1;a<0?(e=270-i,n+=180):e=i-90,e*=ze,n=(He(n+180,360)-180)*ze;const u=t*t,l=Math.sin(e),c=Math.cos(e),s=t*c,f=c/t;return{project:function(e,i){const u=i*ze,f=e*ze-n,h=Math.sin(f),d=Math.cos(f),p=Math.sin(u),v=Math.cos(u),m=t*v;return l*p+c*v*d<0?[NaN,NaN]:[m*h*a+r,(m*d*l-s*p)*a+o]},invert:function(t,e){const i=(t-r)*a,c=(o-e)*a,h=1-(i*i+c*c)/u;if(h>=0){const t=Math.sqrt(h),e=n+Math.atan2(i,t*s-c*l),r=Math.asin(t*l+c*f);return[e*$e,r*$e]}return[NaN,NaN]},webgl:function(t){return{shaderSource:"\nuniform vec2 u_translate;   // screen coords translation (x0, y0)\nuniform float u_R2;         // scale R, squared\nuniform float u_lon0;       // origin longitude\nuniform float u_sinlat0;    // sin(lat0)\nuniform float u_Rcoslat0;   // R * cos(lat0)\nuniform float u_coslat0dR;  // cos(lat0) / R\nuniform float u_flip;       // 1.0 if lat0 in range [-90deg, +90deg], otherwise -1.0\n\n// Handbook of Mathematical Functions, M. Abramowitz and I.A. Stegun, Ed. For input on range [-1, +1]\n// Cg 3.1 Toolkit Documentation https://developer.download.nvidia.com/cg/index_stdlib.html\nfloat arcsin(in float v) {\n    float x = abs(v);\n    float ret = -0.0187293;\n    ret *= x;\n    ret += 0.0742610;\n    ret *= x;\n    ret -= 0.2121144;\n    ret *= x;\n    ret += 1.5707288;\n    ret = PI / 2.0 - sqrt(1.0 - x) * ret;\n    return sign(v) * ret;\n}\n\n/** @returns [lon, lat] in radians for the specified point [x, y], or [NIL, NIL] if the point is unprojectable. */\nvec2 invert(in vec2 point) {\n    vec2 p = (point - u_translate) * u_flip;\n    float d = 1.0 - dot(p, p) / u_R2;\n    if (d >= 0.0) {\n        float cosc = sqrt(d);\n        float lon = u_lon0 + atan(p.x, cosc * u_Rcoslat0 - p.y * u_sinlat0);  // u_lon0 + [-pi/2, pi/2]\n        float lat = arcsin(cosc * u_sinlat0 + p.y * u_coslat0dR);             // [-pi/2, pi/2] [-90deg, +90deg]\n        return vec2(lon, lat);\n    }\n    return vec2(NIL);  // outside of projection\n}\n",uniforms:{u_translate:[r,t.display.height-o],u_R2:u,u_lon0:n,u_sinlat0:l,u_Rcoslat0:s,u_coslat0dR:f,u_flip:a}}}}}Mp._=Mp;const Sp=Object.freeze({conicEquidistant:Dp,equirectangular:Pp,mollweide:Lp,orthographic:jp,patterson:Rp,polyhedralWaterman:Op,stereographic:$p,winkel3:zp});function Np(){const t=function(t){return function(t){const n=t.name,e=Sp[n];if(void 0===e)throw new Error(`Unknown projection: ${n}`);const r=e();for(const[n,e]of Object.entries(t))"name"!==n&&r[n](e);return r}(Yp(t))}(this),n=t.invert.bind(t),e=[NaN,NaN];return{project(n,r){var o;return e[0]=n,e[1]=r,null!==(o=t(e))&&void 0!==o?o:[NaN,NaN]},invert(t,r){var o;return e[0]=t,e[1]=r,null!==(o=n(e))&&void 0!==o?o:[NaN,NaN]}}}function kp(t,n){let e=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Np;return t.key=n,t.optimize=e,t}function Dp(){return kp(Du(),"conicEquidistant")}function Pp(){return kp(Nu(),"equirectangular",(function(){return function(t,n,e,r,o,i){return 0===e&&0===r?function(t,n,e,r){return n*=ze,{project:function(o,i){let a=o*ze,u=i*ze;a+=n;const l=He(Re+a,Oe)-Re;return[t*l+e,r-t*u]},invert:function(o,i){const a=(o-e)/t,u=(r-i)/t;if(Math.abs(a)<=Re&&Math.abs(u)<=Re/2){let t=a;return t-=n,[t*$e,u*$e]}return[NaN,NaN]},webgl:function(o){return{shaderSource:"\nuniform vec2 u_translate;\nuniform float u_R;\nuniform float u_lon0;\n\nconst vec2 BOUNDS = vec2(PI, PI / 2.0);\n\n/** @returns (lon, lat) in radians for the specified point (x, y), or (NIL, NIL) if the point is unprojectable. */\nvec2 invert(in vec2 point) {\n    // translate and scale\n    vec2 p = (point - u_translate) / u_R;\n    if (all(lessThanEqual(abs(p), BOUNDS))) {\n        // project\n        float lambda = p.x;\n        float phi = p.y;\n        // rotate\n        float lon = lambda - u_lon0;\n        float lat = phi;\n        return vec2(lon, lat);\n    }\n    return vec2(NIL);  // outside of projection\n}\n",uniforms:{u_translate:[e,o.display.height-r],u_R:t,u_lon0:n}}}}}(t,n,o,i):function(t,n,e,r,o,i){n*=ze,e*=ze,r*=ze;const a=Math.cos(e),u=Math.sin(e),l=Math.cos(r),c=Math.sin(r);return{project:function(e,r){let s=e*ze,f=r*ze;s+=n;const h=Math.cos(f),d=Math.cos(s)*h,p=Math.sin(s)*h,v=Math.sin(f),m=v*a+d*u;return s=Math.atan2(p*l-m*c,d*a-v*u),f=Math.asin(m*l+p*c),[t*s+o,i-t*f]},invert:function(e,r){const s=(e-o)/t,f=(i-r)/t;if(Math.abs(s)<=Re&&Math.abs(f)<=Re/2){let t=s,e=f;const r=Math.cos(e),o=Math.cos(t)*r,i=Math.sin(t)*r,h=Math.sin(e),d=h*l-i*c;return t=Math.atan2(i*l+h*c,o*a+d*u),e=Math.asin(d*a-o*u),t-=n,[t*$e,e*$e]}return[NaN,NaN]},webgl:function(e){return{shaderSource:"\nuniform vec2 u_translate;\nuniform float u_R;\nuniform float u_lon0;\nuniform float u_sinlat0;\nuniform float u_coslat0;\nuniform float u_singam0;\nuniform float u_cosgam0;\n\nconst vec2 BOUNDS = vec2(PI, PI / 2.0);\n\n/** @returns (lon, lat) in radians for the specified point (x, y), or (NIL, NIL) if the point is unprojectable. */\nvec2 invert(in vec2 point) {\n    // translate and scale\n    vec2 p = (point - u_translate) / u_R;\n    if (all(lessThanEqual(abs(p), BOUNDS))) {\n        // project\n        float lambda = p.x;\n        float phi = p.y;\n        // rotate (formulas pulled from d3-geo)\n        float cosphi = cos(phi);\n        float q = cos(lambda) * cosphi;\n        float r = sin(lambda) * cosphi;\n        float s = sin(phi);\n        float t = s * u_cosgam0 - r * u_singam0;\n        float u = r * u_cosgam0 + s * u_singam0;\n        float v = q * u_coslat0 + t * u_sinlat0;\n        float w = t * u_coslat0 - q * u_sinlat0;\n        float lon = atan(u, v) - u_lon0;\n        float lat = asin(clamp(w, -1.0, 1.0));  // keep holes from forming at poles\n        return vec2(lon, lat);\n    }\n    return vec2(NIL);  // outside of projection\n}\n",uniforms:{u_translate:[o,e.display.height-i],u_R:t,u_lon0:n,u_sinlat0:u,u_coslat0:a,u_singam0:c,u_cosgam0:l}}}}}(t,n,e,r,o,i)}(...function(t){const[n,e,r]=t.rotate(),[o,i]=t.translate();return[t.scale(),n,e,r,o,i]}(this))}))}function Lp(){return kp(Ql(),"mollweide")}function jp(){return kp(zu(),"orthographic",(function(){return Ep(...function(t){const[n,e]=t.rotate(),[r,o]=t.translate();return[t.scale(),-n,-e,r,o]}(this))}))}function Rp(){return kp(xc(),"patterson")}function Op(){return kp(Es(),"polyhedralWaterman")}function $p(){return kp(Ol(),"stereographic")}function zp(){return kp(Ls(),"winkel3")}function Yp(t){if(void 0===Sp[t.key])throw new Error(`Unsupported projection: ${t}`);return{name:t.key,clipAngle:t.clipAngle(),clipExtent:t.clipExtent(),scale:t.scale(),translate:t.translate(),center:t.center(),angle:t.angle(),reflectX:t.reflectX(),reflectY:t.reflectY(),rotate:t.rotate(),precision:t.precision()}}function Ip(t,n){return isNaN(null!=t?t:void 0)?n:+t}function Cp(t){return null===t||"string"==typeof t&&""===t.trim()?NaN:+t}function Fp(){return[He((new Date).getTimezoneOffset()/4,360),0]}function qp(t,n){return isFinite(t)||t===1/0||t===-1/0?t:n}function Up(t,n){const[[e,r],[o,i]]=jl(t).bounds({type:"Sphere"}),a=(o-e)/t.scale(),u=(i-r)/t.scale(),l=.9*Math.min(n.width/a,n.height/u),c=[n.width/2,n.height/2];return t.scale(l).translate(c)}function Hp(t,n){const e=Object.assign({projection:null,newProjection(t){throw new Error("method must be overridden")},bounds(t){const[[n,e],[r,o]]=jl(this.projection).bounds({type:"Sphere"}),i=Math.max(Math.floor(qp(n,0)),0),a=Math.max(Math.floor(qp(e,0)),0),u=Math.min(Math.ceil(qp(r,t.width)),t.width-1),l=Math.min(Math.ceil(qp(o,t.height)),t.height-1);return{xMin:i,yMin:a,xMax:u,yMax:l,width:u-i+1,height:l-a+1}},fit(t){return this.newProjection(t).scale()},center:t=>[t.width/2,t.height/2],scaleExtent:()=>[25,25e4],getOrientation(){const t=this.projection;return Mr({scale:t.scale(),rotate:Wn(t.rotate(),2),translate:t.translate()})},setOrientation(t,n){var e,r,o,i;const a=this.projection,u=+(null==t?void 0:t.scale),l=u==u?Xe(u,...this.scaleExtent()):this.fit(n),c=+(null==t||null===(e=t.rotate)||void 0===e?void 0:e[0]),s=+(null==t||null===(r=t.rotate)||void 0===r?void 0:r[1]),f=a.rotate()[2],h=c==c&&s==s?[c,s,f]:this.newProjection(n).rotate(),d=+(null==t||null===(o=t.translate)||void 0===o?void 0:o[0]),p=+(null==t||null===(i=t.translate)||void 0===i?void 0:i[1]),v=d==d&&p==p?[d,p]:this.center(n);a.scale(l).rotate(h).translate(v)},manipulator(t,n){const e=this.projection,r=60/n,o=[e.rotate()[0]/r,-e.rotate()[1]/r],i=e.precision();return e.precision(10*i),{move:function(n,i){if(n){const i=n[0]-t[0]+o[0],a=n[1]-t[1]+o[1];e.rotate([i*r,-a*r,e.rotate()[2]])}e.scale(i)},end:function(){e.precision(i)}}},locate:t=>null,defineMask(t){return jl(this.projection,t)({type:"Sphere"}),t},backgroundRenderer:()=>({renderTo(t,n){t.fillStyle="#303030",t.beginPath(),n({type:"Sphere"}),t.fill()}}),graticuleRenderer(){const t=Ru()(),n=Ru().extentMinor([[0,0],[0,0]]).stepMajor([0,90])(),e=vo(t,{strokeStyle:"rgba(180,180,180,0.20)",lineWidth:1}),r=vo(n,{strokeStyle:"rgba(250,250,250,0.20)",lineWidth:1});return{renderTo(t,n){e.renderTo(t,n),r.renderTo(t,n)}}},preForegroundRenderer:()=>({renderTo(t,n){}}),postForegroundRenderer:()=>({renderTo(t,n){t.strokeStyle="#000005",t.lineWidth=3,t.beginPath(),n({type:"Sphere"}),t.stroke()}})},t);return e.projection=e.newProjection(n),e}function Bp(t){return Hp({newProjection:t=>Up(Lp().rotate([30,-45,90]).precision(.1),t)},t)}function Xp(t){return Hp({newProjection:t=>Up(Dp().rotate(Fp()).precision(.1),t)},t)}function Wp(t){return Hp({newProjection:t=>Up(Pp().rotate(Fp()).precision(.1),t)},t)}function Vp(t){return Hp({newProjection:t=>Up(jp().rotate(Fp()).precision(.1).clipAngle(90),t),backgroundRenderer:()=>({renderTo(t,n){const e=n.projection(),[r,o]=e.translate(),i=e.scale(),a=t.createRadialGradient(r,o,0,r,o,i);a.addColorStop(.69,"#303030"),a.addColorStop(.91,"#202020"),a.addColorStop(.999,"#000005"),a.addColorStop(1,"rgba(0,0,0,0)"),t.fillStyle=a,t.fillRect(r-i,o-i,2*i,2*i)}}),postForegroundRenderer:()=>({renderTo(t,n){const e=n.projection(),[r,o]=e.translate(),i=e.scale();let a=2;if(Co("float")){const n=i+60,e=t.createRadialGradient(r,o,i,r,o,n);e.addColorStop(0,"transparent"),e.addColorStop(.001,"rgba(0,0,0,0.25)"),e.addColorStop(1,"transparent"),t.fillStyle=e,t.fillRect(r-n,o-n,2*n,2*n),a=1}t.fillStyle="#000005",t.beginPath(),t.arc(r,o,i-a,0,Oe,!0),t.arc(r,o,i+a,0,Oe,!0),t.fill("evenodd")}}),locate(t){return[-t[0],-t[1],this.projection.rotate()[2]]}},t)}function Gp(t){return Hp({newProjection:t=>Up(Rp().precision(.1),t)},t)}function Zp(t){return Hp({newProjection:t=>Up($p().rotate([-43,-20]).precision(1).clipAngle(179.9999).clipExtent([[0,0],[t.width,t.height]]),t),postForegroundRenderer:()=>({renderTo(t,n){}})},t)}function Kp(t){return Hp({newProjection:t=>Up(Op().rotate([20,0]).precision(.1),t),preForegroundRenderer:()=>({renderTo(t,n){t.save(),t.beginPath(),n({type:"Sphere"}),t.clip()}}),postForegroundRenderer:()=>({renderTo(t,n){t.restore(),t.strokeStyle="#000005",t.lineWidth=3,t.beginPath(),n({type:"Sphere"}),t.stroke()}})},t)}function Jp(t){return Hp({newProjection:t=>Up(zp().precision(.1),t)},t)}const Qp=Mr(r),tv=new Set(Object.keys(Qp));function nv(t,n,e,r){var o;const i=t.select(`#${n}`);if(null===e)return void i.remove();const a=Ct(null!==(o=i.node())&&void 0!==o?o:t.append("path").attr("id",n).node()).datum(e),u=e.properties,l=u.class,c=di(u.fill),s=di(u.stroke),{strokeWidth:f,strokeDasharray:h}=u;if(l?a.attr("class",l):a.attr("class",null),c?(a.attr("fill",c.copy({opacity:1})),a.attr("fill-opacity",1!==c.opacity?c.opacity:null)):(a.attr("fill",null),a.attr("fill-opacity",s?0:null)),s?(a.attr("stroke",s.copy({opacity:1})),a.attr("stroke-opacity",1!==s.opacity?s.opacity:null),a.attr("stroke-width",null!=f?f:1),a.attr("stroke-dasharray",Tr(h)?h.join(","):null)):(a.attr("stroke",null),a.attr("stroke-opacity",null),a.attr("stroke-width",null),a.attr("stroke-dasharray",null)),r){const t=jl(r).pointRadius((t=>{var n,e;return null!==(n=null===(e=t.properties)||void 0===e?void 0:e.pointRadius)&&void 0!==n?n:5}));a.attr("d",t)}}function ev(t,n){let e=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"0";const r=String(t),o=Math.max(n-r.length,0);return new Array(o+1).join(e)+r}function rv(t){try{return new URL(t)}catch(t){return}}const ov=["year","month","day","hour","minute","second","milli"];function iv(t){var n;return("string"==typeof(t=null!==(n=t)&&void 0!==n?n:"")||+t===t||isNaN(t))&&(t=new Date(t)),t}function av(t){return{year:(t=iv(t)).getUTCFullYear(),month:t.getUTCMonth()+1,day:t.getUTCDate(),hour:t.getUTCHours(),minute:t.getUTCMinutes(),second:t.getUTCSeconds(),milli:t.getUTCMilliseconds()}}function uv(t){return{year:(t=iv(t)).getFullYear(),month:t.getMonth()+1,day:t.getDate(),hour:t.getHours(),minute:t.getMinutes(),second:t.getSeconds(),milli:t.getMilliseconds()}}function lv(t){var n,e,r,o,i,a,u;const l=+(null!==(n=t.year)&&void 0!==n?n:0),c=new Date(Date.UTC(l,(null!==(e=t.month)&&void 0!==e?e:1)-1,null!==(r=t.day)&&void 0!==r?r:1,null!==(o=t.hour)&&void 0!==o?o:0,null!==(i=t.minute)&&void 0!==i?i:0,null!==(a=t.second)&&void 0!==a?a:0,null!==(u=t.milli)&&void 0!==u?u:0));return+c==+c&&0<=l&&l<=99&&c.setUTCFullYear(l),c}function cv(t){return uv(lv(t))}function sv(t){return fv(lv(t))}const fv=av;function hv(t,n){const e=Object.assign({},t);return ov.filter((t=>t in n)).forEach((t=>{var r;e[t]=+(null!==(r=e[t])&&void 0!==r?r:0)+ +n[t]})),e}function dv(t,n){const e=[];for(let r=0;r<n.length;r++){let o=n[r];if("{"!==o){e.push(o);continue}let i="";for(r++;r<n.length;r++){if(o=n[r],"}"!==o){i+=o;continue}let a=NaN;switch(i[0]){case"Y":a=+t.year;break;case"M":a=+t.month;break;case"D":a=+t.day;break;case"h":a=+t.hour;break;case"m":a=+t.minute;break;case"s":a=+t.second;break;case"S":a=+t.milli}a==a?e.push(ev(a,i.length)):e.push("{",i,"}");break}}return e.join("")}function pv(t,n,e){var r;const o={};function i(t,n){n==n&&(o[t]=n)}e=null!==(r=e)&&void 0!==r?r:{year:1,month:2,day:3,hour:4,minute:5,second:6,milli:7};const a=n.exec(t);return a&&(i("year",+a[e.year]),i("month",+a[e.month]),i("day",+a[e.day]),i("hour",+a[e.hour]),i("minute",+a[e.minute]),i("second",+a[e.second]),i("milli",+a[e.milli])),o}function vv(t){return lv(t).toISOString()}let mv=function(){return Date.now()+gv.skew},gv={skew:0};function yv(){return av(mv())}function _v(t){return"now"===t?yv():av(t)}function wv(t,n){return function(t,n){let e=lv(t).getTime();isNaN(e)&&(e=-1/0);let r=lv(n).getTime();return isNaN(r)&&(r=-1/0),e<r?-1:e>r?1:0}(hv(t,n),yv())<0}function bv(t){return"surface"===t.z_level?Kr`Surface`:0===(n=t.z_level).length?n:n.charAt(0).toUpperCase()+n.substr(1);var n}function xv(t,n,e){const r=function(t,n){const{day:e=0,hour:r=0,minute:o=0,second:i=0,milli:a=0}=n,u=864e5*e+36e5*r+6e4*o+1e3*i+a,l=+lv(t),c=Math.floor(l/u)*u;return fv(c)}(t,n);return sv(hv(r,null!=e?e:{}))}function Mv(t,n,e,r,o){const i=xv(_v(t),n,e),a=t=>function(){return xv(hv(this.validTime(),t),n)};return{alignment:()=>Mr(n),validTime:()=>Mr(i),prev2:a(r.prev2),prev1:a(r.prev1),next1:a(r.next1),next2:a(r.next2),navLabels:o}}function Av(t,n){return Mv(t,{hour:1},n,{prev2:{hour:-8},prev1:{hour:-1},next1:{hour:1},next2:{hour:8}},{prev2:`-8 ${Kr`hours`}`,prev1:`-1 ${Kr`hour`}`,next1:`+1 ${Kr`hour`}`,next2:`+8 ${Kr`hours`}`})}function Tv(t,n){return Mv(t,{hour:3},n,{prev2:{day:-1},prev1:{hour:-3},next1:{hour:3},next2:{day:1}},{prev2:`-1 ${Kr`day`}`,prev1:`-3 ${Kr`hours`}`,next1:`+3 ${Kr`hours`}`,next2:`+1 ${Kr`day`}`})}Promise.resolve(gv);const Ev="GEOS-5 / GMAO / NASA";function Sv(t,n){const e=Math.floor(t.size),r=Math.floor(n.size),o=e*r,i=Ze(t.delta),a=Ze(n.delta),u=Ze(t.start),l=Ze(n.start),c=(u-i/2)*ze,s=(l-a/2)*ze,f=[c,s],h=[(u+i*(e-1)+i/2)*ze-c,(l+a*(r-1)+a/2)*ze-s],d=Math.floor(e*i)>=360;return{dimensions:function(){return{width:e,height:r}},isCylindrical:function(){return d},forEach:function(t,n){for(let r=n||0;r<o;r++){const n=r%e,o=Math.floor(r/e);if(t(u+n*i,l+o*a,r))return r+1}return NaN},closest:function(t,n){if(t==t&&n==n){const o=He(t-u,360)/i,c=(n-l)/a,s=Math.round(o),f=Math.round(c);if(0<=f&&f<r&&0<=s&&(s<e||s===e&&d)){const t=f*e+s;return s===e?t-e:t}}return NaN},closest4:function(t,n){if(t==t&&n==n){const o=He(t-u,360)/i,c=(n-l)/a,s=Math.floor(o),f=Math.floor(c),h=s+1,p=f+1,v=o-s,m=c-f;if(0<=f&&p<r&&0<=s&&(h<e||h===e&&d)){const t=f*e+s;let n=t+1;const r=t+e;let o=r+1;return h===e&&(n-=e,o-=e),[t,n,r,o,v,m]}}return[NaN,NaN,NaN,NaN,NaN,NaN]},webgl:function(){return{shaderSource:"\nuniform vec2 u_Low;\nuniform vec2 u_Size;\n\nvec2 grid(in vec2 coord) {\n    vec2 tex = (coord - u_Low) / u_Size;\n    float s = tex.s;\n    float t = tex.t;\n\n    if (t < 0.0 || 1.0 < t) discard;  // lat out of bounds, so nothing to draw\n\n    return vec2(fract(s), t);  // UNDONE: fract used here only because lon is circular.\n}\n",uniforms:{u_Low:f,u_Size:h}}}}}function Nv(t,n){function e(e,r){return+n[t.closest(e,r)]}const r={},{width:o,height:i}=t.dimensions();return e.webgl=function(t){const e=t.context;return{shaderSource:["\nfloat scalarize(in vec4 h) {\n    return h.x;\n}\n","\nuniform sampler2D u_Data;\n\nfloat lookup(in vec2 st) {\n    vec4 h = texture2D(u_Data, st);\n    return scalarize(h);\n}\n"],textures:{weather_data:{type:e.FLOAT,format:e.LUMINANCE,width:o,height:i,pixels:n,hash:r,TEXTURE_MIN_FILTER:e.NEAREST,TEXTURE_MAG_FILTER:e.NEAREST}},uniforms:{u_Data:"weather_data"}}},e}function kv(t,n){function e(e,r){const o=2*t.closest(e,r);if(o==o){const t=n[o],e=n[o+1];if(t==t&&e==e)return[t,e]}return[NaN,NaN]}const r={},{width:o,height:i}=t.dimensions();return e.webgl=function(t){const e=t.context;return{shaderSource:["\nfloat scalarize(in vec4 h) {\n    float isMissing = step(NIL, h.x);\n    return length((1.0 - isMissing) * h.xw) + isMissing * NIL;\n}\n","\nuniform sampler2D u_Data;\n\nfloat lookup(in vec2 st) {\n    vec4 h = texture2D(u_Data, st);\n    return scalarize(h);\n}\n"],textures:{weather_data:{type:e.FLOAT,format:e.LUMINANCE_ALPHA,width:o,height:i,pixels:n,hash:r,TEXTURE_MIN_FILTER:e.NEAREST,TEXTURE_MAG_FILTER:e.NEAREST}},uniforms:{u_Data:"weather_data"}}},e}function Dv(t,n){function e(e,r){const o=t.closest4(e,r),i=o[0];if(i==i){const t=o[1],e=o[2],r=o[3],a=o[4],u=o[5],l=1-a,c=1-u,s=n[i],f=n[t],h=n[e],d=n[r];if(s==s){if(f==f&&h==h&&d==d)return s*(l*c)+f*(a*c)+h*(l*u)+d*(a*u);if(d==d&&f==f&&a>=u)return f+l*(s-f)+u*(d-f);if(h==h&&d==d&&a<u)return h+a*(d-h)+c*(s-h);if(h==h&&f==f&&a<=c)return s+a*(f-s)+u*(h-s)}else if(d==d&&h==h&&f==f&&a>c)return d+l*(h-d)+c*(f-d)}return NaN}const r={},{width:o,height:i}=t.dimensions();return e.webgl=function(t){const e=t.context;return{shaderSource:["\nfloat scalarize(in vec4 h) {\n    return h.x;\n}\n","\nuniform sampler2D u_Data;\nuniform vec2 u_TextureSize;\n\nvec4 getSample(in vec2 st) {\n    // Use of fract below assumes cylindrical x axis (usually lon) and non-cylindrical y axis (usually lat).\n    return texture2D(u_Data, vec2(fract(st.s), st.t));\n}\n\nfloat lookup(in vec2 st) {\n    // adapted from http://www.iquilezles.org/www/articles/hwinterpolation/hwinterpolation.htm\n    vec2 uv = st * u_TextureSize - 0.5;\n    vec2 iuv = floor(uv);\n    vec2 fuv = fract(uv);\n    vec2 ruv = 1.0 - fuv;\n\n    vec4 a = getSample((iuv + vec2(0.5, 0.5)) / u_TextureSize);  // LL\n    vec4 b = getSample((iuv + vec2(1.5, 0.5)) / u_TextureSize);  // LR\n    vec4 c = getSample((iuv + vec2(0.5, 1.5)) / u_TextureSize);  // UL\n    vec4 d = getSample((iuv + vec2(1.5, 1.5)) / u_TextureSize);  // UR\n    vec4 h;\n\n    int tag = int(dot(step(NIL, vec4(a.x, b.x, c.x, d.x)), vec4(1.0, 2.0, 4.0, 8.0)));\n    if (tag == 0) {\n        // a b c d\n        h = mix(mix(a, b, fuv.x), mix(c, d, fuv.x), fuv.y);\n    } else if (tag == 1 && ruv.y < fuv.x) {\n        // d b c\n        h = d + ruv.x * (c - d) + ruv.y * (b - d);\n    } else if (tag == 2 && fuv.x < fuv.y) {\n        // c a d\n        h = c + fuv.x * (d - c) + ruv.y * (a - c);\n    } else if (tag == 4 && fuv.x >= fuv.y) {\n        // b a d\n        h = b + ruv.x * (a - b) + fuv.y * (d - b);\n    } else if (tag == 8 && fuv.x <= ruv.y) {\n        // a b c\n        h = a + fuv.x * (b - a) + fuv.y * (c - a);\n    } else {\n        // not enough points to interpolate\n        h = vec4(NIL);\n    }\n\n    return scalarize(h);\n}\n"],textures:{weather_data:{type:e.FLOAT,format:e.LUMINANCE,width:o,height:i,pixels:n,hash:r,TEXTURE_MIN_FILTER:e.NEAREST,TEXTURE_MAG_FILTER:e.NEAREST}},uniforms:{u_Data:"weather_data",u_TextureSize:[o,i]}}},e}function Pv(t,n){function e(t,n,e,r,o,i,a,u){return[e+t*(a-e)+n*(o-e),r+t*(u-r)+n*(i-r)]}function r(r,o){const i=t.closest4(r,o),a=2*i[0];if(a==a){const t=2*i[1],r=2*i[2],o=2*i[3],u=i[4],l=i[5],c=1-u,s=1-l,f=n[a],h=n[a+1],d=n[t],p=n[t+1],v=n[r],m=n[r+1],g=n[o],y=n[o+1];if(h==h){if(p==p&&m==m&&y==y){const t=c*s,n=u*s,e=c*l,r=u*l;return[f*t+d*n+v*e+g*r,h*t+p*n+m*e+y*r]}if(y==y&&p==p&&u>=l)return e(c,l,d,p,g,y,f,h);if(m==m&&y==y&&u<l)return e(u,s,v,m,f,h,g,y);if(m==m&&p==p&&u<=s)return e(u,l,f,h,v,m,d,p)}else if(y==y&&m==m&&p==p&&u>s)return e(c,s,g,y,d,p,v,m)}return[NaN,NaN]}const o={},{width:i,height:a}=t.dimensions();return r.webgl=function(t){const e=t.context;return{shaderSource:["\nfloat scalarize(in vec4 h) {\n    float isMissing = step(NIL, h.x);\n    return length((1.0 - isMissing) * h.xw) + isMissing * NIL;\n}\n","\nuniform sampler2D u_Data;\nuniform vec2 u_TextureSize;\n\nvec4 getSample(in vec2 st) {\n    // Use of fract below assumes cylindrical x axis (usually lon) and non-cylindrical y axis (usually lat).\n    return texture2D(u_Data, vec2(fract(st.s), st.t));\n}\n\nfloat lookup(in vec2 st) {\n    // adapted from http://www.iquilezles.org/www/articles/hwinterpolation/hwinterpolation.htm\n    vec2 uv = st * u_TextureSize - 0.5;\n    vec2 iuv = floor(uv);\n    vec2 fuv = fract(uv);\n    vec2 ruv = 1.0 - fuv;\n\n    vec4 a = getSample((iuv + vec2(0.5, 0.5)) / u_TextureSize);  // LL\n    vec4 b = getSample((iuv + vec2(1.5, 0.5)) / u_TextureSize);  // LR\n    vec4 c = getSample((iuv + vec2(0.5, 1.5)) / u_TextureSize);  // UL\n    vec4 d = getSample((iuv + vec2(1.5, 1.5)) / u_TextureSize);  // UR\n    vec4 h;\n\n    int tag = int(dot(step(NIL, vec4(a.x, b.x, c.x, d.x)), vec4(1.0, 2.0, 4.0, 8.0)));\n    if (tag == 0) {\n        // a b c d\n        h = mix(mix(a, b, fuv.x), mix(c, d, fuv.x), fuv.y);\n    } else if (tag == 1 && ruv.y < fuv.x) {\n        // d b c\n        h = d + ruv.x * (c - d) + ruv.y * (b - d);\n    } else if (tag == 2 && fuv.x < fuv.y) {\n        // c a d\n        h = c + fuv.x * (d - c) + ruv.y * (a - c);\n    } else if (tag == 4 && fuv.x >= fuv.y) {\n        // b a d\n        h = b + ruv.x * (a - b) + fuv.y * (d - b);\n    } else if (tag == 8 && fuv.x <= ruv.y) {\n        // a b c\n        h = a + fuv.x * (b - a) + fuv.y * (c - a);\n    } else {\n        // not enough points to interpolate\n        h = vec4(NIL);\n    }\n\n    return scalarize(h);\n}\n"],textures:{weather_data:{type:e.FLOAT,format:e.LUMINANCE_ALPHA,width:i,height:a,pixels:n,hash:o,TEXTURE_MIN_FILTER:e.NEAREST,TEXTURE_MAG_FILTER:e.NEAREST}},uniforms:{u_Data:"weather_data",u_TextureSize:[i,a]}}},r}function Lv(t){const n=t,e=n.header.variables,r=e.Primary_wave_direction_surface,o=e.Primary_wave_mean_period_surface,i=e[r.dimensions[0]],a=e[r.dimensions[1]],u=e[r.dimensions[2]],l=n.blocks[r.data.block],c=n.blocks[o.data.block],s=new Float32Array(2*l.length);for(let t=0;t<l.length;t++){const n=2*t,e=l[t]*ze,r=c[t];e==e&&r==r?(s[n]=-r*Math.sin(e),s[n+1]=-r*Math.cos(e)):s[n]=s[n+1]=NaN}s.containsNaN=!0;const f=Sv(u.sequence,a.sequence),h={valueAt:t=>{const n=2*t;return[s[n],s[n+1]]},scalarize:Ve,isDefined:t=>!isNaN(s[2*t]),nearest:kv(f,s),bilinear:Pv(f,s)};return{validTime:()=>av(i.data[0]),grid:()=>f,field:()=>h,valueInRange(t){return[this.scale.valueInRange(t),0]}}}function jv(t,n,e){const r=t[0].header,o={time:{data:[vv(hv(av(r.refTime),{hour:r.forecastTime}))]},lat:{sequence:{start:r.la1,delta:-r.dy,size:r.ny}},lon:{sequence:{start:r.lo1,delta:r.dx,size:r.nx}}},i=[];return n.forEach(((n,r)=>{o[n]={dimensions:e||["time","lat","lon"],data:{block:r}},i[r]=new Float32Array(t[r].data)})),{header:{variables:o},blocks:i}}function Rv(t,n){const e=t.variables,r=[];return Object.keys(e).forEach((t=>{if(n.test(t)){const n=e[t];r.push(new Float32Array(n.data)),n.data={block:r.length-1}}})),{header:t,blocks:r}}function Ov(t,n){let e=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Array.isArray(t)&&(t=jv(t,[e.legacyName])),t.blocks||(t=Rv(t,n));const r=t,{variables:o}=r.header,i=Object.keys(o).find((t=>n.test(t))),a=o[i],u=a.dimensions,l=o[u[0]],c=o[we(u,2)[0]],s=o[we(u,2)[1]],f=r.blocks[a.data.block];f.containsNaN=e.hasMissing,xn(e.transform)&&e.transform(f);const h=Sv(s.sequence,c.sequence),d={valueAt:t=>f[t],scalarize:t=>t,isDefined:t=>!isNaN(f[t]),nearest:Nv(h,f),bilinear:Dv(h,f)};return{validTime:()=>av(l.data[0]),grid:()=>h,field:()=>d,valueInRange(t){return this.scale.valueInRange(t)}}}function $v(t,n){return t===+t?t.toFixed(n.precision):void 0}function zv(t,n){var e;const r=t=>void 0!==t?n.convert(t):void 0,o=t=>void 0!==t?function(t,n){return Array.isArray(t)?function(t,n){const[e,r]=t;if(e===+e&&r===+r){const o=function(t,n){return 5*Be(t/5)}(function(t){return(Math.atan2(t[0],t[1])*$e+360)%360}(t="into"===n.convention?[-e,-r]:[e,r]));return`${o.toFixed(0)}° @ ${$v(Ve(t),n)}`}}(t,n):$v(t,n)}(t,n):void 0,i=o(r(t));return{formattedVal:i,fullText:`${null!=i?i:""} ${n.symbol}`,scalarHTML:`${null!==(e=o((a=r(t),void 0!==a?n.scalarize(a):void 0)))&&void 0!==e?e:""} ${n.html}`};var a}function Yv(t){return xe(t,((t,n)=>{return e=n,"enum"===(null==(r=t)?void 0:r.type)?function(t,n){return Mr({type:"enum",name:t,convert:t=>Be(t),scalarize:t=>t,format(t){return function(t,n){const e=void 0!==t?n.elements[n.convert(t)]:void 0;return{formattedVal:e,fullText:e,scalarHTML:e}}(t,this)}},n)}(e,r):function(t,n){var e;return Mr({type:"quantity",symbol:t,html:(e=t,e.replace(/\^([^\s./$)]*)/g,"<sup>$1</sup>")),convert:t=>t,scalarize:t=>t,precision:0,convention:void 0,format(t){return zv(t,this)}},n)}(e,r);var e,r}))}function Iv(t){return new class{resolve(){for(var n=arguments.length,e=new Array(n),r=0;r<n;r++)e[r]=arguments[r];return t+e.join("/")}}}const Cv=Iv("https://pangaea.nullschool.net/data/"),Fv=Iv("https://gaia.nullschool.net/data/");function qv(t){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{day:90};return wv(t,n)?Cv:Fv}const Uv="\nfloat fmap(in float v) {\n    return log(v);\n}\n",Hv="\nfloat fmap(in float v) {\n    return v;\n}\n",Bv="\nuniform vec2 u_Range;  // [min, size]\nuniform lowp sampler2D u_Palette;\nuniform lowp float u_Alpha;\n\nlowp vec4 colorize(in float v) {\n    vec2 st = vec2((fmap(v) - u_Range.x) / u_Range.y, 0.5);\n    lowp vec4 color = texture2D(u_Palette, st);\n    lowp float alpha = (1.0 - step(NIL, v)) * u_Alpha;\n    return vec4(color.rgb * alpha, alpha);  // premultiply alpha\n}\n";function Xv(t){if(Array.isArray(t)){const[n,e,r,o]=t;return gi(n,e,r,o)}return di(t)}function Wv(t,n){const[e,r,o]=t,i=n[0]-e,a=n[1]-r,u=n[2]-o;return t=>[Math.floor(e+t*i),Math.floor(r+t*a),Math.floor(o+t*u)].map((t=>Xe(t,0,255)))}function Vv(t,n){const e=function(t,n,e){switch(t){case"rgb":return Hs(n,e);case"lab":return Us(n,e);case"hcl":return Cs(n,e);case"hsl":return qs(n,e);default:throw new Error(`unsupported color space: ${t}`)}}(t.mode,Xv(t.color),Xv(n.color));return e.mode=()=>t.mode,e.domain=()=>[t.p,n.p],e}function Gv(t,n,e){const r=n=>t(n);return r.mode=()=>n,r.domain=()=>e,r}function Zv(t){let n=t*Oe*5/6;n*=.75;const e=Math.sin(n),r=Math.cos(n);return[Math.floor(255*Math.max(0,-r)),Math.floor(255*Math.max(e,0)),Math.floor(255*Math.max(r,0,-e))]}const Kv=.45,Jv=Wv(Zv(1),[255,255,255]);function Qv(t){return t<=Kv?Zv(t/Kv):Jv((t-Kv)/.55)}function tm(t){const n=[];for(let e=0;e<t.length-1;e++)n.push(Vv(t[e],t[e+1]));return n}function nm(t,n,e){const r=t[n],o=t[n+1],i=We(e[0],...r.domain(),0,1),a=We(e[1],...o.domain(),0,1),u=Vv({color:di(r(0)),mode:r.mode(),p:r.domain()[0]},{color:di(r(i)),mode:r.mode(),p:e[0]}),l=function(t,n){const e=[],r=[],o=[];for(let n=0;n<t.length;n++){const i=Ii(t[n]);e[n]=i.l,r[n]=i.a,o[n]=i.b}const i=Rs(e),a=Rs(r),u=Rs(o),l=t=>Ii(i(t),a(t),u(t))+"";return l.domain=()=>n,l.mode=()=>"lab",l}([r(i),r(1),o(a)],e),c=Vv({color:di(o(a)),mode:o.mode(),p:e[1]},{color:di(o(1)),mode:o.mode(),p:o.domain()[1]});return[].concat(t.slice(0,n),[u,l,c],t.slice(n+2))}function em(t,n,e,r){const[o,i]=n,[a,u]=e,l=Math.floor(t.length/4),c=(i-o)/(l-1),s=Be((a-o)/c);for(let n=Math.max(s,0);n<l;n++){const e=a+(n-s)*c;if(e>u)break;const o=r(e),i=4*n;t[i]=o[0],t[i+1]=o[1],t[i+2]=o[2],t[i+3]=o.length>3?Xe(We(o[3],0,1,0,255),0,255):255}}function rm(t,n,e){const r=new Uint8Array(4*e);return n.forEach((n=>{const e=n.domain();em(r,t,e,(t=>{const r=di(n(We(t,e[0],e[1],0,1)));return[r.r,r.g,r.b,r.opacity]}))})),r}function om(t,n,e){return am(t,rm(t,n,e))}function im(t,n,e){const r=function(t){const n=[],e=[],r=[];for(let o=0;o<t.length-1;o++)n.push(t[o+1][0]),e.push(Wv(t[o][1],t[o+1][1])),r.push([t[o][0],t[o+1][0]]);return t=>{let o;for(o=0;o<n.length-1&&!(t<=n[o]);o++);const i=We(t,...r[o],0,1);return e[o](i)}}(n),o=new Uint8Array(4*e);return em(o,t,t,r),am(t,o)}function am(t,n){let e=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"linear";const r="log"===e?Math.log:t=>t,o="log"===e?Math.exp:t=>t,i=r(t[0]),a=r(t[1]),u=n.length/4-1,l=u/(a-i),c={},s=(a-i)/(2*u),f=i-s,h=a+s,d=[f,h-f];return new class{get type(){return e}get colors(){return n}get bounds(){return t}indexOf(t){return Xe(Math.round((r(t)-i)*l),0,u)}valueFor(t){return o(t/l+i)}valueInRange(t){const n=Math.round(We(t,0,1,0,u));return this.valueFor(Xe(n,0,u))}rgba(t){const e=4*this.indexOf(t);return[n[e],n[e+1],n[e+2],n[e+3]]}webgl(t){const e=t.context;return{shaderSource:[r===Math.log?Uv:Hv,Bv],textures:{color_scale:{format:e.RGBA,type:e.UNSIGNED_BYTE,width:n.length/4,height:1,pixels:n,hash:c}},uniforms:{u_Range:d,u_Palette:"color_scale",u_Alpha:1}}}}}function um(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1e3;const n=[0,15],e=[[0,[8,29,88]],[1,[37,52,148]],[2,[34,94,168]],[3,[29,145,192]],[4,[65,182,196]],[5,[127,205,187]],[6,[199,233,180]],[7,[237,248,177]],[8,[254,204,92]],[10,[253,141,60]],[12,[240,59,32]],[14,[189,0,38]]];return im(n,e,t)}function lm(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1e3;const n=[0,25],e=[[0,[0,0,0]],[25,[21,255,255]]];return im(n,e,t)}let cm={};function sm(t,n){const{time_cursor:e}=t,r=xv(_v(e),{hour:3}),o="now"===e?"current":dv(r,"{YYYY}/{MM}/{DD}"),i=`${"now"===e?"current":dv(r,"{hh}{mm}")}-${n}-wave-30m.epak`;return qv(r).resolve("ww3",o,i)}function fm(t){const n=xv(_v(t.time_cursor),{hour:3}),e=t=>function(){return xv(hv(this.validTime(),t),{hour:3})};return{sourceHTML:"WAVEWATCH III / NCEP / NWS",validTime:()=>Mr(n),timeline:[{type:"recurring_interval",start:"2014-12-29T06:00Z",frequency:{hours:3}}],prev2:e({day:-1}),prev1:e({hour:-3}),next1:e({hour:3}),next2:e({day:1}),navLabels:{prev2:`-1 ${Kr`day`}`,prev1:`-3 ${Kr`hours`}`,next1:`+3 ${Kr`hours`}`,next2:`+1 ${Kr`day`}`}}}function hm(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1e3;const n=[-11,11],e=[[-11,[255,255,255]],[-3,[7,252,254]],[-1.5,[66,42,253]],[-.75,[34,55,134]],[0,[0,0,6]],[.75,[134,55,34]],[1.5,[253,14,16]],[3,[254,252,0]],[11,[255,255,255]]];return im(n,e,t)}function dm(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1e3;const n=[270,304.65],e=[[270,[255,255,255]],[271.4,[255,255,255]],[271.5,[15,4,168]],[273.15,[15,54,208]],[273.25,[15,54,188]],[275.65,[15,4,168]],[281.65,[24,132,14]],[291.15,[247,251,59]],[295,[235,167,0]],[299.65,[245,0,39]],[303,[87,17,0]],[304.65,[238,0,242]]];return im(n,e,t)}const pm="sea_surface_temp",vm="sea_surface_temp_anomaly";let mm={};function gm(t,n){const e=function(t,n){return n===pm?t.hd_enabled?{tag:pm,res:"0.1"}:{tag:pm,res:"0.5"}:n===vm?t.hd_enabled?{tag:vm,res:"0.25"}:{tag:vm,res:"0.5"}:void 0}(t,n),r=_v(t.time_cursor),o="now"===t.time_cursor,i=o?"current":dv(r,"{YYYY}/{MM}"),a=`${o?"current":dv(r,"{YYYY}{MM}{DD}")}-${e.tag}-ostia-${e.res}.epak`;return qv(r).resolve("ostia",i,a)}function ym(t,n){const e=hv(_v(t.time_cursor),{day:"now"===t.time_cursor?-1:0}),r={day:1},o=xv(e,r),i=t=>function(){return xv(hv(this.validTime(),t),r)};return{sourceHTML:"OSTIA / UK Met Office + GHRSST + CMEMS",validTime:()=>Mr(o),timeline:n,prev2:i({day:-5}),prev1:i({day:-1}),next1:i({day:1}),next2:i({day:5}),navLabels:{prev2:`-5 ${Kr`days`}`,prev1:`-1 ${Kr`day`}`,next1:`+1 ${Kr`day`}`,next2:`+5 ${Kr`days`}`}}}function _m(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1e3;const n=[270,304.65],e=[[270,[255,255,255]],[271.25,[255,255,255]],[271.3,[15,4,168]],[273.15,[15,54,208]],[273.25,[15,54,188]],[275.65,[15,4,168]],[281.65,[24,132,14]],[291.15,[247,251,59]],[295,[235,167,0]],[299.65,[245,0,39]],[303,[87,17,0]],[304.65,[238,0,242]]];return im(n,e,t)}let wm={};function bm(t,n){const e=_v(t.time_cursor),r="now"===t.time_cursor,o=r?"current":dv(e,"{YYYY}/{MM}"),i=`${r?"current":dv(e,"{YYYY}{MM}{DD}")}-${n}-rtg-0.5.epak`;return qv(e).resolve("rtgsst",o,i)}function xm(t,n){const e=hv(_v(t.time_cursor),{day:"now"===t.time_cursor?-1:0}),r={day:1},o=xv(e,r),i=t=>function(){return xv(hv(this.validTime(),t),r)};return{sourceHTML:"RTG-SST / NCEP / US National Weather Service",validTime:()=>Mr(o),timeline:n,prev2:i({day:-5}),prev1:i({day:-1}),next1:i({day:1}),next2:i({day:5}),navLabels:{prev2:`-5 ${Kr`days`}`,prev1:`-1 ${Kr`day`}`,next1:`+1 ${Kr`day`}`,next2:`+5 ${Kr`days`}`}}}const Mm="sea_surface_temp_anomaly";let Am={};function Tm(t,n){const e=function(t,n){if(n===Mm)return t.hd_enabled?{tag:Mm,res:"0.25"}:{tag:Mm,res:"0.5"}}(t,n),r=_v(t.time_cursor),o="now"===t.time_cursor,i=o?"current":dv(r,"{YYYY}/{MM}"),a=`${o?"current":dv(r,"{YYYY}{MM}{DD}")}-${e.tag}-oisst-${e.res}.epak`;return qv(r).resolve("oisst",i,a)}const Em=lv({year:2019,month:12,day:15}),Sm=lv({year:2022,month:12,day:15}),Nm=[{type:"recurring_interval",start:"2013-11-01T00:00Z",frequency:{hours:24}}];function km(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1001;const n=[0,100],e=[{color:[0,0,0],mode:"lab",p:n[0]},{color:[4,8,34],mode:"lab",p:5},{color:[78,255,103],mode:"lab",p:40},{color:[252,255,57],mode:"lab",p:60},{color:[219,75,255],mode:"lab",p:n[1]}];let r=tm(e);return r=nm(r,1,[35,45]),r=nm(r,3,[55,65]),om(n,r,t)}let Dm,Pm;function Lm(t){const{time_cursor:n}=t,e=xv(_v(n),{minute:5}),r="now"===n?"current":dv(e,"{YYYY}/{MM}/{DD}"),o=`${"now"===n?"current":dv(e,"{YYYY}{MM}{DD}{hh}{mm}")}-ovation.json`;return qv(e).resolve("ovation",r,o)}function jm(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1e3;const n=[0,1.5],e=[[0,[10,25,68]],[.15,[10,25,250]],[.4,[24,255,93]],[.65,[255,233,102]],[1,[255,233,15]],[1.5,[255,15,15]]];return im(n,e,t)}function Rm(t,n){var e;let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;const o=dv(_v(n),"{YYYY}{MM}{DD}");let i=ne(t,o);return i=(null!==(e=t[i])&&void 0!==e?e:"").startsWith(o)?i:i-1,t[i+r]}function Om(t,n){const e=Rm(t,n.time_cursor);return e?Fv.resolve("oscar",e):null}function $m(t){return{type:"fixed",points:t.map((t=>dv(pv(t,/(\d{4})(\d\d)(\d\d)/),"{YYYY}-{MM}-{DD}")))}}function zm(t){const n=t,e=n.header.variables,r=e.u,o=e.v,i=e[r.dimensions[0]],a=e[r.dimensions[2]],u=e[r.dimensions[3]],l=Ce(n.blocks[r.data.block],n.blocks[o.data.block]);l.containsNaN=!0;const c=Sv(u.sequence,a.sequence),s={valueAt:t=>{const n=2*t;return[l[n],l[n+1]]},scalarize:Ve,isDefined:t=>!isNaN(l[2*t]),nearest:kv(c,l),bilinear:Pv(c,l)};return{validTime:()=>av(i.data[0]),grid:()=>c,field:()=>s,valueInRange(t){return[this.scale.valueInRange(t),0]}}}function Ym(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1e4;const n=[0,.45],e=[{color:[0,0,15],mode:"hsl",p:n[0]},{color:[32,32,32],mode:"hsl",p:.005},{color:[62,167,45],mode:"hsl",p:.0125},{color:[255,238,0],mode:"hsl",p:.0875},{color:[241,139,0],mode:"hsl",p:.15625},{color:[229,50,16],mode:"hsl",p:.2125},{color:[181,103,164],mode:"hsl",p:.275},{color:[231,225,255],mode:"hsl",p:n[1]}];let r=tm(e);return r=nm(r,1,[.00625,1/40]),r=nm(r,3,[.0625,.1125]),om(n,r,t)}const Im=[{type:"recurring_interval",start:"2021-05-03T13:00Z",frequency:{hours:1}}];let Cm={};function Fm(t,n){const{time_cursor:e}=t,r=xv(_v(e),n),o="now"===e,i=o?"current":dv(r,"{YYYY}/{MM}/{DD}"),a=`${o?"current":dv(r,"{hh}{mm}")}-cpcuvi.epak`;return qv(r).resolve("cpcuvi",i,a)}const qm=Kr`UV Index`,Um=[Kr`low`,Kr`low`,Kr`low`,Kr`moderate`,Kr`moderate`,Kr`moderate`,Kr`high`,Kr`high`,Kr`very high`,Kr`very high`,Kr`very high`,Kr`extreme`];function Hm(t){return Math.round(40*t)}function Bm(t){const n=Hm(t),e=`${n} (${Um[Xe(n,0,11)]})`;return{formattedVal:e,fullText:`${e} ${qm}`,scalarHTML:e}}function Xm(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1e3;const n=[1e-11,2e-7],e=n.map(Math.log),r=Gv((t=>ff(1-t)),"GyRd",e),o=rm(e,[r],t);return am(n,o,"log")}function Wm(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1e3;const n=[1e-9,1e-6],e=n.map(Math.log),r=[{color:[8,29,88],mode:"hcl",p:e[0]},{color:[37,52,148],mode:"hcl",p:Math.log(4e-9)},{color:[34,94,168],mode:"hcl",p:Math.log(6e-9)},{color:[29,145,192],mode:"hcl",p:Math.log(8e-9)},{color:[65,182,196],mode:"hcl",p:Math.log(1e-8)},{color:[127,205,187],mode:"hcl",p:Math.log(16e-9)},{color:[199,233,180],mode:"hcl",p:Math.log(24e-9)},{color:[237,248,177],mode:"hcl",p:Math.log(28e-9)},{color:[255,255,210],mode:"hcl",p:Math.log(32e-9)},{color:[255,237,160],mode:"hcl",p:Math.log(42e-9)},{color:[254,217,118],mode:"hcl",p:Math.log(47e-9)},{color:[254,178,76],mode:"hcl",p:Math.log(57e-9)},{color:[253,141,60],mode:"hcl",p:Math.log(67e-9)},{color:[252,78,42],mode:"hcl",p:Math.log(11e-8)},{color:[227,26,28],mode:"hcl",p:Math.log(25e-8)},{color:[189,0,38],mode:"hcl",p:Math.log(5e-7)},{color:[128,0,38],mode:"hcl",p:e[1]}];let o=tm(r);o=nm(o,7,[Math.log(3e-8),Math.log(35e-9)]);const i=rm(e,o,t);return am(n,i,"log")}function Vm(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:3003;const n=[.01,3.5],e=[{color:[23,79,124],mode:"lab",p:n[0]},{color:[98,155,204],mode:"lab",p:.15},{color:[255,255,255],mode:"lab",p:.8},{color:[239,169,126],mode:"lab",p:1.25},{color:[138,106,1],mode:"lab",p:2.25},{color:[61,0,45],mode:"lab",p:n[1]}];let r=tm(e);return r=nm(r,1,[.7,.9]),om(n,r,t)}const Gm=[{type:"recurring_interval",start:"2017-06-02T01:00Z",frequency:{hours:1}}],Zm=[{type:"recurring_interval",start:"2020-11-01T00:00Z",frequency:{hours:3}}],Km=[{type:"recurring_interval",start:"2021-10-21T12:00Z",frequency:{hours:1}}];let Jm={};function Qm(t,n,e){const{time_cursor:r}=t,o=xv(_v(r),e),i="now"===r,a=i?"current":dv(o,"{YYYY}/{MM}/{DD}"),u=`${i?"current":dv(o,"{hh}{mm}")}-${n}-cams.epak`;return qv(o).resolve("cams",a,u)}function tg(t){return Mr({descriptionHTML:void 0,paths:[],validTime:function(){return null},dateFormat:function(){return"{YYYY}-{MM}-{DD} {hh}:{mm} {TZ}"},alpha:{single:160,animated:112}},{sourceHTML:"CAMS / Copernicus / European Commission + ECMWF",timeline:t})}function ng(t){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1e3;const e=[360+t,470+t],r=[{color:[0,0,0],mode:"hcl",p:e[0]},{color:[100,0,0],mode:"hcl",p:400+t},{color:[164,36,0],mode:"hcl",p:405+t},{color:[255,220,140],mode:"hcl",p:420+t},{color:[255,255,255],mode:"hcl",p:450+t},{color:[0,210,255],mode:"hcl",p:e[1]}],o=r[3].p,i=r[4].p,a=r[1].p;let u=tm(r);return u=nm(u,0,[a-2,a+2]),u=nm(u,3,[o-2,o+2]),u=nm(u,5,[i-2,i+2]),om(e,u,n)}function eg(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:2e3;const n=[40,2500],e=[{color:[0,38,40],mode:"lab",p:n[0]},{color:[255,255,224],mode:"hcl",p:400},{color:[0,0,154],mode:"lab",p:1800},{color:[0,0,0],mode:"lab",p:n[1]}];let r=tm(e);return r=nm(r,0,[340,460]),r=nm(r,2,[1500,2100]),om(n,r,t)}function rg(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:400;const n=[1e-13,888e-9],e=n.map(Math.log),r=[{color:[134,134,107],mode:"hcl",p:e[0]},{color:[144,144,117],mode:"hcl",p:Math.log(1e-12)},{color:[255,255,224],mode:"hcl",p:Math.log(7e-11)},{color:[0,0,128],mode:"lab",p:Math.log(19e-8)},{color:[23,20,18],mode:"lab",p:e[1]}];let o=tm(r);o=nm(o,1,[Math.log(5e-11),Math.log(9e-11)]),o=nm(o,3,[Math.log(8e-8),Math.log(4e-7)]);const i=rm(e,o,t);return am(n,i,"log")}const og=function(t){const n=new Uint8Array(t.length/3*4);for(let e=0,r=0;e<t.length;e+=3,r+=4)n[r]=t[e],n[r+1]=t[e+1],n[r+2]=t[e+2],n[r+3]=255;return n}([4,4,4,10,3,8,13,4,11,16,5,14,18,5,16,21,6,18,22,7,19,24,8,21,26,8,22,27,9,24,28,10,25,30,11,26,31,12,27,32,12,28,33,13,29,35,14,31,36,14,32,37,15,32,38,15,33,39,16,34,40,17,35,41,17,36,42,18,38,43,19,38,44,19,39,46,20,41,46,20,45,46,21,50,45,21,55,45,21,60,45,22,64,45,23,67,45,23,71,45,24,75,45,24,77,45,25,81,45,25,84,44,26,87,44,27,90,45,27,92,45,28,95,44,29,98,44,29,100,44,30,103,44,31,106,44,31,109,44,32,110,44,33,113,44,34,116,43,34,118,42,35,121,40,38,120,38,40,119,36,42,120,34,44,120,33,46,120,32,47,120,31,49,121,30,50,122,30,51,123,29,52,123,29,53,125,28,55,125,28,56,126,27,57,127,28,58,128,28,59,129,27,60,129,27,61,131,27,62,132,27,63,133,28,64,134,27,65,135,27,66,136,27,68,137,27,69,138,25,71,136,22,73,134,21,74,133,20,76,131,17,78,129,16,79,128,15,81,126,14,82,125,10,84,123,10,85,122,9,87,120,8,88,119,7,89,118,6,91,117,4,92,115,4,94,114,4,95,114,3,96,112,1,98,111,1,99,110,0,100,109,0,101,108,0,103,107,0,104,106,0,105,105,0,107,104,0,108,101,0,110,100,0,111,99,0,112,98,0,114,96,0,115,95,0,116,93,0,118,92,0,119,90,0,120,89,0,121,88,0,123,86,0,124,85,0,125,83,0,127,82,0,128,80,0,129,79,0,131,77,0,132,75,0,133,73,0,134,72,0,136,70,0,137,68,0,138,66,0,139,65,0,141,64,0,142,63,0,143,61,0,145,60,0,146,60,0,147,58,0,149,57,0,150,56,0,151,55,0,153,53,0,154,52,0,155,51,0,157,50,0,158,48,0,159,47,0,160,45,0,162,44,0,163,42,0,164,41,0,165,39,0,167,36,0,168,34,0,169,31,0,170,23,0,169,8,9,170,0,20,171,0,29,172,0,35,173,0,40,174,0,45,175,0,48,176,0,52,177,0,55,178,0,59,179,0,61,180,0,64,181,0,66,182,0,68,183,0,71,184,0,73,185,0,76,186,0,78,187,0,79,188,0,81,189,0,83,190,0,85,191,0,87,192,0,92,193,0,99,193,0,106,193,0,114,193,0,119,194,0,125,194,0,130,194,0,135,195,0,140,195,0,145,195,0,149,196,0,153,196,0,157,197,0,161,197,0,165,197,0,169,198,0,172,198,0,176,199,0,180,199,0,184,199,0,186,200,0,190,201,0,193,201,0,197,201,0,200,202,0,201,201,24,203,202,51,206,202,65,207,203,77,209,203,87,212,203,95,213,204,103,215,205,109,218,205,116,219,206,121,221,207,127,223,207,132,226,207,138,227,208,143,229,209,147,231,209,151,232,210,155,235,211,159,237,211,164,238,212,168,240,212,172,243,213,175,243,214,179,245,214,183,248,215,186,248,216,189,248,218,193,247,219,195,247,220,198,247,222,201,248,223,204,247,224,206,247,226,209,247,227,211,247,229,214,247,230,216,247,231,218,247,232,220,248,234,224,247,235,225,247,236,229,247,238,231,247,239,232,248,240,235,248,242,237,247,243,239,248,244,241,248,246,244,248,247,246,248,248,248,249,249,249,251,251,251,252,252,252,253,253,253,254,254,254,255,255,255]);function ig(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:500;const n=[.002,2.5],e=n.map(Math.log),r=Gv(lf,"cubehelix",e),o=rm(e,[r],t);return am(n,o,"log")}function ag(t,n){var e=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(t,n).enumerable}))),e.push.apply(e,r)}return e}function ug(t){for(var n=1;n<arguments.length;n++){var e=null!=arguments[n]?arguments[n]:{};n%2?ag(Object(e),!0).forEach((function(n){lg(t,n,e[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(e)):ag(Object(e)).forEach((function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(e,n))}))}return t}function lg(t,n,e){return n in t?Object.defineProperty(t,n,{value:e,enumerable:!0,configurable:!0,writable:!0}):t[n]=e,t}const cg=Fo()?"":"(<a href='about.html#aot' class='internal-link'>AOT</a>)",sg=lv({year:2019,month:9,day:1}),fg=[{type:"recurring_interval",start:"2015-07-25T00:00Z",end:"2019-09-01T00:00Z",frequency:{hours:3}},{type:"recurring_interval",start:"2019-09-01T00:00Z",frequency:{hours:1}}],hg=[{type:"recurring_interval",start:"2015-07-24T22:30Z",frequency:{hours:3}}];let dg={};function pg(t,n,e,r){const{time_cursor:o}=t,i=_v(o);void 0===e&&(e=lv(i)>sg?{hour:1}:{hour:3});const a=xv(i,e,r),u="now"===o?"current":dv(a,"{YYYY}/{MM}/{DD}"),l=["now"===o?"current":dv(a,"{hh}{mm}"),n,"geos.epak"].join("-");return qv(a).resolve("geos",u,l)}function vg(t,n){const e=lv(_v(t.time_cursor))>sg?Av:Tv;return ug({sourceHTML:Ev,timeline:n},e(t.time_cursor))}function mg(t){Array.isArray(t)&&(t=jv(t,["u","v"],["time","level","lat","lon"]));const n=t,{variables:e}=n.header,r=e.U||e.u||e["u-component_of_wind_isobaric"]||e["u-component_of_wind_height_above_ground"],o=e.V||e.v||e["v-component_of_wind_isobaric"]||e["v-component_of_wind_height_above_ground"],i=e[r.dimensions[0]],a=e[r.dimensions[2]],u=e[r.dimensions[3]],l=Ce(n.blocks[r.data.block],n.blocks[o.data.block]);l.containsNaN=!1;const c=Sv(u.sequence,a.sequence),s={valueAt:t=>{const n=2*t;return[l[n],l[n+1]]},scalarize:Ve,isDefined:t=>!isNaN(l[2*t]),nearest:kv(c,l),bilinear:Pv(c,l)};return{validTime:()=>av(i.data[0]),grid:()=>c,field:()=>s,valueInRange(t){return[this.scale.valueInRange(t),0]}}}function gg(t,n){const e=mg(t).field(),r=e.valueAt,o=e.nearest,i=e.bilinear,a=Ov(n,/air_density/,{hasMissing:!1,legacyName:"air_density"}),u=a.field(),l=u.valueAt,c=u.isDefined,s=u.nearest,f=u.bilinear;function h(t,n){return.5*n*Ve(t)**3}const d={valueAt:t=>h(r(t),l(t)),scalarize:t=>t,isDefined:c,nearest:(t,n)=>h(o(t,n),s(t,n)),bilinear:(t,n)=>h(i(t,n),f(t,n))};return{validTime:a.validTime,grid:a.grid,field:()=>d,valueInRange(t){return this.scale.valueInRange(t)}}}function yg(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:10;const n=[0,1.5],e=[[0,[0,0,0]],[1.5,[255,255,255]]];return im(n,e,t)}function _g(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1e3;const n=[0,5e3],e=[[0,[5,48,97]],[500,[33,102,172]],[1e3,[67,147,195]],[1500,[146,197,222]],[2e3,[209,229,240]],[2500,[247,247,247]],[3e3,[253,219,199]],[3500,[244,165,130]],[4e3,[214,96,77]],[4500,[178,24,43]],[5e3,[103,0,31]]];return im(n,e,t)}function wg(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1e3;const n=[236,332],e=[[241,[255,255,255]],[245.5,[6,82,255]],[250,[6,82,255]],[258,[46,131,255]],[266,[46,131,255]],[280,[0,0,0]],[300,[0,0,0]],[305,[247,20,35]],[309.5,[247,20,35]],[314,[245,210,5]],[320.5,[245,210,5]],[327,[255,255,255]]];return im(n,e,t)}function bg(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1e3;const n=[92e3,105e3],e=[[92e3,[40,0,0]],[95e3,[187,60,31]],[96500,[137,32,30]],[98e3,[16,1,43]],[100500,[36,1,93]],[101300,[241,254,18]],[103e3,[228,246,223]],[105e3,[255,255,255]]];return im(n,e,t)}function xg(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:2e3;const n=[0,150],e=[{color:[37,79,92],mode:"hcl",p:n[0]},{color:"aliceblue",mode:"hcl",p:2},{color:[51,26,155],mode:"hcl",p:15},{color:"gold",mode:"hcl",p:100},{color:"white",mode:"hcl",p:n[1]}];let r=tm(e);return r=nm(r,0,[.6,3.4]),r=nm(r,2,[12,18]),om(n,r,t)}function Mg(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1e3;const n=[0,100],e=[[0,[230,165,30]],[25,[120,100,95]],[60,[40,44,92]],[75,[21,13,193]],[90,[75,63,235]],[100,[25,255,255]]];return im(n,e,t)}function Ag(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1e3;const n=[0,1],e=[[0,[5,5,89]],[.2,[170,170,230]],[1,[255,255,255]]];return im(n,e,t)}function Tg(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1e3;const n=[0,70],e=[[0,[230,165,30]],[10,[120,100,95]],[20,[40,44,92]],[30,[21,13,193]],[40,[75,63,235]],[60,[25,255,255]],[70,[150,255,255]]];return im(n,e,t)}function Eg(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:2e3;const n=[193.15,328.15],e=[[193.15,[37,4,42]],[206,[41,10,130]],[219,[81,40,40]],[233.15,[192,37,149]],[255.372,[70,215,215]],[273.15,[21,84,187]],[275.15,[24,132,14]],[291,[247,251,59]],[298,[235,167,21]],[311,[230,71,39]],[328.15,[88,27,67]]];return im(n,e,t)}function Sg(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1e3;const n=[0,100],e=new Uint8Array(4*t);return em(e,[0,1],[0,1],Qv),am(n,e)}function Ng(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1e4;const n=[0,8e4],e=[[0,[15,4,96]],[250,[30,8,180]],[1e3,[121,102,2]],[2e3,[118,161,66]],[4e3,[50,102,219]],[8e3,[19,131,193]],[16e3,[59,204,227]],[64e3,[241,1,45]],[8e4,[243,0,241]]];return im(n,e,t)}const kg=+Date.UTC(2014,10,24),Dg=+Date.UTC(2015,2,11),Pg=+Date.UTC(2016,5,22),Lg=+Date.UTC(2021,0,1),jg=[{type:"recurring_interval",start:"2013-11-01T00:00Z",end:"2021-01-01T00:00Z",frequency:{hours:3}},{type:"recurring_interval",start:"2021-01-01T00:00Z",frequency:{hours:1}}];let Rg={};function Og(t,n,e,r){const{time_cursor:o,hd_enabled:i}=t,a=xv(_v(o),e),u="now"===o?"current":dv(a,"{YYYY}/{MM}/{DD}"),l="now"===o?"current":dv(a,"{hh}{mm}"),c=lv(a),s=c>=kg?".epak":".json";let f="0.5";c<Dg||qo()?f="1.0":c>=Pg&&i&&(f="0.25");const h=[l,n,"surface"===r?"surface":void 0!==r?"isobaric":void 0,"surface"===r?"level":void 0!==r?r:void 0,"gfs",f].filter((t=>void 0!==t)).join("-")+s;return qv(a).resolve("gfs",u,h)}function $g(t){const{time_cursor:n}=t;return Mr({descriptionHTML:void 0,paths:[],validTime:function(){return null},dateFormat:function(){return"{YYYY}-{MM}-{DD} {hh}:{mm} {TZ}"},alpha:{single:160,animated:112}},{sourceHTML:"GFS / NCEP / US National Weather Service",timeline:jg},lv(_v(n))>=Lg?Av(n):Tv(n))}function zg(t){var n;const e=$g(t);return Mr(e,{type:"wind",descriptionHTML:{name:Kr`Wind`,qualifier:` @ ${bv(t)}`},paths:[Og(t,"wind",e.alignment(),t.z_level)],builder:mg,unitDescriptors:Yv({"km/h":{convert:t=>Ke(t,3.6),scalarize:Ve,precision:0,convention:"into"},"m/s":{scalarize:Ve,precision:1,convention:"into"},kn:{convert:t=>Ke(t,1.943844),scalarize:Ve,precision:0,convention:"into"},mph:{convert:t=>Ke(t,2.236936),scalarize:Ve,precision:0,convention:"into"}}),supported_z_levels:["surface","1000hPa","850hPa","700hPa","500hPa","250hPa","70hPa","10hPa"],scale:null!==(n=Rg.wind)&&void 0!==n?n:Rg.wind=Sg(),particles:{velocityScale:.01,maxIntensity:15}})}function Yg(t){var n;const e=$g(t);return Mr(e,{type:"air_density",descriptionHTML:{name:Kr`Air Density`,qualifier:` @ ${bv(t)}`},paths:[Og(t,"air_density",e.alignment(),t.z_level)],builder:t=>Ov(t,/air_density/,{hasMissing:!1}),unitDescriptors:Yv({"kg/m^3":{convert:t=>t,precision:2}}),supported_z_levels:["1000hPa","850hPa","700hPa","500hPa","250hPa","70hPa","10hPa"],scale:null!==(n=Rg.airdens)&&void 0!==n?n:Rg.airdens=yg()})}const Ig=[{type:"recurring_interval",start:"2014-01-01T00:00Z",frequency:{days:1}}];let Cg={};function Fg(t,n){const e=_v(t.time_cursor),r="now"===t.time_cursor,o=r?"current":dv(e,"{YYYY}/{MM}"),i=`${r?"current":dv(e,"{YYYY}{MM}{DD}")}-${n}-crw-${t.hd_enabled?"0.05":"0.15"}.epak`;return qv(e).resolve("crw",o,i)}const qg=[Kr`No Stress`,Kr`Bleaching Watch`,Kr`Bleaching Warning`,Kr`Alert Level 1`,Kr`Alert Level 2`];function Ug(){for(var t=arguments.length,n=new Array(t),e=0;e<t;e++)n[e]=arguments[e];const r=n.map((t=>Rn(t)));return t=>r.some((n=>n(t)))}const Hg={wind:{matchesPrimary:Ug({animation_type:"wind"}),matchesOverlay:Ug({overlay_type:"wind"}),create:zg},temp:{matchesOverlay:Ug({overlay_type:"temp"}),create:function(t){var n;const e=/Temperature/,r=$g(t);return Mr(r,{type:"temp",descriptionHTML:{name:Kr`Temperature`,qualifier:` @ ${bv(t)}`},paths:[Og(t,"temp",r.alignment(),t.z_level)],builder:t=>Ov(t,e,{hasMissing:!1,legacyName:"Temperature"}),unitDescriptors:Yv({"°C":{convert:t=>t-273.15,precision:1},"°F":{convert:t=>9*t/5-459.67,precision:1},K:{convert:t=>t,precision:1}}),supported_z_levels:["surface","1000hPa","850hPa","700hPa","500hPa","250hPa","70hPa","10hPa"],scale:null!==(n=Rg.temp)&&void 0!==n?n:Rg.temp=Eg()})}},relative_humidity:{matchesOverlay:Ug({overlay_type:"relative_humidity"}),create:function(t){var n;const e=/Relative_humidity/,r=$g(t);return Mr(r,{type:"relative_humidity",descriptionHTML:{name:Kr`Relative Humidity`,qualifier:` @ ${bv(t)}`},paths:[Og(t,"relative_humidity",r.alignment(),t.z_level)],builder:t=>Ov(t,e,{hasMissing:!1}),unitDescriptors:Yv({"%":{convert:t=>t,precision:0}}),supported_z_levels:["surface","1000hPa","850hPa","700hPa","500hPa","250hPa","70hPa","10hPa"],scale:null!==(n=Rg.rh)&&void 0!==n?n:Rg.rh=Mg()})}},air_density:{matchesOverlay:Ug({overlay_type:"air_density"}),create:Yg},wind_power_density:{matchesOverlay:Ug({overlay_type:"wind_power_density"}),create:function(t){var n;const e=zg(t),r=Yg(t);return Mr($g(t),{type:"wind_power_density",descriptionHTML:{name:Kr`Instantaneous Wind Power Density`,qualifier:` @ ${bv(t)}`},paths:[e.paths[0],r.paths[0]],builder:gg,unitDescriptors:Yv({"kW/m^2":{convert:t=>t/1e3,precision:1},"W/m^2":{convert:t=>t,precision:0}}),supported_z_levels:["1000hPa","850hPa","700hPa","500hPa","250hPa","70hPa","10hPa"],scale:null!==(n=Rg.wpd)&&void 0!==n?n:Rg.wpd=Ng()})}},misery_index:{matchesOverlay:Ug({overlay_type:"misery_index"}),create:function(t){var n;const e=` ${Kr`(feels like)`}`,r=$g(t);return Mr(r,{type:"misery_index",descriptionHTML:{name:Kr`Misery Index`,qualifier:""},paths:[Og(t,"misery_index",r.alignment())],builder:t=>Ov(t,/misery_index/,{hasMissing:!1}),unitDescriptors:Yv({"°C":{html:"°C"+e,convert:t=>t-273.15,precision:1},"°F":{html:"°F"+e,convert:t=>9*t/5-459.67,precision:1},K:{html:"K"+e,convert:t=>t,precision:1}}),scale:null!==(n=Rg.misery)&&void 0!==n?n:Rg.misery=wg()})}},total_cloud_water:{matchesOverlay:Ug({overlay_type:"total_cloud_water"}),create:function(t){var n;const e=/Cloud_water/,r=$g(t);return Mr(r,{type:"total_cloud_water",descriptionHTML:{name:Kr`Total Cloud Water`,qualifier:""},paths:[Og(t,"total_cloud_water",r.alignment())],builder:t=>Ov(t,e,{hasMissing:!1,legacyName:"Cloud_water"}),unitDescriptors:Yv({"kg/m^2":{convert:t=>t,precision:3}}),scale:null!==(n=Rg.tcw)&&void 0!==n?n:Rg.tcw=Ag()})}},total_precipitable_water:{matchesOverlay:Ug({overlay_type:"total_precipitable_water"}),create:function(t){var n;const e=/Precipitable_water/,r=$g(t);return Mr(r,{type:"total_precipitable_water",descriptionHTML:{name:Kr`Total Precipitable Water`,qualifier:""},paths:[Og(t,"total_precipitable_water",r.alignment())],builder:t=>Ov(t,e,{hasMissing:!1,legacyName:"Precipitable_water"}),unitDescriptors:Yv({"kg/m^2":{convert:t=>t,precision:3}}),scale:null!==(n=Rg.tpw)&&void 0!==n?n:Rg.tpw=Tg()})}},mean_sea_level_pressure:{matchesOverlay:Ug({overlay_type:"mean_sea_level_pressure"}),create:function(t){var n;const e=/Pressure_reduced_to_MSL/,r=$g(t);return Mr(r,{type:"mean_sea_level_pressure",descriptionHTML:{name:Kr`Mean Sea Level Pressure`,qualifier:""},paths:[Og(t,"mean_sea_level_pressure",r.alignment())],builder:t=>Ov(t,e,{hasMissing:!1,legacyName:"Pressure_reduced_to_MSL"}),unitDescriptors:Yv({hPa:{convert:t=>t/100,precision:0},mmHg:{convert:t=>t/133.322387415,precision:0},inHg:{convert:t=>t/3386.389,precision:1}}),scale:null!==(n=Rg.mslp)&&void 0!==n?n:Rg.mslp=bg()})}},precip_3hr:{matchesOverlay:Ug({overlay_type:"precip_3hr"}),create:function(t){var n;const e=$g(t);return Mr(e,{type:"precip_3hr",descriptionHTML:{name:Kr`3-hour Precipitation Accumulation`,qualifier:""},paths:[Og(t,"precip_3hr",e.alignment())],builder:t=>Ov(t,/precip_accumulation_3hr/,{hasMissing:!1}),unitDescriptors:Yv({mm:{convert:t=>t,precision:1},in:{convert:t=>t/25.4,precision:2},"kg/m^2":{convert:t=>t,precision:1}}),alpha:{single:160,animated:160},scale:null!==(n=Rg.precip)&&void 0!==n?n:Rg.precip=xg()})}},cape:{matchesOverlay:Ug({overlay_type:"cape"}),create:function(t){var n;const e=$g(t);return Mr(e,{type:"cape",descriptionHTML:{name:Kr`Convective Available Potential Energy from Surface`,qualifier:""},paths:[Og(t,"cape",e.alignment())],builder:t=>Ov(t,/Convective_available_potential_energy_surface/,{hasMissing:!1}),unitDescriptors:Yv({"J/kg":{convert:t=>t,precision:0}}),alpha:{single:160,animated:140},scale:null!==(n=Rg.cape)&&void 0!==n?n:Rg.cape=_g()})}},uv_index:{matchesOverlay:Ug({overlay_type:"uv_index"}),create:function(t){var n;const e=Mr({descriptionHTML:void 0,paths:[],validTime:function(){return null},dateFormat:function(){return"{YYYY}-{MM}-{DD} {hh}:{mm} {TZ}"},alpha:{single:160,animated:112}},Av(t.time_cursor));return Mr(e,{sourceHTML:"CPC / NCEP / US National Weather Service",type:"uv_index",descriptionHTML:{name:Kr`Ultraviolet Index and Erythemal Dose Rate`,qualifier:` @ ${Kr`Surface`}`},timeline:Im,paths:[Fm(t,e.alignment())],builder:t=>Ov(t,/Ultra_Violet_Index_surface/,{hasMissing:!1}),unitDescriptors:Yv({"UV Index":{convert:Hm,precision:0,html:qm,format:Bm},"mW/m^2":{convert:t=>1e3*t,precision:0}}),alpha:{single:210,animated:160},scale:null!==(n=Cm.uv)&&void 0!==n?n:Cm.uv=Ym()})}},cosc:{matchesOverlay:Ug({overlay_type:"cosc"}),create:function(t){var n;return Mr({descriptionHTML:void 0,paths:[],validTime:function(){return null},dateFormat:function(){return"{YYYY}-{MM}-{DD} {hh}:{mm} {TZ}"},alpha:{single:160,animated:112}},vg(t,fg),{type:"cosc",descriptionHTML:{name:Kr`Carbon Monoxide Surface Concentration`,qualifier:""},paths:[pg(t,"cosc")],builder:t=>Ov(t,/COSC/,{hasMissing:!1}),unitDescriptors:Yv({ppbv:{convert:t=>t,precision:0},ppmv:{convert:t=>t/1e3,precision:2}}),alpha:{single:160,animated:140},scale:null!==(n=dg.cosc)&&void 0!==n?n:dg.cosc=eg()})}},so2smass:{matchesOverlay:Ug({overlay_type:"so2smass"}),create:function(t){var n;return Mr({descriptionHTML:void 0,paths:[],validTime:function(){return null},dateFormat:function(){return"{YYYY}-{MM}-{DD} {hh}:{mm} {TZ}"},alpha:{single:160,animated:112}},vg(t,fg),{type:"so2smass",descriptionHTML:{name:Kr`Sulfur Dioxide Surface Mass`,qualifier:""},paths:[pg(t,"so2smass")],builder:t=>Ov(t,/SO2SMASS/,{hasMissing:!1}),unitDescriptors:Yv({"µg/m^3":{convert:t=>1e9*t,precision:2}}),alpha:{single:160,animated:140},scale:null!==(n=dg.so2smass)&&void 0!==n?n:dg.so2smass=rg()})}},duexttau:{matchesOverlay:Ug({overlay_type:"duexttau"}),create:function(t){var n;return Mr({descriptionHTML:void 0,paths:[],validTime:function(){return null},dateFormat:function(){return"{YYYY}-{MM}-{DD} {hh}:{mm} {TZ}"},alpha:{single:160,animated:112}},vg(t,fg),{type:"duexttau",descriptionHTML:{name:`${Kr`Dust Extinction (Aerosol Optical Thickness, 550 nm)`} ${cg}`,qualifier:""},paths:[pg(t,"duexttau")],builder:t=>Ov(t,/DUEXTTAU/,{hasMissing:!1}),unitDescriptors:Yv({τ:{convert:t=>t,precision:4}}),alpha:{single:160,animated:140},scale:null!==(n=dg.duexttau)&&void 0!==n?n:dg.duexttau=am([1e-4,3],og,"log")})}},suexttau:{matchesOverlay:Ug({overlay_type:"suexttau"}),create:function(t){var n;return Mr({descriptionHTML:void 0,paths:[],validTime:function(){return null},dateFormat:function(){return"{YYYY}-{MM}-{DD} {hh}:{mm} {TZ}"},alpha:{single:160,animated:112}},vg(t,fg),{type:"suexttau",descriptionHTML:{name:`${Kr`Sulfate Extinction (Aerosol Optical Thickness, 550 nm)`} ${cg}`,qualifier:""},paths:[pg(t,"suexttau")],builder:t=>Ov(t,/SUEXTTAU/,{hasMissing:!1}),unitDescriptors:Yv({τ:{convert:t=>t,precision:3}}),alpha:{single:240,animated:140},scale:null!==(n=dg.suexttau)&&void 0!==n?n:dg.suexttau=ig()})}},co2sc:{matchesOverlay:Ug({overlay_type:"co2sc"}),create:function(t){var n,e,r;const o={hour:3},i={minute:90},a=xv(_v(t.time_cursor),o,i),u=lv({year:2017,month:1,day:24,hour:4,minute:30}),l=lv(a)<u,c=l?32:0,s=lv({year:2018,month:7,day:11,hour:4,minute:30});function f(t){for(let n=0;n<t.length;n++)t[n]+=c}const h="A"==(lv(a)<s?"A":"B")?l?null!==(n=dg.co2scAX)&&void 0!==n?n:dg.co2scAX=ng(-8):null!==(e=dg.co2scAY)&&void 0!==e?e:dg.co2scAY=ng(0):null!==(r=dg.co2scB)&&void 0!==r?r:dg.co2scB=function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1e3;const n=[380,510],e=[{color:[0,0,0],mode:"hcl",p:n[0]},{color:[100,0,0],mode:"hcl",p:412},{color:[164,36,0],mode:"hcl",p:418},{color:[255,220,140],mode:"hcl",p:438},{color:[0,220,180],mode:"hcl",p:485},{color:[0,255,255],mode:"hcl",p:n[1]}],r=e[3].p,o=e[4].p,i=e[1].p;let a=tm(e);return a=nm(a,0,[i-3,i+2]),a=nm(a,3,[r-3,r+3]),a=nm(a,5,[o-3,o+3]),om(n,a,t)}();return Mr({descriptionHTML:void 0,paths:[],validTime:function(){return null},dateFormat:function(){return"{YYYY}-{MM}-{DD} {hh}:{mm} {TZ}"},alpha:{single:160,animated:112}},vg(t,hg),ug(ug({type:"co2sc",descriptionHTML:{name:Kr`Carbon Dioxide Surface Concentration`,qualifier:""},sourceHTML:Ev,paths:[pg(t,"co2sc",o,i)]},Tv(t.time_cursor,i)),{},{builder:t=>Ov(t,/CO2SC/,{hasMissing:!1,transform:0!==c?f:t=>t}),unitDescriptors:Yv({ppmv:{convert:t=>t,precision:0}}),alpha:{single:200,animated:150},scale:h}))}},currents:{matchesPrimary:Ug({animation_type:"currents"}),matchesOverlay:Ug({overlay_type:"currents"}),create:function(t){return io(Fv.resolve("oscar","oscar-catalog.json")).then((n=>function(t,n){var e;const r=function(t,n){const e=Rm(t,n);return e?pv(e,/(\d{4})(\d\d)(\d\d)/):void 0}(t,n.time_cursor),o=n=>function(){return function(t,n,e){const r=Rm(t,vv(n),e);return r?pv(r,/(\d{4})(\d\d)(\d\d)/):void 0}(t,this.validTime(),n)};return Mr({descriptionHTML:void 0,paths:[],validTime:function(){return null},dateFormat:function(){return"{YYYY}-{MM}-{DD} {hh}:{mm} {TZ}"},alpha:{single:160,animated:112}},{type:"currents",descriptionHTML:{name:Kr`Ocean Currents`,qualifier:` @ ${Kr`Surface`}`},sourceHTML:"OSCAR / Earth & Space Research",paths:[Om(t,n)],validTime:()=>Mr(r),timeline:$m(t),prev2:o(-6),prev1:o(-1),next1:o(1),next2:o(6),navLabels:{prev2:`-1 ${Kr`month`}`,prev1:`-5 ${Kr`days`}`,next1:`+5 ${Kr`days`}`,next2:`+1 ${Kr`month`}`},builder:zm,unitDescriptors:Yv({"m/s":{scalarize:Ve,precision:2,convention:"with"},"km/h":{convert:t=>Ke(t,3.6),scalarize:Ve,precision:1,convention:"with"},kn:{convert:t=>Ke(t,1.943844),scalarize:Ve,precision:1,convention:"with"},mph:{convert:t=>Ke(t,2.236936),scalarize:Ve,precision:1,convention:"with"}}),scale:null!==(e=Pm)&&void 0!==e?e:Pm=jm(),particles:{velocityScale:1/7,maxIntensity:.7}})}(n,t)))}},primary_waves:{matchesPrimary:Ug({animation_type:"primary_waves"}),matchesOverlay:Ug({overlay_type:"primary_waves"}),create:function(t){var n;return Mr({descriptionHTML:void 0,paths:[],validTime:function(){return null},dateFormat:function(){return"{YYYY}-{MM}-{DD} {hh}:{mm} {TZ}"},alpha:{single:160,animated:112}},fm(t),{type:"primary_waves",descriptionHTML:{name:Kr`Peak Wave Period`,qualifier:""},paths:[sm(t,"primary")],builder:Lv,unitDescriptors:Yv({s:{scalarize:Ve,precision:1,convention:"into"}}),scale:null!==(n=cm.primaryWaves)&&void 0!==n?n:cm.primaryWaves=lm(),particles:{velocityScale:1/612,maxIntensity:12,waves:!0}})}},significant_wave_height:{matchesOverlay:Ug({overlay_type:"significant_wave_height"}),create:function(t){var n;const e=/Significant_height/;return Mr({descriptionHTML:void 0,paths:[],validTime:function(){return null},dateFormat:function(){return"{YYYY}-{MM}-{DD} {hh}:{mm} {TZ}"},alpha:{single:160,animated:112}},fm(t),{type:"significant_wave_height",descriptionHTML:{name:Kr`Significant Wave Height`,qualifier:""},paths:[sm(t,"sig_height")],builder:t=>Ov(t,e,{hasMissing:!0}),unitDescriptors:Yv({m:{convert:t=>t,precision:2},ft:{convert:t=>100*t/2.54/12,precision:1}}),scale:null!==(n=cm.htsgw)&&void 0!==n?n:cm.htsgw=um()})}},sea_surface_temp:{matchesOverlay:Ug({overlay_type:"sea_surface_temp"}),create:function(t){return lv(_v(t.time_cursor))>=Em?function(t,n){var e;return Mr({descriptionHTML:void 0,paths:[],validTime:function(){return null},dateFormat:function(){return"{YYYY}-{MM}-{DD} {hh}:{mm} {TZ}"},alpha:{single:160,animated:112}},ym(t,n),{type:pm,descriptionHTML:{name:Kr`Sea Surface Temperature`,qualifier:""},paths:[gm(t,pm)],builder:t=>Ov(t,/analysed_sst/,{hasMissing:!0}),unitDescriptors:Yv({"°C":{convert:t=>t-273.15,precision:1},"°F":{convert:t=>9*t/5-459.67,precision:1},K:{convert:t=>t,precision:1}}),scale:null!==(e=mm.sst)&&void 0!==e?e:mm.sst=dm(),alpha:{single:200,animated:132}})}(t,Nm):function(t,n){var e;return Mr({descriptionHTML:void 0,paths:[],validTime:function(){return null},dateFormat:function(){return"{YYYY}-{MM}-{DD} {hh}:{mm} {TZ}"},alpha:{single:160,animated:112}},xm(t,n),{type:"sea_surface_temp",descriptionHTML:{name:Kr`Sea Surface Temperature`,qualifier:""},paths:[bm(t,"sea_surface_temp")],builder:t=>Ov(t,/Temperature_surface_sparse/,{hasMissing:!0}),unitDescriptors:Yv({"°C":{convert:t=>t-273.15,precision:1},"°F":{convert:t=>9*t/5-459.67,precision:1},K:{convert:t=>t,precision:1}}),scale:null!==(e=wm.sst)&&void 0!==e?e:wm.sst=_m(),alpha:{single:200,animated:132}})}(t,Nm)}},sea_surface_temp_anomaly:{matchesOverlay:Ug({overlay_type:"sea_surface_temp_anomaly"}),create:function(t){const n=lv(_v(t.time_cursor));return n>=Sm?function(t,n){var e;return Mr({descriptionHTML:void 0,paths:[],validTime:function(){return null},dateFormat:function(){return"{YYYY}-{MM}-{DD} {hh}:{mm} {TZ}"},alpha:{single:160,animated:112}},function(t,n){const e=hv(_v(t.time_cursor),{day:"now"===t.time_cursor?-1:0}),r={day:1},o=xv(e,r),i=t=>function(){return xv(hv(this.validTime(),t),r)};return{sourceHTML:"OI SST V2.1 / PSL / NOAA",validTime:()=>Mr(o),timeline:n,prev2:i({day:-5}),prev1:i({day:-1}),next1:i({day:1}),next2:i({day:5}),navLabels:{prev2:`-5 ${Kr`days`}`,prev1:`-1 ${Kr`day`}`,next1:`+1 ${Kr`day`}`,next2:`+5 ${Kr`days`}`}}}(t,n),{type:Mm,descriptionHTML:{name:Kr`Sea Surface Temperature Anomaly`,qualifier:""},paths:[Tm(t,Mm)],builder:t=>Ov(t,/anom/,{hasMissing:!0}),unitDescriptors:Yv({"°C":{convert:t=>t,precision:1},"°F":{convert:t=>9*t/5,precision:1},K:{convert:t=>t,precision:1}}),scale:null!==(e=Am.ssta)&&void 0!==e?e:Am.ssta=hm()})}(t,Nm):n>=Em?function(t,n){var e;return Mr({descriptionHTML:void 0,paths:[],validTime:function(){return null},dateFormat:function(){return"{YYYY}-{MM}-{DD} {hh}:{mm} {TZ}"},alpha:{single:160,animated:112}},ym(t,n),{type:vm,descriptionHTML:{name:Kr`Sea Surface Temperature Anomaly`,qualifier:""},paths:[gm(t,vm)],builder:t=>Ov(t,/sst_anomaly/,{hasMissing:!0}),unitDescriptors:Yv({"°C":{convert:t=>t,precision:1},"°F":{convert:t=>9*t/5,precision:1},K:{convert:t=>t,precision:1}}),scale:null!==(e=mm.ssta)&&void 0!==e?e:mm.ssta=hm()})}(t,Nm):function(t,n){var e;return Mr({descriptionHTML:void 0,paths:[],validTime:function(){return null},dateFormat:function(){return"{YYYY}-{MM}-{DD} {hh}:{mm} {TZ}"},alpha:{single:160,animated:112}},xm(t,n),{type:"sea_surface_temp_anomaly",descriptionHTML:{name:Kr`Sea Surface Temperature Anomaly`,qualifier:""},paths:[bm(t,"sea_surface_temp_anomaly")],builder:t=>Ov(t,/Temperature_surface_anomaly_sparse/,{hasMissing:!0}),unitDescriptors:Yv({"°C":{convert:t=>t,precision:1},"°F":{convert:t=>9*t/5,precision:1},K:{convert:t=>t,precision:1}}),scale:null!==(e=wm.ssta)&&void 0!==e?e:wm.ssta=hm()})}(t,Nm)}},bleaching_alert_area:{matchesOverlay:Ug({overlay_type:"bleaching_alert_area"}),create:function(t){var n;return Mr({descriptionHTML:void 0,paths:[],validTime:function(){return null},dateFormat:function(){return"{YYYY}-{MM}-{DD} {hh}:{mm} {TZ}"},alpha:{single:160,animated:112}},Mv(t.time_cursor,{day:1},undefined,{prev2:{day:-5},prev1:{day:-1},next1:{day:1},next2:{day:5}},{prev2:`-5 ${Kr`days`}`,prev1:`-1 ${Kr`day`}`,next1:`+1 ${Kr`day`}`,next2:`+5 ${Kr`days`}`}),{sourceHTML:"Coral Reef Watch / NOAA",timeline:Ig},{type:"bleaching_alert_area",descriptionHTML:{name:Kr`Bleaching Alert Area`,qualifier:""},paths:[Fg(t,"baa")],builder:t=>Ov(t,/bleaching_alert_area/,{hasMissing:!0}),unitDescriptors:Yv({heat_stress_level:{type:"enum",elements:qg}}),scale:null!==(n=Cg.baa)&&void 0!==n?n:Cg.baa=im([0,4],[[0,[5,122,176]],[1,[255,255,178]],[2,[254,204,92]],[3,[253,141,60]],[4,[227,26,28]]],5),alpha:{single:200,animated:132}})}},aurora:{matchesOverlay:Ug({overlay_type:"aurora"}),create:function(t){var n;const e=xv(_v(t.time_cursor),{minute:5}),r=t=>function(){return xv(hv(e,t),{minute:5})};return Mr({descriptionHTML:void 0,paths:[],validTime:function(){return null},dateFormat:function(){return"{YYYY}-{MM}-{DD} {hh}:{mm} {TZ}"},alpha:{single:160,animated:112}},{type:"aurora",descriptionHTML:{name:Kr`Probability of Visible Aurora`,qualifier:""},sourceHTML:"OVATION / SWPC / NCEP / NWS / NOAA",paths:[Lm(t)],validTime:()=>Mr(e),timeline:[{type:"recurring_interval",start:"2018-02-24T05:55Z",frequency:{minutes:5}}],prev2:r({hour:-1}),prev1:r({minute:-5}),next1:r({minute:5}),next2:r({hour:1}),navLabels:{prev2:`-1 ${Kr`hour`}`,prev1:`-5 ${Kr`minutes`}`,next1:`+5 ${Kr`minutes`}`,next2:`+1 ${Kr`hour`}`},builder:t=>{var n;return null!==(n=t.has_missing)&&void 0!==n||(t.has_missing=!1),function(t){const{Conventions:n,source:e,has_missing:r,date:o,encoding:i}=t;if("earth.nullschool.net/flat-1.0"!==n)throw new Error(`Unsupported data conventions: ${Sn(n)}`);const a={start:+t.lon.start,delta:+t.lon.delta,size:Xe(+t.lon.size,0,8192)},u={start:+t.lat.start,delta:+t.lat.delta,size:Xe(+t.lat.size,0,8192)},l=Array.isArray(t.data)?t.data:[];let c=t=>t;if(i){if("packed_delta_rle"!==i.type)throw new Error(`Unsupported encoding: ${Sn(i.type)}`);{const{scale_factor:t=1,add_offset:n=0}=i;c=e=>function(t,n,e,r){const o=new Float32Array(r);let i=0;for(let a=0,u=0;a<t.length&&i<r;a++){const l=t[a],c=Array.isArray(l),s=c?l[0]:l,f=c?Xe(+l[1]+i,i,r):i+1,h=+s;if(null===s||h!=h){if(!(i<f))continue;for(;i<f;)o[i++]=NaN;u=0}else for(;i<f;)o[i++]=(u+=h)*n+e}for(;i<r;)o[i++]=NaN;return o}(e,+t,+n,a.size)}}const s=new Float32Array(a.size*u.size);let f=0;var h;l.filter(Array.isArray).forEach((t=>{const n=c(t);s.set(n,f),f+=n.length})),s.containsNaN=!0===(h=r)||!1===h?!!h:void 0;const d=Sv(a,u),p={valueAt:t=>s[t],scalarize:t=>t,isDefined:t=>!isNaN(s[t]),nearest:Nv(d,s),bilinear:Dv(d,s)};return{source:Sn(e),validTime:()=>av(o),grid:()=>d,field:()=>p,valueInRange(t){return this.scale.valueInRange(t)}}}(t)},unitDescriptors:Yv({"%":{html:Kr`% Visibility Chance`,convert:t=>t,precision:0}}),alpha:{single:160,animated:140},scale:null!==(n=Dm)&&void 0!==n?n:Dm=km()})}},pm1:{matchesOverlay:Ug({overlay_type:"pm1"}),create:function(t){var n;const e=Mr(tg(Gm),Av(t.time_cursor));return Mr(e,{type:"pm1",descriptionHTML:{name:Kr`Particulate Matter < 1 µm`,qualifier:` @ ${Kr`Surface`}`},paths:[Qm(t,"pm1",e.alignment())],builder:t=>Ov(t,/pm1/,{hasMissing:!1}),unitDescriptors:Yv({"µg/m^3":{convert:t=>1e9*t,precision:0}}),alpha:{single:160,animated:140},scale:null!==(n=Jm.pmx)&&void 0!==n?n:Jm.pmx=Wm()})}},"pm2.5":{matchesOverlay:Ug({overlay_type:"pm2.5"}),create:function(t){var n;const e=Mr(tg(Gm),Av(t.time_cursor));return Mr(e,{type:"pm2.5",descriptionHTML:{name:Kr`Particulate Matter < 2.5 µm`,qualifier:` @ ${Kr`Surface`}`},paths:[Qm(t,"pm2p5",e.alignment())],builder:t=>Ov(t,/pm2p5/,{hasMissing:!1}),unitDescriptors:Yv({"µg/m^3":{convert:t=>1e9*t,precision:0}}),alpha:{single:160,animated:140},scale:null!==(n=Jm.pmx)&&void 0!==n?n:Jm.pmx=Wm()})}},pm10:{matchesOverlay:Ug({overlay_type:"pm10"}),create:function(t){var n;const e=Mr(tg(Gm),Av(t.time_cursor));return Mr(e,{type:"pm10",descriptionHTML:{name:Kr`Particulate Matter < 10 µm`,qualifier:` @ ${Kr`Surface`}`},paths:[Qm(t,"pm10",e.alignment())],builder:t=>Ov(t,/pm10/,{hasMissing:!1}),unitDescriptors:Yv({"µg/m^3":{convert:t=>1e9*t,precision:0}}),alpha:{single:160,animated:140},scale:null!==(n=Jm.pmx)&&void 0!==n?n:Jm.pmx=Wm()})}},no2:{matchesOverlay:Ug({overlay_type:"no2"}),create:function(t){var n;const e=Mr(tg(Zm),Tv(t.time_cursor));return Mr(e,{type:"no2",descriptionHTML:{name:Kr`Nitrogen Dioxide`,qualifier:` @ ${Kr`Surface`}`},paths:[Qm(t,"no2",e.alignment())],builder:t=>Ov(t,/no2/,{hasMissing:!1}),unitDescriptors:Yv({ppbw:{convert:t=>1e9*t,precision:2},ppmw:{convert:t=>1e6*t,precision:2},"µg/m^3":{convert:t=>1.225*t*1e9,precision:0}}),alpha:{single:160,animated:120},scale:null!==(n=Jm.no2)&&void 0!==n?n:Jm.no2=Xm()})}},organic_matter_aot:{matchesOverlay:Ug({overlay_type:"organic_matter_aot"}),create:function(t){var n;const e=Mr(tg(Km),Av(t.time_cursor));return Mr(e,{type:"organic_matter_aot",descriptionHTML:{name:Kr`Organic Matter Aerosol Optical Thickness (550 nm)`,qualifier:""},paths:[Qm(t,"omaod",e.alignment())],builder:t=>Ov(t,/omaod550/,{hasMissing:!1}),unitDescriptors:Yv({τ:{convert:t=>t,precision:3}}),alpha:{single:160,animated:140},scale:null!==(n=Jm.omaod550)&&void 0!==n?n:Jm.omaod550=Vm()})}},none:{matchesOverlay:Ug({overlay_type:"none"}),create:()=>{}}},Bg=new Set(Object.keys(Hg));let Xg=0,Wg=0,Vg=NaN;function Gg(t,n,e,r){Xo.status("Downloading...");const{layerManagerAgent:o,primaryLayerAgent:i,overlayLayerAgent:a,activeLayerAgent:u}=t,l="build layers #"+Xg++,c=Mr(n.getAll(),e.getAll());return Promise.all(function(t){const n=Object.values(Hg),e=n.find((n=>{var e;return null===(e=n.matchesPrimary)||void 0===e?void 0:e.call(n,t)})),r=n.find((n=>{var r;return(null===(r=n.matchesOverlay)||void 0===r?void 0:r.call(n,t))&&n!==e}));return[null==e?void 0:e.create(t),null==r?void 0:r.create(t)]}(c)).then((t=>(Wg++,console.time(l),function(t,n){return Promise.all(t.map((t=>function(t,n){return!t||n.requested?Promise.resolve(t):Promise.all(t.paths.map(uo)).then((e=>n.requested?t:Object.assign(t,t.builder.apply(t,e))))}(t,n))))}(t,r).then((t=>{var n;r.requested||(i.submit(t[0]),a.submit(t[1]),u.submit(null!==(n=t[1])&&void 0!==n?n:t[0]))})).catch((n=>{var e;Xo.error(n),r.requested||(i.submit(t[0]),a.submit(t[1]),u.submit(null!==(e=t[1])&&void 0!==e?e:t[0]))})).finally((()=>{Wg--,console.timeEnd(l)}))))).finally((()=>{clearInterval(Vg),Vg="now"===n.get("time_cursor")?setInterval((()=>o.submit((function(){return Gg(t,n,e,this.cancel)}))),18e5):NaN}))}const Zg=[NaN,NaN],Kg=[NaN,0],Jg=[0,0,0,0];function Qg(t,n,e,r,o,i,a){const u=function(t,n,e,r,o){const i=1e-7,a=e<0?i:-i,u=t(n+i,e),l=t(n,e+a),c=i*Math.cos(e*ze);return[(u[0]-r)/c,(u[1]-o)/c,(l[0]-r)/a,(l[1]-o)/a]}(t,n,e,r,o),[l,c]=a;return a[0]=(u[0]*l+u[2]*c)*i,a[1]=(u[1]*l+u[3]*c)*i,a}let ty=!1;function ny(t,n,e,r,o){var i,a;const{viewboxAgent:u,globeAgent:l,rendererAgent:c,primaryLayerAgent:s,activeLayerAgent:f,fastoverlayAgent:h}=t,d=l.value();if(!d||!c.value())return null;const p=null!==(i=null===(a=h.value())||void 0===a?void 0:a.draw())&&void 0!==i?i:{pass:!1},v=p.pass;if(p.err&&!ty){ty=!0;const t=JSON.stringify(p);console.log(`fastoverlay failure: ${t}`),Wo("gl",t),to("exception",{category:"gl",description:t})}const m=s.value(),g=f.value(),y=m!==g;if(null==m||!m.field||null==g||!g.field)return null;const _=e?1:2,w=m.field(),b=g.field(),x=w[r],M=b[r],A=w.scalarize,T=b.scalarize,E=function(t,n){if(!t)return null;console.time("render mask");const{width:e,height:r}=n.value(),o=Ct(document.createElement("canvas")).attr("width",e).attr("height",r).node(),i=t.defineMask(o.getContext("2d"));i.fillStyle="rgba(255, 0, 0, 1)",i.fill();const a=i.createImageData(e,r),u=a.data;return function(t,n){if(xn(t.set))t.set(n);else for(let e=0;e<n.length;e++)t[e]=n[e]}(u,i.getImageData(0,0,e,r).data),console.timeEnd("render mask"),{imageData:a,isVisible:function(t,n){return u[4*(n*e+t)+3]>0},set:function(t,n,r){const o=4*(n*e+t);return u[o]=r[0],u[o+1]=r[1],u[o+2]=r[2],u[o+3]=r[3],this}}}(d,u);console.time("interpolating field");const{project:S,invert:N}=d.projection.optimize(),k=d.bounds(u.value()),{xMin:D,yMin:P,xMax:L,yMax:j,width:R,height:O}=k,$=m.particles.velocityScale,z=[];let Y=P;const I=g.scale,C=g.alpha.animated;function F(t){const n=t===j,r=new Float32Array(3*R);for(let o=D,i=0;o<=L;o+=_,i+=3*_){const a=o===L;let u=Zg,l=NaN;if(E.isVisible(o,t)){const[r,i]=N(o,t);let c=Jg;if(r==r){u=x(r,i);let n=l=A(u);u=n==n?Qg(S,r,i,o,t,$,u):Kg,v||(y&&(n=T(M(r,i))),n==n&&(c=I.rgba(n),c[3]=C))}v||(E.set(o,t,c),e||(a||(E.set(o+1,t,c),n||E.set(o+1,t+1,c)),n||E.set(o,t+1,c)))}r[i]=u[0],r[i+1]=u[1],r[i+2]=l,e||a||(r[i+3]=u[0],r[i+4]=u[1],r[i+5]=l)}z[t]=r,e||(z[t+1]=r)}return Xo.reset(),n.set(0),new Promise(((t,e)=>{!function r(){try{if(!o.requested){const t=Date.now();for(;Y<=j;)if(F(Y),Y+=_,Date.now()-t>150)return n.set((Y-P+1)/O),void setTimeout(r,10)}t(function(t,n,e){const{xMin:r}=e,o={move:function(n,e,o,i){const a=Math.round(e);if(0<=a&&a<t.length){const u=t[a],l=3*(Math.round(n)-r);if(u&&0<=l&&l<u.length)return o[i]=n,o[i+1]=e,o[i+2]=u[l],o[i+3]=u[l+1],void(o[i+4]=u[l+2])}o[i]=n,o[i+1]=e,o[i+2]=NaN,o[i+3]=NaN,o[i+4]=NaN},isDefined:function(n,e){const o=Math.round(e);if(0<=o&&o<t.length){const e=t[o],i=3*(Math.round(n)-r);if(e&&0<=i&&i<e.length)return!isNaN(e[i])}return!1},isInsideBoundary:function(t,n){const e=new Float32Array(5);return o.move(t,n,e,0),!isNaN(e[3])}};return o.overlay=null==n?void 0:n.imageData,o}(z,v?void 0:E,k))}catch(t){e(t)}n.set(1),console.timeEnd("interpolating field"),n.set(void 0)}()}))}function ey(t){return Tr(t)&&2===t.length}const ry=kr({mode:["string","air"],projection_type:["string","orthographic"],orientation:[function(t){return(void 0===t.scale||ee(t.scale))&&(void 0===t.rotate||ey(t.rotate))&&(void 0===t.translate||ey(t.translate))},void 0],time_cursor:["string","now"],z_level:["string","surface"],animation_type:["string","wind"],overlay_type:["string","wind"],annotation_type:["string","none"],spotlight_coords:[ey,void 0],show_grid_points:["boolean",!1],animation_enabled:["boolean",!0]}),oy=kr({show_settings:["boolean",!1],show_date_chooser:["boolean",!1]}),iy="▫▫▫▫▫▫▫▫▫▫",ay=iy.length;function uy(t){const{type:n,key:e,ctrlKey:r,altKey:o,shiftKey:i,metaKey:a}=t,u=+t.which,l=function(t,n,e,r){if(n){switch(n){case"Down":return"ArrowDown";case"Esc":return"Escape";case"Left":return"ArrowLeft";case"Right":return"ArrowRight";case"Up":return"ArrowUp"}return n}switch(e){case 27:return"Escape";case 37:return"ArrowLeft";case 38:return"ArrowUp";case 39:return"ArrowRight";case 40:return"ArrowDown"}return"keypress"===t&&r?r:"NYI"}(n,e,u,String.fromCharCode(u)),c=function(t,n,e,r,o){const i=[];var a;return n&&(i[0]="Control"),e&&(i[1]="Alt"),r&&(1!==(a=t).length||a!==a.toUpperCase()||a===a.toLowerCase())&&(i[2]="Shift"),o&&(i[3]="Meta"),"Control"!==t&&"Alt"!==t&&"Shift"!==t&&"Meta"!==t&&(i[4]=t),i.filter((t=>void 0!==t)).join("-")}(l,r,o,i,a);return c}function ly(t){return function(n){n.defaultPrevented||n.isComposing||229===n.keyCode||t.call(this,uy(n),...arguments)&&Wt(n)}}function cy(t){return null==t||t.focus(),!0}function sy(t){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const{enableUpDown:e=!1}=n,r=t.nodes();t.on(vr`keydown`,ly((function(t){const n=r.indexOf(this),o="rtl"===Ct(this).style("direction")?-1:1;switch(t){case"Home":return cy(tr(r));case"ArrowLeft":return cy(nr(r,n,-o));case"ArrowRight":return cy(nr(r,n,o));case"ArrowUp":return e&&cy(nr(r,n,-1));case"ArrowDown":return e&&cy(nr(r,n,1));case"End":return cy(er(r))}})))}function fy(t){var n;const e=t.nodes();function r(n){lr(t,(function(){return n===this?0:-1}))}r(null!==(n=tr(e))&&void 0!==n?n:e[0]),t.on(vr`focus`,Ut(r))}function hy(t,n){const e=t.nodes();function r(n){var r;let o=null!==(r=tr(e))&&void 0!==r?r:e[0];t.each((function(){o=n===this.dataset.name?this:o})),lr(t,(function(){return o===this?0:-1}))}r(n.get()),n.on(vr`change`,r)}function dy(t,n,e){t.each(Ht((t=>{const r=t.selectAll("[role=radio]");!function(t,n,e){function r(n){t.attr("aria-checked",(function(){return n===this.dataset.name}))}const o=null!=e?e:(t,e)=>n.set(t,e);r(n.get()),n.on(vr`change`,r),t.on(vr`click`,Bt((function(){o(this.dataset.name)})))}(r,n,e),sy(r,{enableUpDown:!0}),hy(r,n)})))}function py(t,n,e){["prev2","prev1","next1","next2"].forEach((r=>{const o=t.selectAll(`[data-name=nav-${r}]`),i=o.selectAll("[role=tooltip]");o.on(vr`click`,Bt((()=>function(t){!function(t,n,e){var r;if(Wg>0)return void console.log("Download in progress--ignoring nav request.");const o=null==n||null===(r=n[e])||void 0===r?void 0:r.call(n);void 0!==o&&t.set(lv(o).toISOString())}(n,e.value(),t)}(r)))),e.on(vr`update`,(t=>{var n,e;return i.text(null!==(n=null==t||null===(e=t.navLabels)||void 0===e?void 0:e[r])&&void 0!==n?n:"")}))}))}const vy=Qr((function(t){const n=function(t){return[t.scrollTop>5?"up":null,t.scrollHeight-t.clientHeight-t.scrollTop>5?"down":null].filter((t=>null!==t))}(t);n.length>0?t.dataset.scrollable=n.join(" "):delete t.dataset.scrollable}),100);function my(t){function n(t){return(t/=255)<=.03928?t/12.92:Math.pow((t+.055)/1.055,2.4)}return.2126*n(t.r)+.7152*n(t.g)+.0722*n(t.b)}function gy(t,n){const e=my(t)+.05,r=my(n)+.05;return Math.max(e,r)/Math.min(e,r)}function yy(t,n){var e;const{unitDescriptors:r={}}=null!=t?t:{};return r[null!==(e=null==n?void 0:n[null==t?void 0:t.type])&&void 0!==e?e:Wn(Object.keys(r))]}function _y(t,n,e,r,o){const i=t.select("[aria-label]"),a=t.select("button"),u=a.select("span");function l(){var a,l,c,s;const f=o.value(),h=yy(f,e.get()),[d=NaN,p=NaN]=null!==(a=n.get())&&void 0!==a?a:[],v=null==f||null===(l=f.field)||void 0===l?void 0:l.call(f)[r.get()],m=null==v?void 0:v(d,p),{formattedVal:g="",fullText:y=""}=null!==(c=null==h?void 0:h.format(m))&&void 0!==c?c:{};t.property("hidden",""===g||!h),i.attr("aria-label",y).text(g),u.html(null!==(s=null==h?void 0:h.html)&&void 0!==s?s:"")}l(),e.on(vr`change`,l),n.on(vr`change`,l),o.on(vr`update`,l),a.on(vr`click`,Bt((function(){var t;const n=null!==(t=o.value())&&void 0!==t?t:{},{unitDescriptors:r={}}=n,i=Object.keys(r);i.length>0&&e.getAndSet((function(){var t;let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const r=null!==(t=e[n.type])&&void 0!==t?t:Wn(i),o=i.indexOf(r),a=(o+1)%i.length,u=i[a];return Mr(e,{[n.type]:u})}))})))}const wy=gi("#444444"),by=gi("#eeeeee");function xy(t,n){const e=t.length/4,r=4*Xe(Math.round(We(n,0,100,0,e-1)),0,e-1);return gi(t[r],t[r+1],t[r+2],t[r+3]/255)}function My(t,n){const e=Ip(null==n?void 0:n[0],0),[r,o]="rtl"===t.style("direction")?[100,0]:[0,100];return Xe(We(e,0,t.node().clientWidth-1,r,o),0,100)}function Ay(t,n,e,r,o){const i=t.select("canvas").attr("width",500).attr("height",1),a=t.select("#colorbar-cursor"),u=t.select("#colorbar-tt"),l=()=>o.showTooltip(u);function c(t){const o=Xe(Ip(null!=t?t:n.get(),0),0,100);(function(t){var n,e;const o=null!==(n=null===(e=r.value())||void 0===e?void 0:e.scale.colors)&&void 0!==n?n:[],i=o.length>0?xy(o,t):null;var a;u.style("background",i).classed("dark-text",null!==i&&gy(a=i,wy)>gy(a,by))})(o),function(t){var n,o;const i=r.value(),a=yy(i,e.get()),l=null==i||null===(n=i.valueInRange)||void 0===n?void 0:n.call(i,t/100),{scalarHTML:c=""}=null!==(o=null==a?void 0:a.format(l))&&void 0!==o?o:{};u.html(c)}(o)}!function(t,n){const{width:e,height:r}=t,o=t.getContext("2d");function i(t){var n;const i=null!==(n=null==t?void 0:t.scale.colors)&&void 0!==n?n:[];if(ho(o),0!==i.length)for(let t=0;t<e;t++)o.fillStyle=String(xy(i,We(t,0,e-1,0,100))),o.fillRect(t,0,1,r)}i(n.value()),n.on(vr`update`,i)}(i.node(),r),function(t,n,e,r){function o(e){const r=`calc(${Xe(Ip(e,0),0,100).toFixed(2)}% - 2px)`,[o,i]="rtl"===t.style("direction")?[null,r]:[r,null];n.style("left",o).style("right",i)}o(e.get()),e.on(vr`change`,o),t.on(vr`click`,Bt((function(r){const o=My(t,Zi(r));e.set(o),n.node().focus()}))),n.on(vr`keydown`,ly((n=>{function o(t){const n=Xe(Ip(e.get(),0)+t,0,100);return e.set(n),r(),!0}const i="rtl"===t.style("direction")?-1:1;switch(n){case"Home":return e.set(0),!0;case"Shift-ArrowLeft":return o(-.1*i);case"Shift-ArrowRight":return o(.1*i);case"Shift-ArrowUp":return o(.1);case"Shift-ArrowDown":return o(-.1);case"ArrowLeft":return o(-i);case"ArrowRight":return o(i);case"ArrowUp":return o(1);case"ArrowDown":return o(-1);case"PageUp":return o(10);case"PageDown":return o(-10);case"End":return e.set(100),!0}})))}(i,a,n,l),i.on(vr`mousemove`,(t=>{c(My(i,Zi(t))),l()}));const s=()=>c();a.on(vr`focus`,s),n.on(vr`change`,s),e.on(vr`change`,s),r.on(vr`update`,s)}function Ty(){return this.tabIndex>=0}function Ey(t,n,e){const r=t.select(".panel"),o=n.handle(e),i=t.selectAll(".dialog-closer");let a;t.on(vr`click`,(t=>{""===window.getSelection().toString()?o.set(!1):t.stopPropagation()})),r.on(vr`click`,(t=>t.stopPropagation())),o.on(vr`change`,((r,o,u)=>!0===r?(Object.keys(n.getAll()).forEach((t=>t!==e&&n.set(t,!1,{modalOpening:!0}))),t.property("hidden",!1),Do(t).attr("inert",""),Jr((()=>{var n;return(null!==(n=t.select(".modal-focus").node())&&void 0!==n?n:i.node()).focus()})),void(a=document.activeElement)):function(n){if(t.property("hidden",!0),Do(t).attr("inert",null),void 0!==a&&(null==n||!n.modalOpening)){const t=a;Jr((()=>t.focus()))}a=void 0}(u))),jo(i,o,!1),function(t){const n=function(t){const n=function(t){return t.selectAll(Je).filter(Ty)}(t).nodes();return[Wn(n),we(n)]}(t);t.on(vr`keydown`,ly(((t,e)=>{let{target:r}=e;switch(t){case"Tab":return r===n[1]&&(n[0].focus(),!0);case"Shift-Tab":return r===n[0]&&(n[1].focus(),!0)}})))}(r)}function Sy(t,n,e,r,o,i){const a={year:NaN,month:NaN,day:NaN,hour:NaN,minute:NaN,selectedDay:NaN},u=t.select("[data-name=year]").selectAll("button"),l=t.select("[data-name=month]").selectAll("button"),c=t.select("[data-name=day]").selectAll("button"),s=t.select("[data-name=apply]");function f(){const{year:t,month:n}=a,e=new Date(t,n-1,1).getDay(),r=new Date(t,n,0).getDate();if(isNaN(e)||isNaN(r))return;a.day=Xe(a.selectedDay,1,r),c.each(Ht(((t,n,o)=>{const i=o-e+1,a=i<1||r<i?0:i;t.text(ev(a,2)).attr("data-name",a).attr("aria-hidden",0===a||null).classed("cloaked",0===a)}))),u.attr("aria-selected",(function(){return+this.dataset.name===a.year})),l.attr("aria-selected",(function(){return+this.dataset.name===a.month})),c.attr("aria-selected",(function(){return+this.dataset.name===a.day}));const o=u.nodes(),i=[...o.filter((t=>+t.dataset.name===a.year&&!t.hidden)),o[0]][0];lr(u,(function(){return this===i?0:-1})),u.classed("modal-focus",(function(){return this===i})),lr(l,(function(){return+this.dataset.name===a.month?0:-1})),lr(c,(function(){return+this.dataset.name===a.day?0:-1}))}sy(u),sy(l),function(t,n){const e=t.nodes();function r(t){return Math.floor(t/7)}t.on(vr`keydown`,ly((function(t){const n=e.indexOf(this),o="rtl"===Ct(this).style("direction")?-1:1;switch(t){case"Control-Home":return cy(tr(e));case"ArrowLeft":return cy(nr(e,n,-o));case"ArrowRight":return cy(nr(e,n,o));case"ArrowUp":return cy(nr(e,n,-7));case"ArrowDown":return cy(nr(e,n,7));case"Home":return cy(nr(e,7*r(n)-1,1));case"End":return cy(nr(e,7*(r(n)+1),-1));case"Control-End":return cy(er(e))}})))}(c),fy(u),fy(l),fy(c),u.on(vr`click`,(function(){a.year=+this.dataset.name,f()})),l.on(vr`click`,(function(){a.month=+this.dataset.name,f()})),c.on(vr`click`,(function(){a.day=a.selectedDay=+this.dataset.name,f()}));const h=Math.max(sv(hv(yv(),{day:15})).year,2022);u.property("hidden",Ut((t=>+t.dataset.name>h))),jo(s,r,(()=>{const t="device"===i.get(),{year:n,month:e,day:r,hour:o,minute:u}=t?function(t){return av(function(t){var n,e,r,o,i,a,u;const l=+(null!==(n=t.year)&&void 0!==n?n:0),c=new Date(l,(null!==(e=t.month)&&void 0!==e?e:1)-1,null!==(r=t.day)&&void 0!==r?r:1,null!==(o=t.hour)&&void 0!==o?o:0,null!==(i=t.minute)&&void 0!==i?i:0,null!==(a=t.second)&&void 0!==a?a:0,null!==(u=t.milli)&&void 0!==u?u:0);return+c==+c&&0<=l&&l<=99&&c.setFullYear(l),c}(t))}(a):a;return vv({year:n,month:e,day:r,hour:o,minute:u})})),n.handle(e).on(vr`change`,(t=>t&&function(){var t,n;const e=_v(r.get()),u="now"===r.get()&&null!==(t=null===(n=o.value())||void 0===n?void 0:n.validTime())&&void 0!==t?t:e,l="device"===i.get(),{year:c,month:s,day:h,hour:d,minute:p}=l?cv(u):sv(u);Object.assign(a,{year:c,month:s,day:h,hour:d,minute:p,selectedDay:h}),f()}())),Ey(t,n,e)}function Ny(t){const n={language:"",script:"",region:""},e=(t||"").toLowerCase().split("-");for(let t=0;t<e.length;t++){const r=e[t];if(1===r.length)break;0===t?n.language=r:/^[a-z]{4}$/.test(r)?n.script=r.substring(0,1).toUpperCase()+r.substring(1):/^([a-z]{2}|\d{3})$/.test(r)&&(n.region=r.toUpperCase())}return n}function ky(t){switch(t.language){case"en":return"en";case"cs":return"cs";case"fr":return"fr";case"ja":return"ja";case"ko":return"ko";case"pt":return"pt";case"ru":return"ru";case"zh":switch(t.script){case"Hant":return"zh-TW";case"Hans":return"zh-CN"}switch(t.region){case"HK":case"MO":case"TW":return"zh-TW";case"SG":case"CN":return"zh-CN"}}return""}const Dy="precision highp float;\n\nattribute vec2 a_Position;\nattribute vec2 a_TexCoord;\n\nvarying vec2 v_TexCoord;\n\nvoid main() {\n    gl_Position = vec4(a_Position, 0.0, 1.0);\n    v_TexCoord = a_TexCoord;\n}\n";function Py(t){throw new Error(t)}function Ly(t){var n;return null===(n=t.containsNaN)||void 0===n||n?function(t){const n=new Float32Array(t.length);for(let e=0;e<t.length;e++){const r=t[e];n[e]=isNaN(r)?7e37:r}return n}(t):t}class jy{static getWebGL(t,n){let e;try{e=t.getContext("webgl",n)}catch(t){}if(!e)try{e=t.getContext("experimental-webgl",n)}catch(t){}return e||void 0}static planeVertexShader(){return Dy}static unitPlaneAttributes(){return{a_Position:new Float32Array([-1,-1,1,-1,-1,1,-1,1,1,-1,1,1]),a_TexCoord:new Float32Array([0,0,1,0,0,1,0,1,1,0,1,1])}}static attach(t){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Py;const e={PACK_ALIGNMENT:1,UNPACK_ALIGNMENT:1,UNPACK_FLIP_Y_WEBGL:!1,UNPACK_PREMULTIPLY_ALPHA_WEBGL:!1,UNPACK_COLORSPACE_CONVERSION_WEBGL:t.BROWSER_DEFAULT_WEBGL},r=Object.keys(e),o={TEXTURE_MIN_FILTER:t.NEAREST,TEXTURE_MAG_FILTER:t.NEAREST,TEXTURE_WRAP_S:t.CLAMP_TO_EDGE,TEXTURE_WRAP_T:t.CLAMP_TO_EDGE},i=Object.keys(o);function a(e){const r=t.getError();r&&n(`${r}:${e}`)}return new class{get context(){return t}makePlaneVertexShader(){return this.makeShader(t.VERTEX_SHADER,Dy)}unitPlaneAttributes(){return{a_Position:new Float32Array([-1,-1,1,-1,-1,1,-1,1,1,-1,1,1]),a_TexCoord:new Float32Array([0,0,1,0,0,1,0,1,1,0,1,1])}}makeShader(e,r){const o=t.createShader(e);a(`createShader:${e}`),t.shaderSource(o,r),a(`shaderSource:${e}`),t.compileShader(o),a(`compileShader:${e}`);const i=t.getShaderParameter(o,t.COMPILE_STATUS);if(a(`getShaderParameter:${e}`),!i){const r=t.getShaderInfoLog(o);return a(`getShaderInfoLog:${e}`),t.deleteShader(o),a(`deleteShader:${e}`),n(r),null}return o}makeProgram(e){const r=t.createProgram();a("createProgram"),e.forEach((n=>{t.attachShader(r,n),a("attachShader")})),t.linkProgram(r),a("linkProgram");const o=t.getProgramParameter(r,t.LINK_STATUS);if(a("getProgramParameter"),!o){const e=t.getProgramInfoLog(r);return a("getProgramInfoLog"),t.deleteProgram(r),a("deleteProgram"),n(e),null}return r}makeFramebufferTexture2D(n){const e=t.createFramebuffer();a("createFramebuffer"),t.bindFramebuffer(t.FRAMEBUFFER,e),a("bindFramebuffer"),t.framebufferTexture2D(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,n,0),a("framebufferTexture2D");const r=t.checkFramebufferStatus(t.FRAMEBUFFER);return a("checkFramebufferStatus"),r!==t.FRAMEBUFFER_COMPLETE?(t.deleteFramebuffer(e),a("deleteFramebuffer"),callback("framebuffer: "+r),null):e}uniforms(n,e){const r={},o=t.getProgramParameter(n,t.ACTIVE_UNIFORMS);return a("getProgramParameter"),Pe(o).map((e=>{const r=t.getActiveUniform(n,e);return a(`getActiveUniform:${e}`),r})).filter((t=>!!t)).forEach((e=>{const o=t.getUniformLocation(n,e.name);a(`getUniformLocation:${e.name}`),r[e.name]={name:e.name,type:e.type,size:e.size,location:o}})),new class{decls(){return r}set(n){return Object.keys(n).forEach((o=>{!function(n,o){const i=r[n]||{},a=i.location;switch(i.type){case t.FLOAT:return Ye(o)?t.uniform1fv(a,o):t.uniform1f(a,o);case t.FLOAT_VEC2:return t.uniform2fv(a,o);case t.FLOAT_VEC3:return t.uniform3fv(a,o);case t.FLOAT_VEC4:return t.uniform4fv(a,o);case t.INT:return Ye(o)?t.uniform1iv(a,o):t.uniform1i(a,o);case t.INT_VEC2:return t.uniform2iv(a,o);case t.INT_VEC3:return t.uniform3iv(a,o);case t.INT_VEC4:return t.uniform4iv(a,o);case t.SAMPLER_2D:{const r=e[o];return r?void t.uniform1i(a,r.unit):void console.warn(`uniform '${n}' refers to unknown texture '${o}'`)}default:console.warn(`uniform '${n}' has unsupported type: ${JSON.stringify(i)}`)}}(o,n[o]),a(`assign-uniform:${o}`)})),this}}}attribs(n){const e={},r=t.getProgramParameter(n,t.ACTIVE_ATTRIBUTES);return a("getProgramParameter"),Pe(r).map((e=>{const r=t.getActiveAttrib(n,e);return a(`getActiveAttrib:${e}`),r})).filter((t=>!!t)).forEach((r=>{const o=t.getAttribLocation(n,r.name);a(`getAttribLocation:${r.name}`),e[r.name]={name:r.name,type:r.type,size:r.size,location:o}})),new class{decls(){return e}set(n){return Object.keys(n).forEach((r=>{!function(n,r){const o=e[n]||{},i=o.location;if(o.type===t.FLOAT_VEC2){const e=t.createBuffer();return a(`createBuffer:${n}`),t.bindBuffer(t.ARRAY_BUFFER,e),a(`bindBuffer:${n}`),t.bufferData(t.ARRAY_BUFFER,r,t.STATIC_DRAW),a(`bufferData:${n}`),t.enableVertexAttribArray(i),a(`enableVertexAttribArray:${n}`),t.vertexAttribPointer(i,2,t.FLOAT,!1,0,0)}console.warn(`attribute '${n}' has unsupported type: ${JSON.stringify(o)}`)}(r,n[r]),a(`assign-attrib:${r}`)})),this}}}makeTexture2D(n,u){const l=t.createTexture();a("createTexture"),t.activeTexture(t.TEXTURE0),a("activeTexture"),t.bindTexture(t.TEXTURE_2D,l),a("bindTexture");const c=Object.assign({},e,o,n),{format:s,type:f,width:h,height:d}=c;return r.forEach((n=>{t.pixelStorei(t[n],c[n]),a(`pixelStorei:${n}`)})),u=f===t.FLOAT?Ly(u):u,t.texImage2D(t.TEXTURE_2D,0,s,h,d,0,s,f,u),a("texImage2D"),i.forEach((n=>{t.texParameteri(t.TEXTURE_2D,t[n],c[n]),a(`texParameteri:${n}`)})),t.bindTexture(t.TEXTURE_2D,null),a("bindTexture"),l}updateTexture2D(n,u,l){t.activeTexture(t.TEXTURE0),a("activeTexture"),t.bindTexture(t.TEXTURE_2D,n),a("bindTexture");const c=Object.assign({},e,o,u),{format:s,type:f,width:h,height:d}=c;return r.forEach((n=>{t.pixelStorei(t[n],c[n]),a(`pixelStorei:${n}`)})),l=f===t.FLOAT?Ly(l):l,t.texSubImage2D(t.TEXTURE_2D,0,0,0,h,d,s,f,l),a("texSubImage2D"),i.forEach((n=>{t.texParameteri(t.TEXTURE_2D,t[n],c[n]),a(`texParameteri:${n}`)})),t.bindTexture(t.TEXTURE_2D,null),a("bindTexture"),n}updateTexture2DParams(n,e,r){let u=!1;for(let l=0;l<i.length;l++){const c=i[l],s=o[c],f=e[c]||s;f!==(r[c]||s)&&(u||(u=!0,t.activeTexture(t.TEXTURE0),a("activeTexture"),t.bindTexture(t.TEXTURE_2D,n),a("bindTexture")),t.texParameteri(t.TEXTURE_2D,t[c],f),a(`texParameteri:${c}`))}return u&&(t.bindTexture(t.TEXTURE_2D,null),a("bindTexture")),u}}}}function Ry(t,n,e,r,o){const i=void 0!==n,a=i?n:t,u=i?t.getContext("2d"):void 0,l=jy.getWebGL(a),c=jy.attach(l);l.getExtension("OES_texture_float"),l.getExtension("OES_texture_float_linear"),l.disable(l.DEPTH_TEST),l.clearColor(0,0,0,0);const s=c.makeShader(l.VERTEX_SHADER,jy.planeVertexShader()),f={},h=Pe(8).map((()=>null));let d=1,p=[],v=null,m=null,g=-1,y=-1;function _(t,n){const{pixels:e}=t=Mr(t);if(delete t.pixels,n){const{def:r,texture:o}=n;if(t.hash===r.hash)return c.updateTexture2DParams(o,t,r)?{def:t,texture:o}:n;if(t.width===r.width&&t.height===r.height&&t.format===r.format&&t.type===r.type)return c.updateTexture2D(o,t,e),{def:t,texture:o};l.deleteTexture(o)}return{def:t,texture:c.makeTexture2D(t,e)}}function w(t){const n=l.getError();if(0!==n)throw new Error(`${n}:${t}`)}return{draw(){try{const n=function(){c.display=r(),function(n){const e=Math.round(n.width*n.pixelDensity),r=Math.round(n.height*n.pixelDensity);e===g&&r===y||(t.width=a.width=e,t.height=a.height=r,l.viewport(0,0,e,r),g=e,y=r)}(c.display),w("fast_resize"),l.clear(l.COLOR_BUFFER_BIT),u&&ho(u),w("fast_clear");const n=o(c);if(0===n.length)return!1;const b=qe(n.map((t=>t.shaderSource)));for(Ie(p,b)||function(t){const n="precision highp float;\nprecision highp sampler2D;\n\nconst float TAU = 6.283185307179586;\nconst float PI = 3.141592653589793;\nconst float NIL = 7e37;\n"+t.join("")+"\nuniform float u_PixelDensity;\n\nvoid main() {\n    vec2 coord = invert(gl_FragCoord.xy / u_PixelDensity);\n    vec2 st = grid(coord);\n    lowp vec4 color = colorize(lookup(st));\n    gl_FragColor = color;\n}\n",e=c.makeShader(l.FRAGMENT_SHADER,n),r=c.makeProgram([s,e]);c.attribs(r).set(jy.unitPlaneAttributes()),p=t,v=r,m=c.uniforms(r,f),l.useProgram(r)}(b),w("fast_program"),d=1,n.forEach((t=>{return n=function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Object.keys(t).map((n=>f[n]=_(t[n],f[n])))}(t.textures),void n.forEach((t=>{const n=t.texture;h[d]!==n&&(h[d]=n,l.activeTexture(l.TEXTURE0+d),l.bindTexture(l.TEXTURE_2D,n)),t.unit=d++}));var n}));d<h.length;)h[d++]=null;return w("fast_textures"),n.forEach((t=>m.set(t.uniforms))),m.set({u_PixelDensity:c.display.pixelDensity,u_Alpha:e()}),w("fast_uniforms"),l.drawArrays(l.TRIANGLES,0,6),w("fast_draw"),i&&u.drawImage(a,0,0),!0}();return w("fast_done"),{pass:n}}catch(t){return console.error(t),{pass:!1,err:t.toString()}}}}}const Oy=Ep(150,0,0,150,150),$y=Sv({start:0,delta:120,size:3},{start:60,delta:-60,size:3}),zy=new Float32Array([1,0,2,0,3,0,4,0,5,0,8,0,6,0,8,0,NaN,NaN]),Yy=Pv($y,zy),Iy=im([0,7],[[0,[255,255,255]],[1,[0,0,255]],[2,[0,255,0]],[3,[0,255,255]],[4,[255,0,0]],[5,[255,0,255]],[6,[255,255,0]],[7,[255,255,255]]],8);function Cy(t,n,e){const r=new Uint8Array(4);return t.readPixels(n,e,1,1,t.RGBA,t.UNSIGNED_BYTE,r),r}function Fy(t){console.time("glTest");const n={pass:!1};try{const e=fo(300,300);t&&(Ct(e).style("width","300px").style("height","300px").style("position","absolute").style("top","0").style("left","0"),t.node().appendChild(e));const r=jy.getWebGL(e);if(!r)return n.hasContext=!1,n;const o=+r.getParameter(r.MAX_TEXTURE_SIZE)||-1;if(o<4096)return n.maxTexSize=o,n;const i=+r.getShaderPrecisionFormat(r.FRAGMENT_SHADER,r.HIGH_FLOAT).precision||-1;if(i<23)return n.precision=i,n;n.scenario=1;const a=Ry(e,void 0,(()=>1),(()=>({width:300,height:300,pixelDensity:1})),(t=>[Oy.webgl(t),$y.webgl(t),Yy.webgl(t),Iy.webgl(t)])).draw();if(a.err)return n.err=a.err,n;const u=[Ie(Cy(r,195,280),[0,0,255,255]),Ie(Cy(r,195,252),[0,255,0,255]),Ie(Cy(r,195,210),[0,255,255,255]),Ie(Cy(r,195,150),[255,0,0,255]),Ie(Cy(r,195,100),[255,0,255,255]),Ie(Cy(r,195,40),[255,255,0,255]),Ie(Cy(r,195,15),[255,255,255,255]),Ie(Cy(r,145,15),[0,0,0,0])];if(u.some((t=>!1===t)))return n.colorMatch=u,n;const l=r.getError();0!==l?n.err=l:n.pass=!0}catch(t){console.error(t),n.err=t.toString()}finally{console.timeEnd("glTest")}return n}function qy(t,n,e,r,o,i){const{fastoverlayAgent:a,globeAgent:u,activeLayerAgent:l,rendererAgent:c,viewboxAgent:s}=n,f=Fy(Co("debug")?t:void 0),h=f.pass?"ok":JSON.stringify(f);if(console.log(`test gl: ${h}`),Wo("gl",h),to("report",{category:"gl",message:h}),!f.pass)return;function d(){return l.value()}function p(t){var n,e,r;return null===(n=u.value())||void 0===n||null===(e=(r=n.projection.optimize()).webgl)||void 0===e?void 0:e.call(r,t)}function v(t){var n,e,r,o;return null===(n=d())||void 0===n||null===(e=n.grid)||void 0===e||null===(r=(o=e.call(n)).webgl)||void 0===r?void 0:r.call(o,t)}function m(t){var n,e,r,o;return null===(n=d())||void 0===n||null===(e=n.field)||void 0===e||null===(r=e.call(n)[i.get()])||void 0===r||null===(o=r.webgl)||void 0===o?void 0:o.call(r,t)}function g(t){var n,e,r;return null===(n=d())||void 0===n||null===(e=(r=n.scale).webgl)||void 0===e?void 0:e.call(r,t)}const{width:y,height:_}=s.value(),w=t.select("[data-name=fastoverlay]").style("width",`${y}px`).style("height",`${_}px`).node();if(!w)return;const b=Ry(w,/ipad|iphone|ipod/i.test($o)||/macintosh/i.test($o)&&navigator.maxTouchPoints>2?fo():void 0,(function(){const t=d(),n=o.get()?null==t?void 0:t.alpha.animated:null==t?void 0:t.alpha.single;return(null!=n?n:0)/255}),(function(){const{width:t,height:n}=s.value();return{width:t,height:n,pixelDensity:r.get()?1:.5}}),(function(t){if("none"===e.get()||!c.value())return[];const n=[p(t),v(t),m(t),g(t)].filter((t=>!!t));return 4===n.length?n:[]}));e.on(vr`change`,b.draw),r.on(vr`change`,b.draw),o.on(vr`change`,b.draw),i.on(vr`change`,b.draw),u.on(vr`update`,b.draw),l.on(vr`update`,b.draw),c.on(vr`redraw render update`,b.draw),s.on(vr`update`,(t=>{Ct(w).style("width",`${t.width}px`).style("height",`${t.height}px`)})),a.submit(b)}function Uy(t){return Ft(t)&&!qt(t)}function Hy(t,n,e){const r=t.length;for(let o=n+e;0<=o&&o<r;o+=e)if(Uy(t[o]))return t[o]}function By(t){return"string"==typeof t&&(t=Ct(t).node()),!!Uy(t)&&(t.dispatchEvent(function(){try{return new MouseEvent("click",{view:window,bubbles:!0,cancelable:!0})}catch(t){const n=document.createEvent("MouseEvents");return n.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,0,null),n}}()),!0)}function Xy(t,n,e,r,o){const i=Ct("[data-name=z_level]").selectAll("button").nodes();function a(){const{mode:n,z_level:e}=t.getAll(),r="air"===n?Hn(i,(t=>t.dataset.name===e)):NaN;return r<0?NaN:r}let u=!0;function l(t){switch(t){case"e":return By("[data-name=earth]");case"I":return By((n=i)[Bn(n,Uy)]);case"i":return By(Hy(i,a(),1));case"m":return By(Hy(i,a(),-1));case"M":return By(function(t){return t[Hn(t,Uy)]}(i));case"n":return By("[data-name=nav-now]");case"C":return By("[data-name=show-date-chooser]");case"J":return By("[data-name=nav-prev2]");case"j":return By("[data-name=nav-prev1]");case"k":return By("[data-name=nav-next1]");case"K":return By("[data-name=nav-next2]");case"g":return By("[data-name=toggle-grid]");case"p":return By("[data-name=toggle-animation]");case"H":return By("[data-name=toggle-hd]");case"d":return o.reorient({scaleBy:1.003});case"D":return o.reorient({scaleBy:1.05});case"x":return o.reorient({scaleBy:.997});case"X":return o.reorient({scaleBy:.95});case"z":return o.reorient(u?{rotateBy:[0,-.125]}:{translateBy:[0,1]});case"Z":return o.reorient(u?{rotateBy:[0,-1]}:{translateBy:[0,10]});case"w":return o.reorient(u?{rotateBy:[0,.125]}:{translateBy:[0,-1]});case"W":return o.reorient(u?{rotateBy:[0,1]}:{translateBy:[0,-10]});case"s":return o.reorient(u?{rotateBy:[.125,0]}:{translateBy:[1,0]});case"S":return o.reorient(u?{rotateBy:[1,0]}:{translateBy:[10,0]});case"a":return o.reorient(u?{rotateBy:[-.125,0]}:{translateBy:[-1,0]});case"A":return o.reorient(u?{rotateBy:[-1,0]}:{translateBy:[-10,0]});case"T":return By("[data-name=show-settings]")}var n}return Ct("body").on(vr`keydown`,ly((function(o){switch(o){case"Escape":return e.save({show_date_chooser:!1,show_settings:!1})||r.hideTooltip()||n.save({notice:void 0})||n.save({status:void 0,error:void 0})||t.save({spotlight_coords:void 0})||n.save({show_menu:!1})||n.save({show_cta:!1});case"Alt-Ø":case"Alt-O":return function(){const t=Ct("html"),n=t.property("dir");return t.property("dir","ltr"===n?"rtl":"ltr"),!0}();case"Alt-Shift-˝":case"Alt-G":return function(){const t=Ct("html"),n=t.classed("a11y-tests-grayscale");return t.classed("a11y-tests-grayscale",!n),!0}();case"Alt-Shift-˛":case"Alt-X":return localStorage.clear(),t.reset(),n.reset(),e.reset(),!0;case"Alt-∑":case"Alt-w":return u=!u,!0}}))).on(vr`keypress`,ly(l)),{interpretKeyPress:l}}function Wy(t){var n,e;const r=-(null==t||null===(n=t.rotate)||void 0===n?void 0:n[0]),o=-(null==t||null===(e=t.rotate)||void 0===e?void 0:e[1]),i=+(null==t?void 0:t.scale),a=`${r.toFixed(2)},${o.toFixed(2)}`,u=`${Math.round(i)}`;if(r!=r||o!=o){if(i!=i)return;return`,,${u}`}return i!=i?a:`${a},${u}`}const Vy={air:()=>({overlay_type:"wind",animation_type:"wind"}),ocean:()=>({overlay_type:"significant_wave_height",animation_type:"primary_waves"}),chem:()=>({overlay_type:"co2sc",animation_type:"wind"}),particulates:()=>({overlay_type:"pm2.5",animation_type:"wind"}),space:()=>({overlay_type:"aurora",animation_enabled:!1})};function Gy(t,n,e){var r,o;const i=t.get("mode");if(n===i)return;const a=Mr({mode:n},null!==(r=null===(o=Vy[n])||void 0===o?void 0:o.call(Vy))&&void 0!==r?r:{});"space"===i&&(a.animation_enabled=!0),t.save(a,e)}function Zy(t){return"enum"===t.type?{type:"enum",name:t.name,elements:t.elements}:{type:"quantity",symbol:t.symbol,symbolHTML:t.html,precision:t.precision,convention:t.convention}}function Ky(t){var n;const e=t.type,r=t.sourceHTML,o=t.descriptionHTML,i=[o.name,o.qualifier].filter((t=>t)).join(""),a=null===(n=t.validTime)||void 0===n?void 0:n.call(t),u=xe(t.unitDescriptors,Zy),l=t.timeline,c=t.navLabels,s=t.supported_z_levels,f={name:e,source:r,description:i,validTime:void 0!==a?dv(a,"{YYYY}-{MM}-{DD} {hh}:{mm}Z"):void 0,units:u,timeline:l,nav:c,supportedLevels:s};return t.scale&&t.valueInRange&&(f.scale=function(t){const n=t.valueInRange(0),e=t.valueInRange(1);function r(t,n){return n.scalarize(n.convert(t))}const o=xe(t.unitDescriptors,(t=>[r(n,t),r(e,t)]));return{type:t.scale.type,range:o,colors:t.scale.colors}}(t)),f}function Jy(t,n){var e,r;if(!t)return;const o=null===(e=t.field)||void 0===e?void 0:e.call(t)[No.get("interpolation_type")],[i=NaN,a=NaN]=null!=n?n:[];if(i!=i||a!=a)return;const u=null!==(r=null==o?void 0:o(i,a))&&void 0!==r?r:NaN;return u==u?ee(u.frp)?u:Object.values(t.unitDescriptors).map((t=>{var n;return{value:t.convert(u),units:null!==(n=t.symbol)&&void 0!==n?n:t.name}})):void 0}let Qy;function t_(t){const[n,e,r,o]=t.blocks,i=new Array(n.length);for(let t=0;t<n.length;t++)i[t]={timestamp:n[t],coords:[e[t],r[t]],frp:o[t]};return i}const n_=function(){const t=new Uint8Array(2e3);for(let n=0;n<500;n++){const e=di(hf(We(n,499,0,.4,1))),r=4*n;t[r]=e.r,t[r+1]=e.g,t[r+2]=e.b,t[r+3]=255}return am([0,50],t)}();function e_(t){const n=(t,n)=>n.frp-t.frp,e=(t,n)=>t.timestamp-n.timestamp||t.frp-n.frp,r=t.map(t_).flat().sort(e),o=r.map((t=>t.timestamp));return t=>{const i=+lv(_v(t)),a=ne(o,i-576e5),u=ne(o,i+1),l=r.slice(a,u).map((t=>{const n=i-t.timestamp,e=Xe(We(n,144e5,396e5,1,.5),.5,1),r=Xe(We(n,288e5,576e5,1,0),0,1),o=Ei(function(t){const[n,e,r,o]=n_.rgba(t);return gi(n,e,r,o/255)}(t.frp));return o.s*=e,o.opacity=r,{timestamp:t.timestamp,coords:t.coords,frp:t.frp,radius:Xe(We(t.frp,0,50,.75,1),.75,1),color:o.formatRgb()}})),c=Array.from(l).sort(n).slice(0,2e3).sort(e);return{timestamp:i,topFires:c,allFires:l}}}function r_(t,n){return function(e,r){var o;const{width:i,height:a}=t.value(),u=Xe(e.scale()/1e3,2,5),l=e.optimize().project,c=null!==(o=n.get("spotlight_coords"))&&void 0!==o?o:[NaN,NaN],[s,f]=l(c[0],c[1]),h=0<=s&&s<i&&0<=f&&f<a?[s,f]:void 0,d=[],p=new Set;for(let t=r.length-1;t>=0;t--){const n=r[t],{radius:e,coords:[o,c]}=n,[s,f]=l(o,c);if(0<=s&&s<i&&0<=f&&f<a){const t=1e7*Math.round(2*f)+Math.round(2*s);if(!p.has(t)){p.add(t);const r=[s,f,e*u,n];d.push(r)}}}const v=function(t,n){if(void 0!==n)for(let e=t.length-1;e>=0;e--){const r=t[e],[,,o]=r;if(Ge(r,n)<=o)return r}}(d,h);return{circles:d,closest:v}}}let o_;function i_(t,n){return{renderTo(e,r){const o=t();if(void 0===o||0===o.length)return;const i=n(r.projection(),o),a=i.circles;o_=i.closest;for(let t=a.length-1;t>=0;t--){const[n,r,o,i]=a[t];e.beginPath(),e.fillStyle=i.color,e.arc(n,r,o,0,Oe),e.fill()}if(void 0!==o_){const[t,n,r]=o_;e.beginPath(),e.fillStyle="white",e.arc(t,n,r,0,Oe),e.fill()}}}}function a_(t,n,e){const{rendererAgent:r,viewboxAgent:o,annotationLayerAgent:i}=t;let a;r.on(vr`update`,(function(){var t;let{dynamicItemsLo:e,dynamicItemsHi:i}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(!e||!i)return;const u=r_(o,n);e.add(i_((()=>{var t;return null===(t=a)||void 0===t?void 0:t.topFires}),u)),i.add(i_((()=>{var t;return null===(t=a)||void 0===t?void 0:t.allFires}),u)),null===(t=r.value())||void 0===t||t.draw()}));const u=Zt((function(){const{time_cursor:t,annotation_type:o}=n.getAll();var u;if("fires"!==o)return a=void 0,null===(u=r.value())||void 0===u||u.draw(),void i.submit(void 0);(function(t){var n;const e=_v(t),r=[`${"now"===t?"current":dv(e,"{YYYY}")}/${"now"===t?"current":dv(e,"{YYYY}{MM}{DD}")}-firms.epak`];if("now"!==t){const t=sv(hv(e,{day:-1})),n=`${dv(t,"{YYYY}")}/${dv(t,"{YYYY}{MM}{DD}")}-firms.epak`;r.push(n)}return ge(r,null===(n=Qy)||void 0===n?void 0:n.files)?Promise.resolve(Qy):function(){for(var t=arguments.length,n=new Array(t),e=0;e<t;e++)n[e]=arguments[e];return Promise.allSettled(n.map((t=>Fv.resolve("firms",t))).map(ao)).then((t=>t.filter((t=>"fulfilled"===t.status)).map((t=>t.value))))}(...r).then(e_).then((t=>Qy={files:r,payload:t}))})(t).then((n=>{var o;a=n.payload(t),null===(o=r.value())||void 0===o||o.draw(),i.submit(function(){function t(){var t;if(null===(t=r.value())||void 0===t||t.draw(),!o_)return;const{timestamp:n,coords:e,frp:o}=o_[3];return{date:dv(av(n),"{YYYY}-{MM}-{DD}T{hh}:{mm}Z"),coordinates:e,frp:o,units:"MW"}}return{type:"fires",sourceHTML:"VIIRS NRT / FIRMS / EOSDIS / NASA",descriptionHTML:{name:Kr`Fire Detections`,qualifier:""},field:()=>({bilinear:t,nearest:t}),unitDescriptors:Yv({MW:{convert:t=>t,precision:2,format:function(t){if(void 0!==t)return{formattedVal:`${dv("device"===e.get("display_timezone")?uv(t.date):av(t.date),"{MM}-{DD} {hh}:{mm}")},   ${t.frp.toFixed(2)}`,fullText:"NYI"}}}}),timeline:[{type:"continuous",start:"2021-04-13T02:00Z"}],valueInRange:t=>We(t,0,1,0,50),scale:n_}}())})).catch(Xo.error)}));n.on(vr`change:time_cursor`,u),n.on(vr`change:annotation_type`,u),u()}const u_={animation_enabled:ry.handle("animation_enabled"),projection_type:ry.handle("projection_type"),orientation:ry.handle("orientation"),overlay_type:ry.handle("overlay_type"),annotation_type:ry.handle("annotation_type"),spotlight_coords:ry.handle("spotlight_coords"),z_level:ry.handle("z_level"),animation_type:ry.handle("animation_type"),mode:ry.handle("mode"),time_cursor:ry.handle("time_cursor"),display_timezone:No.handle("display_timezone"),progress:No.handle("progress"),notice:No.handle("notice"),hd_enabled:No.handle("hd_enabled"),interpolation_type:No.handle("interpolation_type"),selected_units:No.handle("selected_units"),colorbar_cursor:No.handle("colorbar_cursor"),show_menu:No.handle("show_menu"),font_size:No.handle("font_size")};function l_(){const t=Ct("html").attr("lang");Ct("#lang-menu-modal").select(`a[lang='${t}']`).classed("selected modal-focus",!0).select((function(){return this.parentElement})).lower();const n=function(t){const n=function(t){return t.languages||[t.language||t.userLanguage||"en"]}(t);for(let t=0;t<n.length;t++){const e=ky(Ny(n[t]));if(e)return e}return""}(window.navigator);n!==t&&Ct(".lang-shortcuts").select(`a[lang='${n}']`).property("hidden",!1)}function c_(){function t(){const t=Ct(this),n=t.attr("data-link");return n?`${n}${Fo()?"?kiosk":""}${window.location.hash}`:t.attr("href")}It("a[lang]").attr("href",t),It("a.dyna-link").attr("href",t)}function s_(){function t(){const t=function(t,n,e,r){var o;const i=r(),a=/^#(current|(\d{4})\/(\d{1,2})\/(\d{1,2})\/(\d{3,4})Z)\/(\w+)\/(\w+)\/(\w+)([\/].+)?/.exec(t);if(!a)return i;let u;return i.time_cursor=function(t){if("current"===t[1])return"now";const n=Cp(t[2]),e=Cp(t[3]),r=Cp(t[4]),o=ev(t[5],4);return lv({year:n,month:e,day:r,hour:Cp(o.substr(0,2)),minute:Cp(o.substr(2))}).toISOString()}(a),Object.assign(i,function(t,n){const e="wind"===t?"air":t;switch(n){case"currents":return{mode:e,animation_type:"currents",z_level:"surface"};case"level":return{mode:e,animation_type:"wind",z_level:"surface"};case"waves":return{mode:e,animation_type:"primary_waves",z_level:"surface"}}return{mode:e,animation_type:"wind",z_level:n}}(a[6],a[8])),i.overlay_type=i.animation_type,(null!==(o=a[9])&&void 0!==o?o:"").split("/").forEach((t=>{if(u=/^(\w+)(=([\d\-.,]*))?$/.exec(t)){if(n.has(u[1]))i.projection_type=u[1],i.orientation=function(t){var n;const e=null!==(n=null==t?void 0:t.split(","))&&void 0!==n?n:[],r=-Cp(e[0]),o=-Cp(e[1]),i=r==r&&o==o?[r,o]:void 0,a=Cp(e[2]);return Mr({scale:a==a?a:void 0,rotate:i})}(u[3]);else if("loc"===u[1]){const t="string"==typeof u[3]?u[3].split(","):[],n=Cp(t[0]),e=Cp(t[1]);n==n&&e==e&&(i.spotlight_coords=[n,e])}}else if(u=/^overlay=([\w.]+)$/.exec(t)){const t="off"===u[1]?"none":u[1];e.has(t)&&(i.overlay_type=t)}else(u=/^annot=(\w+)$/.exec(t))?"fires"===u[1]&&(i.annotation_type="fires"):(u=/^grid=(\w+)$/.exec(t))?"on"===u[1]&&(i.show_grid_points=!0):(u=/^anim=(\w+)$/.exec(t))&&"off"===u[1]&&(i.animation_enabled=!1)})),i}(window.location.hash,tv,Bg,ry.initialState);ry.save(ry.validate(t),{source:"hash_read"}),c_()}const n=Zt((function(t,n,e){const r=function(t){const{mode:n,projection_type:e,orientation:r,time_cursor:o,z_level:i,animation_type:a,overlay_type:u,annotation_type:l,spotlight_coords:c,show_grid_points:s,animation_enabled:f}=t,h="now"===o?"current":dv(_v(o),"{YYYY}/{MM}/{DD}/{hh}{mm}Z"),[d,p,v]=function(t,n,e){const r="air"===t?"wind":t;switch(n){case"currents":return[r,"surface","currents"];case"primary_waves":return[r,"primary","waves"]}return"surface"===e?[r,"surface","level"]:[r,"isobaric",e]}(n,a,i);return"#"+[h,d,p,v,"none"!==(null!=l?l:"none")?`annot=${l}`:"",f?"":"anim=off",u&&u!==a?`overlay=${u}`:"",s?"grid=on":"",[e,Wy(r)].filter((t=>t)).join("="),c?"loc="+c.map((t=>t.toFixed(3))).join(","):""].filter((t=>t)).join("/")}(ry.getAll());window.location.hash!==r&&"hash_read"!==(null==e?void 0:e.source)&&(window.history.pushState(null,null,r),c_())}));ry.on(vr`change`,n),Ct(window).on(vr`hashchange`,t),t()}function f_(t,n,e){!function(t,n,e){const{globeAgent:r,viewboxAgent:o}=t;function i(t,n){null==t||t.setOrientation(n,o.value())}n.on(vr`change`,(function(t){var n;const a=null===(n=Qp[t])||void 0===n?void 0:n.call(Qp,o.value());i(a,e.get()),r.submit(null!=a?a:Promise.reject(`Unknown projection: ${t}`))})),e.on(vr`change`,(t=>i(r.value(),t)))}(n,u_.projection_type,u_.orientation),function(t,n){const{mapAgent:e}=t,r=mo(),o=mo();n.on(vr`change`,(function(){e.submit((async function(){return await async function(t,n,e,r){Xo.status("Downloading...");try{console.time("build map");const o={};t.elements.forEach((t=>Object.assign(o,To[t])));const i=await async function(t){const n=Ue(Object.values(t).map((t=>t.file))),e=await Promise.all(n.map(oo));return xe(t,(t=>e[n.indexOf(t.file)]))}(o);if(r.requested)return;const a=xe(i,co);function u(t){return Object.keys(o).filter((n=>o[n].scene===t)).map((t=>vo(a[t],o[t].style)))}n.clear(),u("lo").forEach((t=>n.add(t))),e.clear(),u("hi").forEach((t=>e.add(t)))}finally{console.timeEnd("build map")}}(n.get(),r,o,this.cancel),{mapLo:r,mapHi:o}}))}))}(n,No.handle("map_scene")),function(t,n,e,r){const{rendererAgent:o,globeAgent:i,mapAgent:a}=n;function u(){o.submit((()=>function(t,n,e,r){var o,i;const{rendererAgent:a,viewboxAgent:u,globeAgent:l,mapAgent:c}=n,s=l.value(),f=c.value();if(!s||!f)return;Xo.status("Rendering Globe..."),console.time("rendering map");const h=null===(o=t.select("[data-name=map]").node())||void 0===o?void 0:o.getContext("2d"),d=null===(i=t.select("[data-name=foreground]").node())||void 0===i?void 0:i.getContext("2d"),p=t.select("[data-name=annotation]");s.setOrientation(r.get(),u.value());const v=jl(s.projection).pointRadius((t=>{var n,e;return null!==(n=null===(e=t.properties)||void 0===e?void 0:e.pointRadius)&&void 0!==n?n:5}));let m=je((function t(){null==p||p.selectAll("path").attr("d",v),k(!1),a.call("redraw"),m=je(t,5,{leading:!1})}),5,{leading:!1});const g=s.backgroundRenderer(),y=s.graticuleRenderer(),_=s.preForegroundRenderer(),w=s.postForegroundRenderer(),{mapLo:b,mapHi:x}=f,M=mo(),A=mo(),T=go([g]),E=go([g]),S=go([_,y,b,M,w]),N=go([_,y,x,A,w]);function k(t){const n=t?N:S;h&&(t?E:T).renderTo(h,v),d&&n.renderTo(d,v),v.context(null)}return e.on("moveStart.renderer",(()=>{a.call("start")})),e.on("move.renderer",(()=>{m()})),e.on("moveEnd.renderer",(()=>{null==p||p.selectAll("path").attr("d",v),k(!0),a.call("render")})),Promise.resolve().then((()=>{e.assignGlobe(s)})).catch(Xo.error),console.timeEnd("rendering map"),{dynamicItemsLo:M,dynamicItemsHi:A,draw(){null==p||p.selectAll("path").attr("d",v),k(!0)}}}(t,n,e,r)))}i.on(vr`update`,u),a.on(vr`update`,u)}(t,n,e,u_.orientation),function(t,n,e){const{layerManagerAgent:r}=t;function o(){r.submit((function(){return Gg(t,n,e,this.cancel)}))}n.on(vr`change:time_cursor change:z_level change:animation_type change:overlay_type`,o),e.on(vr`change:hd_enabled`,o)}(n,ry,No),qy(t,n,u_.overlay_type,u_.hd_enabled,u_.animation_enabled,u_.interpolation_type),function(t,n,e,r){const{fieldAgent:o,rendererAgent:i,primaryLayerAgent:a,activeLayerAgent:u}=t;function l(){o.submit((function(){return ny(t,n,e.get(),r.get(),this.cancel)}))}i.on(vr`render`,l),a.on(vr`update`,l),u.on(vr`update`,l),r.on(vr`change`,l),i.on(vr`start redraw`,(()=>o.cancel()))}(n,u_.progress,u_.hd_enabled,u_.interpolation_type),function(t,n,e){const r=t.select("[data-name=overlay]").node(),{overlayAgent:o,overlayGridAgent:i,rendererAgent:a,fieldAgent:u}=n;function l(t,i){o.submit((()=>function(t,n,e,r,o){const{overlayGridAgent:i,rendererAgent:a,activeLayerAgent:u,fieldAgent:l}=n,c=l.value();if(!t||!c||!a.value())return;const s=t.getContext("2d"),f=u.value(),{overlay:h}=c;if(ho(s),"none"!==(null!=e?e:"none")){if(void 0!==h){const t=r?f.alpha.animated:f.alpha.single;!function(t,n){for(let e=3;e<t.length;e+=4)0!==t[e]&&(t[e]=n)}(h.data,t),s.putImageData(h,0,0)}o?i.submit((function(){return function(t,n,e){const{viewboxAgent:r,globeAgent:o,activeLayerAgent:i}=t,a=o.value(),u=i.value();if(!a||!u)return;n.fillStyle="rgba(255, 255, 255, 0.75)";const{width:l,height:c}=r.value(),s=a.projection.stream({point(t,e){0<=t&&t<l&&0<=e&&e<c&&n.fillRect(Math.round(t),Math.round(e),1,1)}}),f=u.grid(),{isDefined:h}=u.field();let d=0;!function t(){if(!e.requested){const n=Date.now()+40;d=f.forEach(((t,e,r)=>(h(r)&&(t=He(180+t,360)-180,s.point(t,e)),Date.now()>n)),d),d==d&&setTimeout(t,10)}}()}(n,s,this.cancel)})):i.cancel()}}(r,n,t,i,e.get("show_grid_points"))))}u.on(vr`update`,(()=>{l(e.get("overlay_type"),e.get("animation_enabled"))})),e.on(vr`change:overlay_type change:animation_enabled change:show_grid_points`,(()=>{l(e.get("overlay_type"),e.get("animation_enabled"))})),a.on(vr`start`,(()=>{po(r),l(null,null)})),a.on(vr`start redraw`,(()=>i.cancel()))}(t,n,ry),function(t,n,e){const r=t.select("[data-name=animation]").node(),{animatorAgent:o,rendererAgent:i,fieldAgent:a}=n;function u(){o.submit((function(){return function(t,n,e,r){const{viewboxAgent:o,globeAgent:i,primaryLayerAgent:a,fieldAgent:u}=n,l=i.value(),c=a.value(),s=u.value();if(!(t&&l&&c&&s&&e.get()))return!1;po(t);const f=l.bounds(o.value()),{xMin:h,yMin:d,width:p,height:v}=f,m=function(t,n){const e=[];for(let t=85;t<=255;t+=10)e.push(`rgb(${t},${t},${t})`);return e.indexFor=function(t){return Math.floor(Math.min(t,n)/n*(e.length-1))},e}(0,c.particles.maxIntensity);let g=Math.round(7*p);/android|blackberry|iemobile|ipad|iphone|ipod|opera mini|webos/i.test($o)&&(g=Math.floor(.75*g)),console.log(`particle count: ${g}`);const y=new Float32Array(5*g),_=new Int32Array(g),w=m.map((()=>new Float32Array(4*g))),b=new Int32Array(w.length),x=l.projection.scale();function M(t,n){const e=h+Math.random()*p,r=d+Math.random()*v;n.move(e,r,y,t)}function A(t,n){for(let e=0;e<10;e++)if(M(t,n),!isNaN(y[t+2]))return}let T,E;const S=t.getContext("2d");c.particles.waves?(T=40,E=function(){const t=600/x*Math.pow(Math.log(x)/Math.log(600),2.5);for(let t=0;t<b.length;t++)b[t]=0;for(let n=0,e=0;n<g;n+=1,e+=5){++_[n]>=T&&(_[n]=0,M(e,s));const r=y[e],o=y[e+1];let i=y[e+2],a=y[e+3];const u=r+i*t,l=o+a*t,c=y[e+4];if(c==c&&s.isDefined(u,l)){y[e]=u,y[e+1]=l;const t=Math.sqrt(i*i+a*a)/2.5;i/=t,a/=t;const s=m.indexFor(c*N[_[n]]),f=4*b[s]++,h=w[s];h[f]=r-a,h[f+1]=o+i,h[f+2]=r+a,h[f+3]=o-i}else _[n]=T}},S.fillStyle="rgba(0, 0, 0, 0.90)"):(T=100,E=function(){for(let t=0;t<b.length;t++)b[t]=0;for(let t=0,n=0;t<g;t+=1,n+=5){++_[t]>=T&&(_[t]=0,M(n,s));const e=y[n],r=y[n+1],o=e+y[n+2],i=r+y[n+3],a=y[n+4];if(o==o){s.move(o,i,y,n);const u=y[n+2];if(u==u){const t=m.indexFor(a),n=4*b[t]++,u=w[t];u[n]=e,u[n+1]=r,u[n+2]=o,u[n+3]=i}else _[t]=T}else _[t]=T}},S.fillStyle=/firefox/i.test($o)?"rgba(0, 0, 0, 0.95)":"rgba(0, 0, 0, 0.97)"),S.lineWidth=1;for(let t=0,n=0;t<g;t+=1,n+=5)_[t]=De(0,T),A(n,s);const N=new Float32Array(T);for(let t=0;t<N.length;t++)N[t]=Math.sin(-Re/2+t/7)/2+.5;function k(){return!r.requested&&(E(),function(){S.globalCompositeOperation="destination-in",S.fillRect(h,d,p,v),S.globalCompositeOperation="source-over";for(let t=0;t<w.length;t++){const n=w[t],e=4*b[t];if(e>0){S.beginPath(),S.strokeStyle=m[t];for(let t=0;t<e;t+=4)S.moveTo(n[t],n[t+1]),S.lineTo(n[t+2],n[t+3]);S.stroke()}}}(),setTimeout(k,40),!0)}return k(),{frame:k}}(r,n,e,this.cancel)}))}function l(t){o.value()&&o.submit(!1),t&&po(r)}e.on(vr`change`,(t=>{t?u():l(!0)})),a.on(vr`submit`,(()=>l(!1))),a.on(vr`update`,u),i.on(vr`start`,(()=>l(!0)))}(t,n,u_.animation_enabled)}function h_(t,n,e){const{primaryLayerAgent:r,overlayLayerAgent:o,activeLayerAgent:i,annotationLayerAgent:a}=n;l_(),Fo()&&It(".kiosk").property("hidden",!0),function(t){const n=t.node(),e=()=>vy(n);t.on(vr`scroll`,e),window.ResizeObserver?new ResizeObserver(e).observe(n):(new MutationObserver(e).observe(n,{attributes:!0,attributeFilter:["hidden"],childList:!0,subtree:!0}),Ct(window).on(vr`resize`,e))}(Ct("#menu"));const u=function(t){const n=function(t){const n=new Set(t.nodes().map((t=>t.id)));return It("[aria-labelledby]").filter((function(){const t=Ct(this),e=t.attr("aria-labelledby").split(/\s+/);for(let r=0;r<e.length;r++){const o=e[r];if(n.has(o))return this.dataset.tooltip=o,t.attr("title",Ct(`#${o}`).text().trim()),!0}}))}(t);let e;function r(n){clearTimeout(e),e=function(t,n){return void 0!==n?setTimeout(t,n):void t()}((()=>t.classed("show",!1)),n)}function o(n){clearTimeout(e),t.classed("show",!1),n.classed("show",!!n.text())}function i(){o(Ct(`#${this.dataset.tooltip}`))}return t.on(vr`click`,(t=>{r(),Wt(t)})),n.on(vr`focus`,i).on(vr`blur`,(()=>r(1))),window.matchMedia("(hover: hover)").matches?n.on(vr`mouseenter`,i).on(vr`mouseleave`,(()=>r(250))):n.filter(Ht((t=>!t.classed("no-touch-tt")))).on(vr`click`,i).on(vr`mouseleave`,(()=>r(1))),{hideTooltip:()=>t.filter(Ht((t=>t.classed("show")))).classed("show",!1).nodes().length>0,showTooltip:o}}(It("[role=tooltip]"));return function(){const t=It("[data-name=earth]");qo()?t.on(vr`click`,(function(){window.open(window.location,"_blank")})):function(t,n){const e=ko(t.nodes());function r(n){t.attr("aria-expanded",!0===n),e.property("hidden",!0!==n)}r(n.get()),n.on(vr`change`,r),t.on(vr`click`,Bt((function(){n.toggle()})))}(t,u_.show_menu),Fo()||It("[data-name=earth]").on(vr`click`,(()=>It(".ham").property("hidden",!0)))}(),function(t,n){const e=t.select("button");It(".cta-content").select("a").attr("target",Io()?"_new":null).on(vr`click`,(()=>Wo("cta","click"))).on(vr`contextmenu`,(()=>Wo("cta","right-click"))),n.on(vr`change`,(function(){t.property("hidden",!n.get()||Fo())})),jo(e,n,!1)}(It(".cta-bar"),No.handle("show_cta")),function(t,n){n.on(vr`change`,(n=>{n=Xe(+n,0,1),t.property("hidden",n!=n),t.attr("aria-valuenow",n==n?n:null);const e=Math.floor(n*ay);t.text("▪▪▪▪▪▪▪▪▪▪".substr(0,e)+iy.substr(0,ay-e))}))}(It("[role=progressbar]"),u_.progress),function(t,n,e){const{primaryLayerAgent:r,activeLayerAgent:o,annotationLayerAgent:i}=e;!function(t,n,e){const r=t.select("[data-name=date-field]"),o=t.select("#change-tz"),i=o.selectAll("[data-tz]").nodes();function a(){var t;const o=e.value(),a=null==o?void 0:o.validTime(),u=null==o?void 0:o.dateFormat(),l=null!==(t=n.get("display_timezone"))&&void 0!==t?t:"device",c=i.filter((t=>t.dataset.tz===l))[0],s=c?Ct(c).text():"";r.text(function(t,n,e,r){return t&&n&&r?dv("device"===e?cv(t):t,n).replace("{TZ}",r):Kr`N/A`}(a,u,l,s))}o.on(vr`click`,Bt((()=>{const t=i.map((t=>t.hidden)).indexOf(!1);n.set("display_timezone",i[t].dataset.tz)}))),n.on(vr`change:display_timezone`,(t=>{const n=(i.map((t=>t.dataset.tz)).indexOf(t)+1)%i.length;i.forEach(((t,e)=>t.hidden=e!==n)),a()})),e.on(vr`update`,a)}(t.selectAll("[data-name=date]"),n,o);const a=t.selectAll("[data-name=description]"),u=t.selectAll("[data-name=source]"),l=Zt((function(){var t,n,e,l,c,s,f;const h=r.value(),d=o.value(),p=null!==(t=null==h?void 0:h.descriptionHTML.name)&&void 0!==t?t:"",v=null!==(n=null==h?void 0:h.descriptionHTML.qualifier)&&void 0!==n?n:"",m=null!==(e=null==d?void 0:d.descriptionHTML.name)&&void 0!==e?e:"",g=null!==(l=null==d?void 0:d.descriptionHTML.qualifier)&&void 0!==l?l:"",y=i.value(),_=null!==(c=null==y?void 0:y.descriptionHTML.name)&&void 0!==c?c:"";let w=m+g;w&&h!==d&&(w=v===g?`${p} + ${w}`:`${p+v} + ${w}`),_&&(w+=` + ${_}`),a.html(w);const b=[null!==(s=null==d?void 0:d.sourceHTML)&&void 0!==s?s:"",null!==(f=null==y?void 0:y.sourceHTML)&&void 0!==f?f:""];u.html(b.filter((t=>t)).join(" + "))}));r.on(vr`update`,l),o.on(vr`update`,l),i.on(vr`update`,l)}(Ct("#menu"),No,n),Ay(Ct(".colorbar"),u_.colorbar_cursor,u_.selected_units,i,u),dy(It("[role=radiogroup][data-name=projection_type]"),u_.projection_type),dy(It("[role=radiogroup][data-name=overlay_type]"),u_.overlay_type,((t,n)=>{const e={overlay_type:t};"wind_power_density"===t&&"surface"===u_.z_level.get()&&(e.z_level="1000hPa"),ry.save(e,n)})),dy(It("[role=radiogroup][data-name=annotation_type]"),u_.annotation_type),dy(It("[role=radiogroup][data-name=z_level]"),u_.z_level),function(t){const{primaryLayerAgent:n,overlayLayerAgent:e}=t,r=Ct("[data-name=z_level]").selectAll("button"),o=Zt((function(){var t,o,i;const a=null===(t=n.value())||void 0===t?void 0:t.supported_z_levels,u=null===(o=e.value())||void 0===o?void 0:o.supported_z_levels,l=new Set(a&&u?ue(a,u):null!==(i=null!=a?a:u)&&void 0!==i?i:[]);r.attr("aria-disabled",(function(){return!l.has(this.dataset.name)}))}));n.on(vr`update`,o),e.on(vr`update`,o)}(n),dy(It("[role=radiogroup][data-name=animation_type]"),u_.animation_type),function(t,n,e){t.each(Ht((t=>{const r=t.selectAll("[role=tab]");!function(t,n,e){const r=xe(Jn(t.nodes(),(t=>t.dataset.name)),ko);function o(n){t.attr("aria-selected",(function(){return n===this.dataset.name})),Object.values(r).forEach((t=>t.property("hidden",!0))),queueMicrotask((()=>{var t;return null===(t=r[n])||void 0===t?void 0:t.property("hidden",!1)}))}const i=null!=e?e:(t,e)=>n.set(t,e);o(n.get()),n.on(vr`change`,o),t.on(vr`click`,Bt((function(){i(this.dataset.name)})))}(r,n,e),sy(r,{enableUpDown:!1}),hy(r,n)})))}(It("[role=tablist][data-name=mode]"),u_.mode,Gy.bind(null,ry)),dy(It("[role=radiogroup][data-name=projection_type]"),u_.projection_type,((t,n)=>ry.save({projection_type:t,orientation:void 0},n))),It("[role=toolbar]").each(Ht((t=>{const n=t.selectAll("button, a");sy(n,{enableUpDown:!0}),fy(n)}))),Lo(It("[data-name=nav-now]"),ry,{time_cursor:"now"}),Lo(It("[data-name=show-date-chooser]"),oy,{show_date_chooser:!0}),py(It("#nav-arrows"),u_.time_cursor,i),Ro(It("[data-name=toggle-grid]"),ry.handle("show_grid_points")),Ro(It("[data-name=toggle-animation]"),ry.handle("animation_enabled")),Ro(It("[data-name=toggle-hd]"),No.handle("hd_enabled")),function(t,n){Po(t,(function(){navigator.geolocation?(Xo.status(Kr`Finding current position...`),new Promise(((t,n)=>navigator.geolocation.getCurrentPosition(t,n))).then((function(t){let{coords:e}=t;const r=+e.longitude,o=+e.latitude;if(r==r&&o==o){var i;const t=Mr(null!==(i=n.get("orientation"))&&void 0!==i?i:{},{rotate:[-r,-o]});n.save({spotlight_coords:[r,o],orientation:t})}Xo.reset()})).catch(Xo.error)):Xo.status(Kr`Finding current position is not supported`)}))}(It("[data-name=show-current-position]"),ry),Lo(It("[data-name=show-settings]"),oy,{show_settings:!Fo()}),function(t,n){const e=t.select(".field"),r=t.select("button");n.on(vr`change`,(function(){const r=n.get();t.property("hidden",""===(null!=r?r:"")),e.text(r)})),r.on(vr`click`,(()=>n.set(void 0)))}(It("[data-name=notice-card]"),u_.notice),function(t,n){const e=t.select("[data-name=spotlight-coords]");function r(n){t.property("hidden",void 0===n),e.text(function(t){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2;const e=He(+(null==t?void 0:t[0])+180,360)-180,r=+(null==t?void 0:t[1]);return e==e&&r==r?`${Math.abs(r).toFixed(n)}° ${r>=0?"N":"S"}, ${Math.abs(e).toFixed(n)}° ${e>=0?"E":"W"}`:void 0}(n))}r(n.get()),n.on(vr`change`,r),jo(t.selectAll("[data-name=hide-spotlight]"),n,(()=>{}))}(Ct("#spotlight-panel"),u_.spotlight_coords),function(t,n,e){const{globeAgent:r}=n;function o(){var n;const o=r.value(),[i,a]=null!==(n=e.get())&&void 0!==n?n:[NaN,NaN];o&&i==i&&a==a?nv(t,"location-mark",function(t,n){return{type:"Feature",geometry:{type:"Point",coordinates:[t,n]},properties:{stroke:"#3aff3a",strokeWidth:2.5,pointRadius:7}}}(i,a),o.projection):nv(t,"location-mark",null,void 0)}e.on(vr`change`,o),r.on(vr`update`,o)}(t.select("[data-name=annotation]"),n,u_.spotlight_coords),_y(Ct("[data-name=spotlight-a]"),u_.spotlight_coords,u_.selected_units,u_.interpolation_type,r),_y(Ct("[data-name=spotlight-b]"),u_.spotlight_coords,u_.selected_units,u_.interpolation_type,o),_y(Ct("[data-name=spotlight-c]"),u_.spotlight_coords,u_.selected_units,u_.interpolation_type,a),Ey(Ct("#lang-menu-modal"),oy,"show_settings"),Sy(Ct("#choose-date-modal"),oy,"show_date_chooser",u_.time_cursor,i,u_.display_timezone),dy(Ct("[data-name=interpolation-type]"),u_.interpolation_type),dy(Ct("[data-name=font-size]"),u_.font_size),u_.font_size.on(vr`change`,(t=>Ct("html").attr("data-font-size",null!=t?t:null))),{shortcutController:Xy(ry,No,oy,u,e)}}function d_(t){const e=Ct("#main-display");console.time("init"),Xo.status("Initializing...");const r=null==t?void 0:t.wrap(),o=function(t){return{viewboxAgent:Tp("viewbox",{initial:Ap(t)}),mapAgent:Tp("map"),globeAgent:Tp("globe"),layerManagerAgent:Tp("layer"),primaryLayerAgent:Tp("primaryLayer"),overlayLayerAgent:Tp("overlayLayer"),activeLayerAgent:Tp("activeLayer"),annotationLayerAgent:Tp("annotLayer"),rendererAgent:Tp("renderer",{events:["start","render","redraw"]}),fieldAgent:Tp("field"),fastoverlayAgent:Tp("fastoverlay"),animatorAgent:Tp("animator"),overlayAgent:Tp("overlay"),overlayGridAgent:Tp("overlayGrid")}}(e),{viewboxAgent:i,animatorAgent:a}=o,u=function(t,n,e,r){const o=xr("moveStart","move","moveEnd","click"),i=t.node();let a,u=null,l={time:0,mouse:[0,0]},c=!1;function s(t,n){return{type:"click",startMouse:t,startScale:n,manipulator:a.manipulator(t,n)}}function f(t){var n,e;u=null!==(n=u)&&void 0!==n?n:s(null!==(e=df(t,i)[0])&&void 0!==e?e:[NaN,NaN],a.projection.scale())}function h(t){var n,e,r,o;const l=null!==(n=df(t,i)[0])&&void 0!==n?n:[NaN,NaN],c=null!==(e=null===(r=t.transform)||void 0===r?void 0:r.k)&&void 0!==e?e:a.projection.scale();if(u=null!==(o=u)&&void 0!==o?o:s(l,1),"click"===u.type){const t=Ge(l,u.startMouse);if(c===u.startScale&&(t<6||isNaN(t)))return;m(),u.type="drag"}(c!==u.startScale||isNaN(l[0]))&&(u.type="zoom"),u.manipulator.move("zoom"===u.type?null:l,c),g()}function d(){null!==u&&(u.manipulator.end(),"click"===u.type?Date.now()-l.time<500&&Ge(l.mouse,u.startMouse)<6||c||(function(){var t;const n=u.startMouse,e=null!==(t=a.projection.invert(n))&&void 0!==t?t:[NaN,NaN];o.call("click",null,n,e)}(),l={time:Date.now(),mouse:u.startMouse}):v(),u=null)}let p=null;function v(){p&&clearTimeout(p),p=setTimeout((()=>{p=null,(!u||"drag"!==u.type&&"zoom"!==u.type)&&(n.set(a.getOrientation(),{source:"moveEnd"}),y())}),750)}function m(){null==r||r.reorientStart(Yp(a.projection)),o.call("moveStart")}function g(){null==r||r.reorientStep(Yp(a.projection)),o.call("move")}function y(){null==r||r.reorientEnd(Yp(a.projection)),o.call("moveEnd")}const _=qh().on("start",f).on("zoom",h).on("end",d),w=ca().on("start",f).on("drag",h).on("end",d);function b(r){if(!a||"moveEnd"===(null==r?void 0:r.source))return;const o=c;c=!0;try{m(),a.setOrientation(n.get(),e.value()),_.transform(t,jh.scale(a.projection.scale())),y()}finally{c=o}}function x(){let n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(!a)return;const r=a.projection,o="default"===n.scale,i="default"===n.rotate,u="default"===n.translate,l=o||i||u?a.newProjection(e.value()):void 0,s=r.scale(),f=Xe((o?l.scale():Ip(n.scale,s))*Ip(n.scaleBy,1),...a.scaleExtent()),h=i?l.rotate():r.rotate();Array.isArray(n.rotate)&&(h[0]=Ip(n.rotate[0],h[0]),h[1]=Ip(n.rotate[1],h[1]),h[2]=Ip(n.rotate[2],h[2])),Array.isArray(n.rotateBy)&&(h[0]+=Ip(n.rotateBy[0],0),h[1]+=Ip(n.rotateBy[1],0),h[2]+=Ip(n.rotateBy[2],0));const d=u?l.translate():r.translate();Array.isArray(n.translate)&&(d[0]=Ip(n.translate[0],d[0]),d[1]=Ip(n.translate[1],d[1])),Array.isArray(n.translateBy)&&(d[0]+=Ip(n.translateBy[0],0),d[1]+=Ip(n.translateBy[1],0));const y=c;c=!0;try{p||m(),r.rotate(h).translate(d),f!==s&&(r.scale(f),_.transform(t,jh.scale(f))),g(),v()}finally{c=y}}return qo()?t.call(w):t.call(_).on(vr`wheel`,(t=>t.preventDefault())),n.on(vr`change`,((t,n,e)=>b(e))),e.on(vr`update`,((t,e,r)=>{var o,i,u;if(!a)return;const{scale:l="default",translate:c=[]}=null!==(o=n.get())&&void 0!==o?o:{},[s,f]=a.center(r),h=(null!==(i=c[0])&&void 0!==i?i:s)-s,d=(null!==(u=c[1])&&void 0!==u?u:f)-f,[p,v]=a.center(t);x({scale:l,translate:[p+h,v+d]})})),Object.assign(o,{assignGlobe(t){a=t,_.scaleExtent(a.scaleExtent()),b()},reorient:x,cancelMove(){d()}})}(e,u_.orientation,i,r);!function(t,n,e){const{fieldAgent:r}=t;e.on(vr`click`,(function(t,e){const o=+t[0],i=+t[1],a=+e[0],u=+e[1],l=r.value();o==o&&i==i&&a==a&&u==u&&null!=l&&l.isInsideBoundary(o,i)&&n.set([a,u])}))}(o,u_.spotlight_coords,u);const l=function(t,n,e){return new class extends class{getState(){}saveState(t,n){}getProjection(){}reorient(t){}getLayers(){}sampleAt(t,n){}annotate(t,n){}}{getState(){return Object.assign({},oy.getAll(),No.getAll(),ry.getAll())}saveState(t,n){const e=oy.validate(ke(t,oy.fields)),r=No.validate(ke(t,No.fields)),o=ry.validate(ke(t,ry.fields));oy.save(e,n),No.save(r,n),ry.save(o,n)}getProjection(){var t,e;const r=null!==(t=null===(e=n.globeAgent.value())||void 0===e?void 0:e.projection)&&void 0!==t?t:void 0;return void 0!==r?Yp(r):void 0}reorient(t){e.reorient(t)}getLayers(){return t=n.primaryLayerAgent.value(),e=n.overlayLayerAgent.value(),r=n.annotationLayerAgent.value(),void 0===e&&"none"!==ry.get("overlay_type")&&(e=t),[void 0!==t?{type:"animation",product:Ky(t)}:void 0,void 0!==e?{type:"overlay",product:Ky(e)}:void 0,void 0!==r?{type:"annotation",product:Ky(r)}:void 0];var t,e,r}sampleAt(t,e){var r,o;const i=null!==(r=null!=e?e:null===(o=n.globeAgent.value())||void 0===o?void 0:o.projection.invert(null!=t?t:[]))&&void 0!==r?r:[NaN,NaN];return function(t,n,e,r){return void 0===n&&"none"!==ry.get("overlay_type")&&(n=t),[Jy(t,r),Jy(n,r),Jy(e,r)]}(n.primaryLayerAgent.value(),n.overlayLayerAgent.value(),n.annotationLayerAgent.value(),i)}annotate(e,r){var o;nv(t.select("[data-name=annotation]"),e,r,null===(o=n.globeAgent.value())||void 0===o?void 0:o.projection)}}}(e,o,u);null==t||t.expose(l),function(t,n,e,r){if(!t)return;const{primaryLayerAgent:o,overlayLayerAgent:i,annotationLayerAgent:a,fieldAgent:u}=e;ry.on(vr`change`,((n,e,r)=>t.stateChanged(n,e,r))),No.on(vr`change`,((n,e,r)=>t.stateChanged(n,e,r))),oy.on(vr`change`,((n,e,r)=>t.stateChanged(n,e,r)));const l=Zt((()=>{t.layersChanged(n.getLayers())}));o.on(vr`update`,l),i.on(vr`update`,l),a.on(vr`update`,l),r.on(vr`click`,(function(n,e){const r=+n[0],o=+n[1],i=+e[0],a=+e[1],l=u.value();r==r&&o==o&&i==i&&a==a&&null!=l&&l.isInsideBoundary(r,o)&&t.click([r,o],[i,a])}))}(r,l,o,u),function(t,n){Ct(window).on(vr`resize`,Zt((function(){const e=Ap(n);ge(e,t.value())||t.submit(e)}),1e3))}(i,e),function(t,n){function e(){var e,r;const{width:o,height:i}=t.value(),a=null!==(e=window.devicePixelRatio)&&void 0!==e?e:1;It(".fill-screen").style("width",`${o}px`).style("height",`${i}px`).attr("width",o).attr("height",i),It(".max-screen").style("width",`${o}px`).style("height",`${i}px`).attr("width",o*a).attr("height",i*a).nodes().forEach((t=>t.getContext("2d").scale(a,a))),null===(r=n.value())||void 0===r||r.draw()}e(),t.on(vr`update`,e)}(i,o.fastoverlayAgent),f_(e,o,u);const{shortcutController:c}=Uo()?function(t){const n=t.nodes();return It("main > *").filter((function(){return!n.includes(this)})).remove(),{}}(It(".core-ui")):h_(e,o,u);if(Uo()){var s;const n=Object.assign({},oy.initialState(),No.initialState(),ry.initialState(),null!==(s=null==t?void 0:t.initialState)&&void 0!==s?s:{});l.saveState(n)}else oy.reset(),No.reset(),s_();return"test"===Ho()&&u_.notice.set("temporary beta preview"),function(){var t,n;const[e=NaN,r=NaN]=null!==(t=null===(n=ry.get("orientation"))||void 0===n?void 0:n.rotate)&&void 0!==t?t:[],o=ry.get("overlay_type");"232.72"!==e.toFixed(2)||"-37.64"!==r.toFixed(2)||"pm2.5"!==o&&"pm10"!==o||(Wo("app","mise"),to("report",{category:"app",message:"mise"}))}(),a_(o,ry,No),console.timeEnd("init"),{d3:n,sharedStore:ry,sessionStore:No,send(t){Jr((()=>null==c?void 0:c.interpretKeyPress(t)))},frame(){Jr((()=>a.value().frame()))}}}const p_=Symbol("Comlink.proxy"),v_=Symbol("Comlink.endpoint"),m_=Symbol("Comlink.releaseProxy"),g_=Symbol("Comlink.thrown"),y_=t=>"object"==typeof t&&null!==t||"function"==typeof t,__=new Map([["proxy",{canHandle:t=>y_(t)&&t[p_],serialize(t){const{port1:n,port2:e}=new MessageChannel;return w_(t,n),[e,[e]]},deserialize:t=>(t.start(),x_(t))}],["throw",{canHandle:t=>y_(t)&&g_ in t,serialize(t){let n,{value:e}=t;return n=e instanceof Error?{isError:!0,value:{message:e.message,name:e.name,stack:e.stack}}:{isError:!1,value:e},[n,[]]},deserialize(t){if(t.isError)throw Object.assign(new Error(t.value.message),t.value);throw t.value}}]]);function w_(t){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:self;n.addEventListener("message",(function e(r){if(!r||!r.data)return;const{id:o,type:i,path:a}=Object.assign({path:[]},r.data),u=(r.data.argumentList||[]).map(D_);let l;try{const n=a.slice(0,-1).reduce(((t,n)=>t[n]),t),e=a.reduce(((t,n)=>t[n]),t);switch(i){case"GET":l=e;break;case"SET":n[a.slice(-1)[0]]=D_(r.data.value),l=!0;break;case"APPLY":l=e.apply(n,u);break;case"CONSTRUCT":l=N_(new e(...u));break;case"ENDPOINT":{const{port1:n,port2:e}=new MessageChannel;w_(t,e),l=S_(n,[n])}break;case"RELEASE":l=void 0;break;default:return}}catch(t){l={value:t,[g_]:0}}Promise.resolve(l).catch((t=>({value:t,[g_]:0}))).then((t=>{const[r,a]=k_(t);n.postMessage(Object.assign(Object.assign({},r),{id:o}),a),"RELEASE"===i&&(n.removeEventListener("message",e),b_(n))}))})),n.start&&n.start()}function b_(t){(function(t){return"MessagePort"===t.constructor.name})(t)&&t.close()}function x_(t,n){return A_(t,[],n)}function M_(t){if(t)throw new Error("Proxy has been released and is not useable")}function A_(t){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],e=arguments.length>2&&void 0!==arguments[2]?arguments[2]:function(){},r=!1;const o=new Proxy(e,{get(e,i){if(M_(r),i===m_)return()=>P_(t,{type:"RELEASE",path:n.map((t=>t.toString()))}).then((()=>{b_(t),r=!0}));if("then"===i){if(0===n.length)return{then:()=>o};const e=P_(t,{type:"GET",path:n.map((t=>t.toString()))}).then(D_);return e.then.bind(e)}return A_(t,[...n,i])},set(e,o,i){M_(r);const[a,u]=k_(i);return P_(t,{type:"SET",path:[...n,o].map((t=>t.toString())),value:a},u).then(D_)},apply(e,o,i){M_(r);const a=n[n.length-1];if(a===v_)return P_(t,{type:"ENDPOINT"}).then(D_);if("bind"===a)return A_(t,n.slice(0,-1));const[u,l]=T_(i);return P_(t,{type:"APPLY",path:n.map((t=>t.toString())),argumentList:u},l).then(D_)},construct(e,o){M_(r);const[i,a]=T_(o);return P_(t,{type:"CONSTRUCT",path:n.map((t=>t.toString())),argumentList:i},a).then(D_)}});return o}function T_(t){const n=t.map(k_);return[n.map((t=>t[0])),(e=n.map((t=>t[1])),Array.prototype.concat.apply([],e))];var e}const E_=new WeakMap;function S_(t,n){return E_.set(t,n),t}function N_(t){return Object.assign(t,{[p_]:!0})}function k_(t){for(const[n,e]of __)if(e.canHandle(t)){const[r,o]=e.serialize(t);return[{type:"HANDLER",name:n,value:r},o]}return[{type:"RAW",value:t},E_.get(t)||[]]}function D_(t){switch(t.type){case"HANDLER":return __.get(t.name).deserialize(t.value);case"RAW":return t.value}}function P_(t,n,e){return new Promise((r=>{const o=new Array(4).fill(0).map((()=>Math.floor(Math.random()*Number.MAX_SAFE_INTEGER).toString(16))).join("-");t.addEventListener("message",(function n(e){e.data&&e.data.id&&e.data.id===o&&(t.removeEventListener("message",n),r(e.data))})),t.start&&t.start(),t.postMessage(Object.assign({id:o},n),e)}))}function L_(t){try{window.earth=d_(t)}catch(t){Xo.error(t)}}console.log("starting..."),async function(){var t,n;Yo()&&console.log("dev mode enabled"),window.addEventListener("touchmove",(()=>{}));const e={site_version:Bo(),referring_host:null!==(t=null===(n=rv(document.referrer))||void 0===n?void 0:n.host)&&void 0!==t?t:"",is_iframe:Io()};if(to("init",e),Wo("site_instance",Ho(),e.site_version),Io()&&(Wo("iframe",e.referring_host),function(t){var n;const e=null!==(n=document.referrer.split("/")[2])&&void 0!==n?n:"";return Vo.some((t=>t.test(e)))}()))Ct("body").attr("style","font-size: 12em; color: red;").text("XX - contact @cambecc").selectAll("*").remove();else if(document.getElementById("failure_note").remove(),Uo()){const t=new Set(["https://earthhq.org","https://gca-earth-hq-staging.cube-sites.com","https://gca-earth-hq-test.cube-sites.com","https://localhost:8081","http://localhost:8081","http://localhost:8083"]);L_(await function(t){return new Promise((n=>{window.addEventListener("message",(function e(r){let{data:o,origin:i,source:a}=r;if(!t.has(i))return;const{api:u,version:l,action:c,id:s,initialState:f}=null!=o?o:{};if("net.nullschool.earth"!==u)return;if(1!==l||"connect"!==c){const t={api:u,version:l,action:c,id:s,success:!1,result:"unknown api/version"};return a.postMessage(t,i)}const{port1:h,port2:d}=new MessageChannel,p={api:u,version:l,action:c,id:s,success:!0,result:"connected"};a.postMessage(p,i,[d]),window.removeEventListener("message",e),n(function(t,n){return{expose:n=>w_(n,t),wrap:()=>x_(t),initialState:n}}(h,f))}))}))}(t))}else L_()}()})();
